"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[218],{93202:function(e,t,i){var l=i(26314);t.Z=void 0;var n=l(i(80984)),a=i(57437),s=(0,n.default)((0,a.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}),"FileDownload");t.Z=s},29389:function(e,t,i){var l=i(26314);t.Z=void 0;var n=l(i(80984)),a=i(57437),s=(0,n.default)((0,a.jsx)("path",{d:"M11 9h2v2h-2zm-2 2h2v2H9zm4 0h2v2h-2zm2-2h2v2h-2zM7 9h2v2H7zm12-6H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 18H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14v6z"}),"Gradient");t.Z=s},88030:function(e,t,i){i.d(t,{$Y:function(){return S},Mz:function(){return P},T3:function(){return C}});var l=i(57437),n=i(41637),a=i(96507),s=i(14172),o=i(88444),r=i(85269),c=i(46776),d=i(52481),h=i(90053),x=i(2265),u=i(41125),p=i(16573),m=i(24235),g=i(33343),y=i(50039),b=i(2047),j=i(89366),f=i(561),w=i(79857),v=i(31863),Z=i(11093);function C(e){let t,{omic:i,scatterData:s,mdataCol:o,PCA:r}=e,[c,d]=(0,x.useState)(!1),{OMIC2NAME:w}=(0,Z.S)(),v=(0,x.useRef)(),C=(0,n.tc)().mdataType[o].type;return"categorical"==C&&(t="category"),"numeric"==C&&(t="number"),(0,l.jsxs)(a.Z,{children:[(0,l.jsx)(T,{scatterRef:v,name:w[i]}),(0,l.jsxs)(u.G,{width:600,height:550,ref:v,margin:{top:20,right:20,bottom:20,left:20},children:[(0,l.jsx)(p.q,{}),(0,l.jsx)(m.K,{type:t,dataKey:"mdataValue",name:o,allowDuplicatedCategory:!1,children:(0,l.jsx)(g._,{value:o,offset:-10,position:"insideBottom"})}),(0,l.jsx)(y.B,{type:"number",dataKey:"projection",name:"PCA ".concat(r),children:(0,l.jsx)(g._,{value:"PCA ".concat(r),offset:20,position:"insideLeft",angle:-90})}),(0,l.jsx)(b.u,{cursor:{strokeDasharray:"3 3"},content:(0,l.jsx)(k,{})}),(0,l.jsx)(j.b,{data:s,fill:h.s[0],children:c&&(0,l.jsx)(f.e,{dataKey:"element",position:"right"})})]}),(0,l.jsx)(P,{showLabels:c,setShowLabels:d})]})}function S(e){let{omic:t,scatterData:i,selectedPlot2D:n}=e,{OMIC2NAME:s}=(0,Z.S)(),o=(0,x.useRef)(),[r,c]=(0,x.useState)(!1);return(0,l.jsxs)(a.Z,{children:[(0,l.jsx)(T,{scatterRef:o,name:s[t]}),(0,l.jsxs)(u.G,{ref:o,width:600,height:550,margin:{top:20,right:20,bottom:20,left:20},children:[(0,l.jsx)(p.q,{}),(0,l.jsx)(m.K,{type:"number",dataKey:"x",name:"PCA ".concat(n.x),children:(0,l.jsx)(g._,{value:"PCA ".concat(n.x),offset:-10,position:"insideBottom"})}),(0,l.jsx)(y.B,{type:"number",dataKey:"y",name:"PCA ".concat(n.y),children:(0,l.jsx)(g._,{value:"PCA ".concat(n.y),offset:20,position:"insideLeft",angle:-90})}),(0,l.jsx)(b.u,{cursor:{strokeDasharray:"3 3"},content:(0,l.jsx)(k,{})}),Object.keys(i).length>1&&(0,l.jsx)(w.D,{verticalAlign:"top"}),Object.keys(i).map((e,t)=>(0,l.jsx)(j.b,{data:i[e],fill:h.s[t%h.s.length],name:e,children:r&&(0,l.jsx)(f.e,{dataKey:"element",position:"top"})},e))]}),(0,l.jsx)(a.Z,{sx:{mt:1},children:(0,l.jsx)(P,{showLabels:r,setShowLabels:c})})]})}let P=e=>{let{showLabels:t,setShowLabels:i}=e;return(0,l.jsx)(a.Z,{sx:{mt:0,display:"flex",justifyContent:"center"},children:(0,l.jsxs)(a.Z,{sx:{width:100,textAlign:"center",position:"relative",left:30,border:"0px solid red"},children:[(0,l.jsx)(s.Z,{component:"legend",sx:{pt:0},children:"Show Labels"}),(0,l.jsx)(o.Z,{sx:{position:"relative",top:-10,border:"0px solid red"},checked:t,onChange:e=>{i(e=>!e)},inputProps:{"aria-label":"controlled"}})]})})},k=e=>{let{active:t,payload:i}=e;return t&&i&&i.length?(0,l.jsxs)(a.Z,{className:"custom-tooltip",sx:{backgroundColor:"rgba(5,5,5,0.8)",color:"rgba(250,250,250,0.8)",border:"1px solid rgba(50, 50, 50, 0.8)",padding:1,borderRadius:1},children:[(0,l.jsx)(r.Z,{variant:"h8",sx:{display:"block"},children:"".concat(i[0].payload.element)}),(0,l.jsx)(r.Z,{variant:"h9",sx:{display:"block"},children:"".concat(i[0].name,": ").concat("string"==typeof i[0].value?i[0].value:i[0].value.toFixed(3))}),(0,l.jsx)(r.Z,{variant:"h9",sx:{display:"block"},children:"".concat(i[1].name,": ").concat(i[1].value.toFixed(3))})]}):null},T=e=>{let{scatterRef:t,name:i}=e;return(0,l.jsx)(a.Z,{sx:{height:0},children:(0,l.jsx)(a.Z,{sx:{width:50,position:"relative",top:5,zIndex:5e3},children:(0,l.jsx)(c.Z,{"aria-label":"download",size:"small",onClick:()=>{let e=t.current.container.cloneNode(!0),l=window.document.createElement("div");l.appendChild(e),(0,v.default)(l,"PCA_Scatter-".concat(i))},sx:{opacity:.5},children:(0,l.jsx)(d.Z,{})})})})}},1218:function(e,t,i){i.r(t),i.d(t,{default:function(){return ea}});var l=i(57437),n=i(96507),a=i(2265),s=i(49600),o=i(85269),r=i(47042),c=i(33457),d=i(11093),h=i(92069);function x(e,t,i){let l=(0,h.iL)({fieldSeparator:",",decimalSeparator:".",columnHeaders:t,filename:i}),n=(0,h.gB)(l)(e);(0,h.LR)(l)(n)}var u=i(93202),p=i(41637);function m(e,t,i){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2;return{backgroundColor:"rgba(".concat(255,",").concat(255-255/(i-t)*(e-t),",").concat(255-255/(i-t)*(e-t),", ").concat(l,")")}}let g={muiTableHeadCellProps:{align:"center"},muiTableBodyCellProps:{align:"center"},size:150};var y=function(e){let{runId:t,model_info:i,view:h,workingOmics:y}=e,{OMIC2NAME:b,API_URL:j}=(0,d.S)(),{jobID:f}=(0,p.tc)(),[w,v]=(0,a.useState)({status:"ready"}),Z=(0,a.useRef)(),C=(0,a.useCallback)(async e=>{console.log("fetching stats model");let t=await fetch("".concat(j,"/get_stats_model/").concat(f,"/").concat(h,"/").concat(e)),i=await t.json();console.log(i),"waiting"!=i.status&&(v(i),clearInterval(Z.current))},[j,f,h,Z]);(0,a.useEffect)(()=>{if(console.log("useEffect"),"ready"!=w.status)return;let e=setInterval(()=>C(t),5e3);return Z.current=e,()=>clearInterval(e)},[C,Z,w,t]);let S=(0,a.useMemo)(()=>{let e=[];return"Multi-View"==h&&(e=y.map(e=>({header:"".concat(b[e]," (%)"),id:e,accessorFn:t=>(100*t.omic_weight[b[e]]).toFixed(2),...g,Cell:e=>{let{renderedCellValue:t,row:i}=e;return(0,l.jsx)(n.Z,{sx:{backgroundColor:m(t,0,100),py:1},children:t})}}))),e},[y,b,h]),P=(0,a.useMemo)(()=>[{accessorKey:"LV",header:"Latent Variable",...g},...S,{id:"R2",header:"R2",accessorFn:e=>"".concat(Math.round(1e4*e.R2)/1e4),...g,Cell:e=>{let{renderedCellValue:t,row:i}=e;return(0,l.jsx)(n.Z,{sx:{backgroundColor:m(t,0,1),py:1},children:t})}},{id:"pv",header:"p-value",accessorFn:e=>"".concat(e.pv<1e-4?e.pv.toExponential(2):e.pv.toFixed(5)),...g,Cell:e=>{let{renderedCellValue:t,row:i}=e;return(0,l.jsx)(n.Z,{sx:{backgroundColor:function(e){let t=Math.min(10,Math.max(1,-Math.log10(e)));return{backgroundColor:e<.1?"rgba(".concat(255-(t-1)*255/9,",").concat(-55/9*t+255+55/9,",").concat(255-(t-1)*255/9,", 0.25)"):"rgba(255,255,255,0.5)"}}(t),py:1},children:t})}}],[S]),k=(0,c.X0)({columns:P,data:i.LV,muiTableBodyCellProps:{sx:{p:0}},enableColumnFilterModes:!1,enableColumnOrdering:!1,enableGrouping:!1,enableColumnPinning:!1,enableFacetedValues:!1,enableRowActions:!1,enableRowSelection:!1,enableGlobalFilter:!1,enableColumnActions:!1,enableSorting:!1,enableDensityToggle:!1,enableHiding:!1,enableFullScreenToggle:!1,enableFilters:!1,enableBottomToolbar:!1,renderTopToolbarCustomActions:e=>{let{table:t}=e;return(0,l.jsxs)(n.Z,{sx:{width:"100%",display:"flex",gap:"16px",padding:"8px",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[(0,l.jsx)(n.Z,{children:(0,l.jsx)(s.Z,{onClick:()=>x(t.getRowModel().rows.map(e=>e._valuesCache),t.getAllColumns().map(e=>({key:e.columnDef.id,displayLabel:e.columnDef.header})),"PathwayAnalysis_Model"),startIcon:(0,l.jsx)(u.Z,{}),children:"Export Table"})}),(0,l.jsx)(n.Z,{children:(0,l.jsx)(o.Z,{variant:"h6",children:"Summary statistics"})}),(0,l.jsxs)(n.Z,{sx:{border:"0px solid red",textAlign:"center"},children:[(0,l.jsx)(n.Z,{sx:{backgroundColor:m(i.model.R2,0,1,.1),borderRadius:2,px:2},children:(0,l.jsxs)(o.Z,{variant:"body1",children:["Model R2 = ",i.model.R2.toFixed(4)]})}),(0,l.jsxs)(n.Z,{sx:{backgroundColor:"ok"==w.status&&w.statsModel.R2pv<=.1?"rgba(0,200,0,0.1)":"white",borderRadius:2,transition:"all 1s ease",display:"flex",alignItems:"center",justifyContent:"center",mt:1},children:[(0,l.jsxs)(o.Z,{variant:"body1",children:["p-value ","â‰¤"," "]}),(0,l.jsxs)(n.Z,{sx:{pl:.75},children:[["ready","waiting"].includes(w.status)&&(0,l.jsx)(n.Z,{sx:{pt:.5},children:(0,l.jsx)(r.Z,{size:15,disableShrink:!0})}),"ok"==w.status&&(0,l.jsx)(o.Z,{variant:"body1",children:w.statsModel.R2pv})]})]})]})]})}});return(0,l.jsx)(n.Z,{children:(0,l.jsx)(c.P2,{table:k})})},b=i(70812),j=i(67248),f=i(41125),w=i(16573),v=i(24235),Z=i(33343),C=i(50039),S=i(2047),P=i(79857),k=i(89366),T=i(561),A=i(90053),I=i(88030),M=i(2678);let V=e=>{let{selectedLV:t,setSelectedLV:i,projOpts:s,showLabels:o,setShowLabels:r}=e;return(0,l.jsxs)(n.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,l.jsx)(n.Z,{sx:{position:"relative",top:-50,left:-30},children:(0,l.jsx)(I.Mz,{showLabels:o,setShowLabels:r})}),(0,l.jsx)(n.Z,{sx:{px:4},children:(0,l.jsx)(b.Z,{value:t.x,onChange:(e,t)=>t&&i(e=>({...e,x:t})),isOptionEqualToValue:(e,t)=>e.id===t.id,id:"xAxis",options:s,sx:{width:200},renderInput:e=>(0,l.jsx)(j.Z,{...e,label:"X Axis"}),renderOption:(e,t)=>(0,a.createElement)("li",{...e,key:t.label},t.label)})}),(0,l.jsx)(n.Z,{sx:{p:4},children:(0,l.jsx)(b.Z,{value:t.y,onChange:(e,t)=>t&&i(e=>({...e,y:t})),isOptionEqualToValue:(e,t)=>e.id===t.id,id:"yAxis",options:s,sx:{width:200},renderInput:e=>(0,l.jsx)(j.Z,{...e,label:"Y Axis"}),renderOption:(e,t)=>(0,a.createElement)("li",{...e,key:t.label},t.label)})})]})},L=e=>{let{active:t,payload:i}=e;return t&&i&&i.length?(0,l.jsxs)(n.Z,{className:"custom-tooltip",sx:{backgroundColor:"rgba(5,5,5,0.8)",color:"rgba(250,250,250,0.8)",border:"1px solid rgba(50, 50, 50, 0.8)",padding:1,borderRadius:1},children:[(0,l.jsx)(o.Z,{variant:"h8",sx:{display:"block"},children:"".concat(i[0].payload.sample)}),i[0].payload.g&&(0,l.jsx)(o.Z,{variant:"h8",sx:{display:"block"},children:"Group: ".concat(i[0].payload.g)}),(0,l.jsx)(o.Z,{variant:"h9",sx:{display:"block"},children:"".concat(i[0].name,": ").concat(i[0].value.toFixed(3))}),(0,l.jsx)(o.Z,{variant:"h9",sx:{display:"block"},children:"".concat(i[1].name,": ").concat(i[1].value.toFixed(3))})]}):null};var R=function(e){let{projections:t,nLV:i,mdataCategorical:s}=e,o=(0,p.tc)().user.mdata.column(s.mdataCol),r=(0,a.useMemo)(()=>t.map(e=>({sample:e.sample,g:o.values[o.index.indexOf(e.sample)],...e.proj.reduce((e,t,i)=>({...e,["LV".concat(i+1)]:t}),{})})),[t,o]),c=(0,a.useMemo)(()=>{let e=[];for(let t=1;t<=i;t++)e.push("LV".concat(t));return e.map(e=>({label:e,id:e}))},[i]),[d,h]=(0,a.useState)({x:c[0],y:c[1]}),[x,u]=(0,a.useState)(!1),m=(0,a.useRef)();return(0,l.jsx)(n.Z,{children:(0,l.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"space-evenly",alignItems:"center",overflow:"auto"},children:[(0,l.jsxs)(n.Z,{children:[(0,l.jsx)(n.Z,{sx:{width:0},children:(0,l.jsx)(M.L,{scatterRef:m,fileName:"PathwayAnalysis_Scatter"})}),(0,l.jsxs)(f.G,{ref:m,width:540,height:500,margin:{top:5,right:20,bottom:20,left:20},children:[(0,l.jsx)(w.q,{}),(0,l.jsx)(v.K,{type:"number",dataKey:d.x.label,name:d.x.label,children:(0,l.jsx)(Z._,{value:"".concat(d.x.label),offset:-10,position:"insideBottom"})}),(0,l.jsx)(C.B,{type:"number",dataKey:d.y.label,name:d.y.label,children:(0,l.jsx)(Z._,{value:d.y.label,offset:20,position:"insideLeft",angle:-90})}),(0,l.jsx)(S.u,{cursor:{strokeDasharray:"3 3"},content:(0,l.jsx)(L,{})}),(0,l.jsx)(P.D,{verticalAlign:"top"}),(0,l.jsx)(k.b,{name:s.g1.id,data:r.filter(e=>e.g==s.g1.id),fill:A.s[0],children:x&&(0,l.jsx)(T.e,{dataKey:"sample",position:"top"})}),(0,l.jsx)(k.b,{name:s.g2.id,data:r.filter(e=>e.g==s.g2.id),fill:A.s[1],children:x&&(0,l.jsx)(T.e,{dataKey:"sample",position:"top"})})]})]}),(0,l.jsx)(n.Z,{sx:{},children:(0,l.jsx)(V,{selectedLV:d,setSelectedLV:h,projOpts:c,showLabels:x,setShowLabels:u})})]})})},z=i(22079),_=i(91797),F=i(52151),D=i(91928),E=i(29389),H=i(64728),O=i(10537),B=i(76328);let N=e=>{let{path_info:t,rId2info:i,view:s,omic:r}=e,[c,d]=(0,a.useState)({});return(0,l.jsxs)(n.Z,{sx:{display:"flex",flexDirection:"Single-View"==s?"row":"column",justifyContent:"space-evenly"},children:[(0,l.jsx)(n.Z,{sx:{width:"Single-View"==s?"45%":"98%"},children:(0,l.jsx)(K,{pathwaySelection:c,setPathwaySelection:d,path_info:t,omic:r})}),(0,l.jsxs)(n.Z,{sx:{width:"Single-View"==s?"45%":"98%",display:"flex",alignItems:"center",mt:"Multi-View"==s?2:0},children:[Object.keys(c).length>0&&(0,l.jsx)(n.Z,{sx:{width:"100%"},children:(0,l.jsx)(q,{pathway:Object.keys(c)[0],path_info:t,rId2info:i,view:s})}),0==Object.keys(c).length&&(0,l.jsx)(n.Z,{sx:{border:"2px dashed grey",borderRadius:"16px",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center",padding:"16px",boxSizing:"border-box"},children:(0,l.jsx)(o.Z,{variant:"body1",children:"Click pathway to show biomolecules"})})]})]})},K=e=>{let{pathwaySelection:t,setPathwaySelection:i,path_info:r,omic:h}=e,{OMIC2NAME:p}=(0,d.S)(),g=(0,a.useMemo)(()=>r.filter(e=>e.VIP>1).map(e=>({...e,N:e.molecular_importance.length})),[r]),y=(0,a.useMemo)(()=>{let e=0;return g.map(t=>{t.VIP>e&&(e=t.VIP)}),e},[g]),b=(0,a.useMemo)(()=>[{accessorKey:"Path_ID",header:"Path_ID",size:100},{accessorKey:"Name",header:"Name"},{accessorKey:"N",header:"N.",size:50,muiTableBodyCellProps:{align:"center"}},{id:"VIP",accessorFn:e=>e.VIP.toFixed(4),header:"VIP",size:60,muiTableBodyCellProps:{align:"center"},Cell:e=>{let{renderedCellValue:t,row:i}=e;return(0,l.jsx)(n.Z,{sx:{backgroundColor:m(t,1,y),py:1.5,width:"100%",height:"100%"},children:t})}}],[y]),j=(0,a.useRef)(null),[f,w]=(0,a.useState)(!0),[v,Z]=(0,a.useState)([{id:"VIP",desc:!0}]);(0,a.useEffect)(()=>{w(!1)},[]),(0,a.useEffect)(()=>{try{var e,t;null===(t=j.current)||void 0===t||null===(e=t.scrollToIndex)||void 0===e||e.call(t,0)}catch(e){console.error(e)}},[v]);let C=(0,c.X0)({columns:b,data:g,layoutMode:"grid",enableRowSelection:!0,enableMultiRowSelection:!1,getRowId:e=>e.Path_ID,muiTableBodyRowProps:e=>{let{row:t}=e;return{onClick:t.getToggleSelectedHandler(),sx:{cursor:"pointer"}}},muiTableBodyCellProps:{sx:{p:0}},enableStickyHeader:!0,enablePagination:!1,muiTableContainerProps:{sx:{minHeight:"400px",maxHeight:"400px"}},enableBottomToolbar:!1,enableTopToolbar:!0,onRowSelectionChange:i,state:{rowSelection:t,sorting:v,isLoading:f},rowVirtualizerInstanceRef:j,rowVirtualizerOptions:{overscan:5},onSortingChange:Z,enableRowVirtualization:!0,enableDensityToggle:!1,enableHiding:!1,enableFullScreenToggle:!1,enableFilters:!0,enableGlobalFilter:!1,initialState:{showColumnFilters:!0},positionToolbarAlertBanner:"none",renderTopToolbarCustomActions:e=>{let{table:t}=e;return(0,l.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,l.jsx)(n.Z,{sx:{width:"33%"},children:(0,l.jsx)(s.Z,{onClick:()=>x(g,t.getAllColumns().map(e=>({key:e.columnDef.id,displayLabel:e.columnDef.header})).filter(e=>"Select"!=e.displayLabel),"PathwayImportance"),startIcon:(0,l.jsx)(u.Z,{}),children:"Export Table"})}),h&&(0,l.jsx)(n.Z,{sx:{width:"33%",textAlign:"center"},children:(0,l.jsx)(o.Z,{variant:"h6",children:p[h]})}),(0,l.jsx)(n.Z,{sx:{width:"33%"}})]})}});return(0,l.jsx)(n.Z,{children:(0,l.jsx)(c.P2,{table:C})})},q=e=>{let{pathway:t,path_info:i,rId2info:r,view:h}=e,{OMIC2NAME:p}=(0,d.S)(),[m,g]=(0,a.useMemo)(()=>{let e=i.filter(e=>e.Path_ID==t)[0],l=e.molecular_importance.map(e=>({...e,...r[e.omic][e.fid]})).map(e=>({...e,Name:"q"==e.omic||"t"==e.omic?"".concat(e.name," | ").concat(e.description.replace(/\[.*\]$/,"")):e.Name,omicName:p[e.omic]}));return[e,l]},[t,p,i,r]),y=(0,a.useMemo)(()=>{let e=0;return g.map(t=>{Math.abs(t.PC1_Loadings)>e&&(e=Math.abs(t.PC1_Loadings))}),e},[g]),b=(0,a.useMemo)(()=>{let e="Single-View"==h?[{header:"Omic",accessorKey:"omicName",size:100}]:[];return[{header:"#",accessorKey:"xId",size:100,muiTableBodyCellProps:{sx:{px:2,py:0}}},...e,{header:"ID",accessorKey:"uId",size:100},{header:"Name",accessorKey:"Name"},{header:"Loading",id:"PC1_Loadings",accessorFn:e=>Number(e.PC1_Loadings.toFixed(4)),size:120,muiTableBodyCellProps:{align:"center"},Cell:e=>{let{renderedCellValue:t,row:i}=e;return(0,l.jsx)(n.Z,{sx:{backgroundColor:function(e,t,i){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2,n=.5*(t+i);return e>n?{backgroundColor:"rgba(".concat(255,",").concat(255-255/(i-n)*(e-n),",").concat(255-255/(i-n)*(e-n),", ").concat(l,")")}:e<n?{backgroundColor:"rgba(".concat(255-255/(-t+n)*(-e+n),",").concat(255-255/(-t+n)*(-e+n),",").concat(255,", ").concat(l,")")}:{backgroundColor:"rgba(255,255,255, ".concat(l,")")}}(t,-y,y),py:1.5,width:"100%",height:"100%"},children:t})}}]},[h,y]),j=(0,a.useRef)(null),[f,w]=(0,a.useState)(!0),[v,Z]=(0,a.useState)([{id:"PC1_Loadings",desc:!0}]);(0,a.useEffect)(()=>{w(!1)},[]),(0,a.useEffect)(()=>{try{var e,t;null===(t=j.current)||void 0===t||null===(e=t.scrollToIndex)||void 0===e||e.call(t,0)}catch(e){console.error(e)}},[v]);let[C,S]=(0,a.useState)(!1),P=(0,a.useCallback)(()=>S(!0),[S]),k=(0,c.X0)({columns:b,data:g,enableStickyHeader:!0,enablePagination:!1,muiTableContainerProps:{sx:{maxHeight:"400px",minHeight:"400px"}},enableBottomToolbar:!1,enableTopToolbar:!0,enableSorting:!0,initialState:{},state:{sorting:v,isLoading:f},rowVirtualizerInstanceRef:j,rowVirtualizerOptions:{overscan:5},onSortingChange:Z,enableRowVirtualization:!0,enableDensityToggle:!1,enableHiding:!1,enableFullScreenToggle:!1,enableFilters:!1,muiTableBodyCellProps:{sx:{px:0,py:0}},enableFilters:!0,enableGlobalFilter:!1,initialState:{showColumnFilters:!0},renderTopToolbarCustomActions:e=>{let{table:i}=e;return(0,l.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,l.jsx)(n.Z,{children:(0,l.jsx)(s.Z,{onClick:()=>x(g,i.getAllColumns().map(e=>({key:e.columnDef.id,displayLabel:e.columnDef.header})),"Biomolecules_".concat(t)),startIcon:(0,l.jsx)(u.Z,{}),children:"Export Table"})}),(0,l.jsx)(n.Z,{children:(0,l.jsx)(o.Z,{variant:"body1",children:m.Name})}),!1,(0,l.jsx)(n.Z,{children:(0,l.jsx)(s.Z,{onClick:P,startIcon:(0,l.jsx)(E.Z,{}),children:"Plot Heatmap"})})]})}});return(0,l.jsxs)(n.Z,{children:[(0,l.jsx)(c.P2,{table:k}),(0,l.jsx)(G,{showHeatmap:C,setShowHeatmap:S,featureInfo:g,pathway:t,pathwayInfo:m})]})},G=e=>{let{setShowHeatmap:t,showHeatmap:i,featureInfo:r,pathway:c,pathwayInfo:d}=e,h=(0,p.tc)().norm,{mdataType:x}=(0,p.tc)(),{mdataCategoricalRes:u,workingOmics:m}=(0,H.a0)().PWA,{projections:g}=(0,H.a0)().PWA.jobStatus.pwa_res,[y,b]=(0,a.useState)({min:-2,max:2}),j=(0,a.useMemo)(()=>{x[u.mdataCol].level2id[u.g1.id],x[u.mdataCol].level2id[u.g2.id];let e=g.toSorted((e,t)=>e.proj[0]<t.proj[0]?1:-1).map(e=>e.sample);return{g1:e.filter(e=>x[u.mdataCol].level2id[u.g1.id].includes(e)),g2:e.filter(e=>x[u.mdataCol].level2id[u.g2.id].includes(e))}},[g,x,u]),f=(0,a.useMemo)(()=>{let e={};m.map(t=>{e[t]=(0,O.$i)(h["x".concat(t)])});let t={};return t.g1=r.map(t=>({id:t.xId,data:j.g1.map(i=>({x:i,y:-e[t.omic][i][t.xId]}))})),t.g2=r.map(t=>({id:t.xId,data:j.g2.map(i=>({x:i,y:-e[t.omic][i][t.xId]}))})),t},[m,j,r,h]);return(0,l.jsxs)(z.Z,{open:i,maxWidth:"xl",onClose:()=>t(!1),children:[(0,l.jsxs)(_.Z,{children:[c," | ",d.Name]}),(0,l.jsx)(F.Z,{sx:{overflowX:"hidden"},children:(0,l.jsxs)(n.Z,{sx:{display:"flex",border:"0px solid red"},children:[(0,l.jsxs)(n.Z,{sx:{border:"0px solid red"},children:[(0,l.jsx)(o.Z,{sx:{fontSize:"1em",textAlign:"right"},children:(0,l.jsx)("span",{children:"â€‹"})}),(0,l.jsx)(B.M2,{width:100,height:30*r.length,data:r.map(e=>({id:e.xId,data:[]})),margin:{top:0,right:0,bottom:0,left:100},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"",legendPosition:"middle",legendOffset:40}})]}),(0,l.jsxs)(n.Z,{sx:{border:"0px solid blue"},children:[(0,l.jsx)(o.Z,{sx:{textAlign:"center"},children:u.g1.id}),(0,l.jsx)(B.M2,{height:30*r.length,width:Math.min(550,8*j.g1.length),data:f.g1,margin:{top:0,right:0,bottom:0,left:0},axisLeft:null,axisTop:{tickSize:0,tickPadding:0,tickRotation:0,legend:"",legendOffset:0},colors:{type:"diverging",scheme:"red_blue",minValue:y.min,maxValue:y.max},emptyColor:"#555555",animate:!1,enableLabels:!1})]}),(0,l.jsx)(n.Z,{sx:{mx:.2,width:0,border:"1px solid rgba(0,0,0,1)"}}),(0,l.jsxs)(n.Z,{sx:{border:"0px solid blue"},children:[(0,l.jsx)(o.Z,{sx:{textAlign:"center"},children:u.g2.id}),(0,l.jsx)(B.M2,{height:30*r.length,width:Math.min(550,8*j.g2.length),data:f.g2,margin:{top:0,right:0,bottom:0,left:0},axisLeft:null,axisTop:{tickSize:0,tickPadding:0,tickRotation:0,legend:"",legendOffset:0},colors:{type:"diverging",scheme:"red_blue",minValue:y.min,maxValue:y.max},emptyColor:"#555555",animate:!1,enableLabels:!1})]})]})}),(0,l.jsxs)(D.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,l.jsx)(n.Z,{sx:{width:"50%",position:"relative",left:17},children:(0,l.jsx)(W,{a:y.min,b:y.max,setZLegend:b})}),(0,l.jsx)(n.Z,{children:(0,l.jsx)(s.Z,{onClick:()=>t(!1),children:"Close"})})]})]})},W=e=>{let{a:t,b:i,setZLegend:n}=e,[s,o]=(0,a.useState)({min:t,max:i}),r=(t+i)/2,c={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"10px",background:"linear-gradient(to right, ".concat("#1f4e79",", ").concat("rgb(255, 255, 255)"," ").concat((r-t)/(i-t)*100,"%, ").concat("#9e2a2b",")"),color:"#fff",height:"15px"},d=(e,t)=>{let i=Number(t);o(i=>({...i,[e]:t})),"number"!=typeof i||isNaN(i)||n(t=>({...t,[e]:i}))};return(0,l.jsxs)("div",{style:c,children:[(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"text",style:{width:30,height:20,textAlign:"center"},value:s.min,onChange:e=>d("min",e.target.value)})}),(0,l.jsx)("div",{style:{color:"black"},children:r.toFixed(0)}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"text",style:{width:30,height:20,textAlign:"center"},value:s.max,onChange:e=>d("max",e.target.value)})})]})};var $=function(e){let{view:t,path_info:i,rId2info:a,workingOmics:s}=e,{OMIC2NAME:o}=(0,d.S)();return(0,l.jsxs)(n.Z,{sx:{mt:2},children:["Single-View"==t&&(0,l.jsx)(N,{path_info:i,rId2info:a,view:t}),"Multi-View"==t&&(0,l.jsx)(n.Z,{sx:{width:"100%",display:"flex",justifyContent:"space-evenly"},children:s.map(e=>(0,l.jsx)(n.Z,{sx:{px:2,width:"".concat(Math.min(100/s.length,50),"%")},children:(0,l.jsx)(N,{path_info:Object.values(i[o[e]]),rId2info:a,view:t,omic:e})},e))})]})},U=i(35843),X=i(46776),Y=i(33533),J=i(80565),Q=i(37682),ee=i(666);let et=(0,U.ZP)(z.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function ei(){let[e,t]=a.useState(!1),i=()=>{t(!1)};return(0,l.jsxs)(n.Z,{children:[(0,l.jsx)(X.Z,{"aria-label":"question",size:"large",onClick:()=>{t(!0)},children:(0,l.jsx)(ee.Z,{fontSize:"inherit"})}),(0,l.jsxs)(et,{onClose:i,"aria-labelledby":"customized-dialog-title",open:e,maxWidth:"lg",children:[(0,l.jsx)(_.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Pathway Analysis - Model Summary"}),(0,l.jsx)(X.Z,{"aria-label":"close",onClick:i,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,l.jsx)(Y.default,{})}),(0,l.jsxs)(F.Z,{sx:{textAlign:"justify"},dividers:!0,children:[(0,l.jsx)(o.Z,{gutterBottom:!0,children:"The results of your pathway analysis are displayed here, providing a detailed overview of the modelâ€™s performance and the most relevant pathways to the condition of interest."}),(0,l.jsx)(o.Z,{gutterBottom:!0,children:"On the upper pane you can find:"}),(0,l.jsx)(n.Z,{sx:{pl:4},children:(0,l.jsxs)(J.Z,{sx:{listStyleType:"disc",listStyle:"outside"},children:[(0,l.jsxs)(Q.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,l.jsx)("strong",{children:"Statistical Summary Table"})," (Left-Side):",(0,l.jsxs)(J.Z,{sx:{listStyleType:"disc",listStyle:"outside"},children:[(0,l.jsx)(Q.ZP,{sx:{display:"list-item",textAlign:"justify"},children:"At the top of the table, the R-squared (R\xb2) value is displayed, representing the proportion of variance in the response variable explained by the model. An empirical p-value is also shown, calculated by performing ten permutations on the response vector (y) and comparing the simulated R\xb2 values with the actual one. The minimum p-value that can be obtained is 0.1, reflecting the reliability of the model."}),(0,l.jsxs)(Q.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,l.jsx)("strong",{children:"Latent Variables"}),": The table lists each latent variable calculated by the model, with the following columns:",(0,l.jsxs)(J.Z,{sx:{listStyleType:"disc",listStyle:"outside"},children:[(0,l.jsxs)(Q.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,l.jsx)("strong",{children:"R\xb2 Value"}),": Indicates how much of the variability is explained by each latent variable."]}),(0,l.jsxs)(Q.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,l.jsx)("strong",{children:"P-Value"}),": Shows the R\xb2 statistical significance of the each latent variable."]}),(0,l.jsxs)(Q.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,l.jsx)("strong",{children:"Omic Contribution"})," (Multi-View Only): An additional column shows the percentage contribution of each omic dataset to the corresponding latent variable, offering insight into how different omics contribute to the model."]})]})]})]})]}),(0,l.jsxs)(Q.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,l.jsx)("strong",{children:"Sample Projection Scatter Plot"})," (Right Side): This scatter plot displays the projection of samples onto each latent variable, with points color-coded according to their group in the analyzed condition. This visualization helps in assessing how well the model separates the different groups based on the latent variables."]})]})})]}),(0,l.jsx)(D.Z,{})]})]})}let el=(0,U.ZP)(z.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function en(){let[e,t]=a.useState(!1),i=()=>{t(!1)};return(0,l.jsxs)(n.Z,{children:[(0,l.jsx)(X.Z,{"aria-label":"question",size:"large",onClick:()=>{t(!0)},children:(0,l.jsx)(ee.Z,{fontSize:"inherit"})}),(0,l.jsxs)(el,{onClose:i,"aria-labelledby":"customized-dialog-title",open:e,maxWidth:"lg",children:[(0,l.jsx)(_.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Pathway Analysis - Pathway Exploration"}),(0,l.jsx)(X.Z,{"aria-label":"close",onClick:i,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,l.jsx)(Y.default,{})}),(0,l.jsxs)(F.Z,{sx:{textAlign:"justify"},dividers:!0,children:[(0,l.jsx)(o.Z,{gutterBottom:!0,children:"The structure of the lower pane varies based on whether you are using Single-View or Multi-View analysis:"}),(0,l.jsx)(n.Z,{sx:{pl:4},children:(0,l.jsxs)(J.Z,{sx:{listStyleType:"disc",listStyle:"outside"},children:[(0,l.jsxs)(Q.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,l.jsx)("strong",{children:"Single-View"}),":",(0,l.jsxs)(J.Z,{sx:{listStyleType:"disc",listStyle:"outside"},children:[(0,l.jsxs)(Q.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,l.jsx)("strong",{children:"Relevant Pathways Table"}),": Displays the pathways most strongly associated with the outcome (only pathways with a VIP ",">"," 1 are shown). The VIP (Variable Importance in Projection) score highlights the importance of each pathway in the model."]}),(0,l.jsxs)(Q.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,l.jsx)("strong",{children:"Pathway Exploration"}),": Clicking on a pathway allows you to explore the biomolecules associated with it. The association is indicated by the loading on the first principal component, which provides insight into the contribution of each biomolecule (the loading sign should not be interpreted as a biological increase or decrease)."]})]})]}),(0,l.jsxs)(Q.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,l.jsx)("strong",{children:"Multi-View"}),":",(0,l.jsxs)(J.Z,{sx:{listStyleType:"disc",listStyle:"outside"},children:[(0,l.jsxs)(Q.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,l.jsx)("strong",{children:"Omic-Specific Pathway Tables"}),": Separate tables are provided for each analyzed omic, listing the most relevant pathways for each (VIP ",">"," 1). This allows you to see how pathways across different omics contribute to the overall model."]}),(0,l.jsxs)(Q.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,l.jsx)("strong",{children:"Pathway Exploration"}),": Similar to Single-View, you can click on pathways to explore the associated biomolecules, with their degree of association indicated by their loadings."]})]})]})]})})]}),(0,l.jsx)(D.Z,{})]})]})}var ea=function(e){let{pwa_res:t,runId:i,rId2info:a,view:s,workingOmics:o,mdataCategorical:r}=e;return(0,l.jsxs)(n.Z,{children:[(0,l.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(n.Z,{sx:{height:0,width:0,alignSelf:"start"},children:(0,l.jsx)(ei,{})}),(0,l.jsx)(n.Z,{sx:{width:"50%",px:3},children:(0,l.jsx)(y,{runId:i,model_info:t.model_info,view:s,workingOmics:o})}),(0,l.jsx)(n.Z,{sx:{width:"50%",px:3},children:(0,l.jsx)(R,{projections:t.projections,nLV:t.model_info.LV.length,mdataCategorical:r})})]}),(0,l.jsxs)(n.Z,{sx:{mt:4},children:[(0,l.jsx)(n.Z,{sx:{width:0,height:0,position:"relative",top:-35},children:(0,l.jsx)(en,{})}),(0,l.jsx)($,{view:s,path_info:t.path_info,rId2info:a,workingOmics:o})]})]})}},2678:function(e,t,i){i.d(t,{L:function(){return r}});var l=i(57437),n=i(96507),a=i(46776),s=i(52481),o=i(31863);let r=e=>{let{scatterRef:t,fileName:i}=e;return(0,l.jsx)(n.Z,{sx:{height:0},children:(0,l.jsx)(n.Z,{sx:{width:50,position:"relative",top:0,zIndex:500},children:(0,l.jsx)(a.Z,{"aria-label":"download",size:"small",onClick:()=>{let e=t.current.container.cloneNode(!0),l=window.document.createElement("div");l.appendChild(e),(0,o.default)(l,i)},sx:{opacity:.5},children:(0,l.jsx)(s.Z,{})})})})}},92069:function(e,t,i){i.d(t,{LR:function(){return Z},gB:function(){return v},iL:function(){return n}});var l={fieldSeparator:",",decimalSeparator:".",quoteStrings:!0,quoteCharacter:'"',showTitle:!1,title:"My Generated Report",filename:"generated",showColumnHeaders:!0,useTextFile:!1,useBom:!0,columnHeaders:[],useKeysAsHeaders:!1,boolDisplay:{true:"TRUE",false:"FALSE"},replaceUndefinedWith:""},n=e=>Object.assign({},l,e);class a extends Error{constructor(e){super(e),this.name="CsvGenerationError"}}class s extends Error{constructor(e){super(e),this.name="EmptyHeadersError"}}class o extends Error{constructor(e){super(e),this.name="CsvDownloadEnvironmentError"}}var r=e=>e,c=e=>e,d=e=>"object"==typeof e?r(e.key):r(e),h=e=>"object"==typeof e?r(e.displayLabel):r(e),x=(e,...t)=>t.reduce((e,t)=>t(e),e),u=e=>t=>e.useBom?r(c(t)+"\uFEFF"):t,p=e=>t=>e.showTitle?r(c(t)+e.title):t,m=e=>t=>r(c(e)+c(t)+"\r\n"),g=e=>(t,i)=>y(e)(r(t+i)),y=e=>t=>r(c(t)+e.fieldSeparator),b=(e,t)=>i=>{if(!e.showColumnHeaders)return i;if(t.length<1)throw new s("Option to show headers but none supplied. Make sure there are keys in your collection or that you've supplied headers through the config options.");let l=r("");for(let i=0;i<t.length;i++){let n=h(t[i]);l=g(e)(l,w(e,n))}return l=r(c(l).slice(0,-1)),m(i)(l)},j=(e,t,i)=>l=>{let n=l;for(var a=0;a<i.length;a++){let l=r("");for(let n=0;n<t.length;n++){let s=d(t[n]),o=void 0===i[a][c(s)]?e.replaceUndefinedWith:i[a][c(s)];l=g(e)(l,w(e,o))}l=r(c(l).slice(0,-1)),n=m(n)(l)}return n},f=e=>+e===e&&(!isFinite(e)||!!(e%1)),w=(e,t)=>{if("locale"===e.decimalSeparator&&f(t))return t.toLocaleString();if("."!==e.decimalSeparator&&f(t))return t.toString().replace(".",e.decimalSeparator);if("string"==typeof t){let i=t;return(e.quoteStrings||e.fieldSeparator&&t.indexOf(e.fieldSeparator)>-1||t.indexOf("\n")>-1||t.indexOf("\r")>-1)&&(i=e.quoteCharacter+t+e.quoteCharacter),i}if("boolean"==typeof t&&e.boolDisplay){let i=t?"true":"false";return e.boolDisplay[i]}return t},v=e=>t=>{let i=n(e),l=i.useKeysAsHeaders?Object.keys(t[0]):i.columnHeaders,s=x(r(""),u(i),p(i),b(i,l),j(i,l,t));if(c(s).length<1)throw new a("Output is empty. Is your data formatted correctly?");return s},Z=e=>t=>{if(!window)throw new o("Downloading only supported in a browser environment.");let i=n(e),l=c(t),a=i.useTextFile?"plain":"csv",s=i.useTextFile?"txt":"csv",r=new Blob([l],{type:`text/${a};charset=utf8;`}),d=document.createElement("a");d.download=`${i.filename}.${s}`,d.href=URL.createObjectURL(r),d.setAttribute("visibility","hidden"),document.body.appendChild(d),d.click(),document.body.removeChild(d)}}}]);