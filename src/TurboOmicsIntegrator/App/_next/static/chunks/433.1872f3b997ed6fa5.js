"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[433],{58433:function(e,t,i){i.r(t);var l=i(57437),n=i(96507),a=i(2265),s=i(41637),d=i(51808),r=i(11093),u=i(98864),c=i.n(u);let o=c()(()=>i.e(178).then(i.bind(i,81178)),{loadableGenerated:{webpack:()=>[81178]}}),p=c()(()=>Promise.all([i.e(553),i.e(600)]).then(i.bind(i,51600)),{loadableGenerated:{webpack:()=>[51600]}}),m=[{label:"KEGG",id:"KEGG"},{label:"ChEBI",id:"ChEBI"},{label:"PubChem (CID)",id:"PubChem"},{label:"HMDB",id:"HMDB"}];t.default=function(e){let{fRef:t,f2MeanL:i,colFid:u,setColFid:c,setM2cat:h,MetaboID:f}=e,{jobID:b}=(0,s.tc)(),{API_URL:x}=(0,r.S)(),{m2i:j}=(0,s.tc)().user,C=(0,s.tc)().f2x.m,{OS:y}=(0,s.tc)(),E=(0,a.useMemo)(()=>j.columns.map(e=>({label:e,id:e})),[j]),[g,S]=(0,a.useState)(m[0]),Z=(0,a.useMemo)(()=>["ChEBI","PubChem"].includes(g.id),[g]),[G,w]=(0,a.useState)([]),{midTargetArr:v,midArr:_,midIndex:k,db2usr:I}=(0,a.useMemo)(()=>{let e,i,l;let n={};return u&&(e=t.map(e=>e[u.id]).filter(e=>e),i=j.column(u.id).values.filter((e,t)=>e&&C[t]),Z?(e=e.map(e=>Number(e).toString()),i=i.map(e=>{let t=Number(e).toString();return n[t]=e,t})):i.map(e=>n[e]=e),l=(i=i.map(t=>({id:t,target:e.includes(t)}))).map(e=>f[g.id].indexOf(e.id))),{midTargetArr:e,midArr:i,midIndex:l,db2usr:n}},[u,g,Z,t,j,C,f]);(0,a.useEffect)(()=>{if(null===u)return;let e={};if(k.every(e=>-1==e)){console.log("No index found"),w([]);return}["KEGG","ChEBI"].map(t=>{e[t]=k.map((e,i)=>({id:f[t][e],target:_[i].target})).filter(e=>e.id)}),fetch("".concat(x,"/run_ora/").concat(b,"/").concat(y.scientific_name),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{e.KEGG=e.KEGG.map(e=>({...e,name:e.name.split(" - ").slice(0,-1).join(" - ")}));let t=[];Object.keys(e).map(i=>{e[i].map(e=>t.push({...e,pvalue:Math.round(1e3*e.pvalue)/1e3,db:i}))}),w(t.filter(e=>e.N_pathway_sig>0))})},[k,_,u,x,y,b,f]);let[M,F]=(0,a.useState)(null),[N,O]=(0,a.useState)([]);return(0,a.useEffect)(()=>{if(console.log("setM2Cat"),!u)return;let e={};v.map(t=>e[I[t]]=[]),G.filter(e=>N.includes(e.id)).map(t=>{t.pathway_sig.map(i=>{let l=f[g.id][f[t.db].indexOf(i)];l&&v.includes(l)&&e[I[l]].push({native:t.id,name:t.name})})}),h(e)},[N,v,G,g,u,I,h,f]),(0,l.jsxs)(n.Z,{sx:{},children:[(0,l.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"center",pb:4},children:[(0,l.jsx)(d.Z,{options:E,selectedField:u,setSelectedField:e=>c(e),children:"Select Column Containing ID"}),(0,l.jsx)(n.Z,{sx:{width:10}}),(0,l.jsx)(d.Z,{options:m,selectedField:g,setSelectedField:e=>S(e),children:"Select ID Type"})]}),u&&(0,l.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[(0,l.jsx)(n.Z,{sx:{width:"65%"},children:(0,l.jsx)(o,{myData:G,setCategory:F,myUsrFilt:N,setMyUsrFilt:O})}),(0,l.jsx)(n.Z,{sx:{width:"30%"},children:M&&(0,l.jsx)(p,{mCat:M,idType:g})})]})]})}},51808:function(e,t,i){var l=i(57437),n=i(2265),a=i(96507),s=i(85269),d=i(70812),r=i(67248);t.Z=e=>{let{options:t,selectedField:i,setSelectedField:u,children:c}=e,o=(e,i)=>{i?u(i):u(t[0])};return(0,l.jsxs)(a.Z,{children:[(0,l.jsx)(s.Z,{variant:"h6",children:c}),(0,l.jsx)(d.Z,{id:"feature-id-field",sx:{width:300,margin:"auto",mt:2},disableListWrap:!0,value:i,onChange:(e,t)=>o(e,t),options:t,renderInput:e=>(0,l.jsx)(r.Z,{...e,label:"Field"}),renderOption:(e,t)=>(0,n.createElement)("li",{...e,key:t.label},t.label),isOptionEqualToValue:(e,t)=>e.id===t.id})]})}}}]);