"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[468],{26398:function(e,t,a){var l=a(26314);t.Z=void 0;var n=l(a(80984)),s=a(57437),i=(0,n.default)((0,s.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");t.Z=i},59637:function(e,t,a){var l=a(26314);t.Z=void 0;var n=l(a(80984)),s=a(57437),i=(0,n.default)((0,s.jsx)("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart");t.Z=i},5301:function(e,t,a){var l=a(20791),n=a(13428),s=a(2265),i=a(57042),o=a(95600),r=a(89975),d=a(81514),c=a(28702),u=a(87927),p=a(35843),m=a(57230),x=a(57437);let h=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],b=e=>{let{classes:t,fullWidth:a,selected:l,disabled:n,size:s,color:i}=e,r={root:["root",l&&"selected",n&&"disabled",a&&"fullWidth",`size${(0,c.Z)(s)}`,i]};return(0,o.Z)(r,m.a,t)},g=(0,p.ZP)(d.Z,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,t[`size${(0,c.Z)(a.size)}`]]}})(({theme:e,ownerState:t})=>{let a,l="standard"===t.color?e.palette.text.primary:e.palette[t.color].main;return e.vars&&(l="standard"===t.color?e.vars.palette.text.primary:e.vars.palette[t.color].main,a="standard"===t.color?e.vars.palette.text.primaryChannel:e.vars.palette[t.color].mainChannel),(0,n.Z)({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${m.Z.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,r.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${m.Z.selected}`]:{color:l,backgroundColor:e.vars?`rgba(${a} / ${e.vars.palette.action.selectedOpacity})`:(0,r.Fq)(l,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${a} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,r.Fq)(l,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${a} / ${e.vars.palette.action.selectedOpacity})`:(0,r.Fq)(l,e.palette.action.selectedOpacity)}}}},"small"===t.size&&{padding:7,fontSize:e.typography.pxToRem(13)},"large"===t.size&&{padding:15,fontSize:e.typography.pxToRem(15)})}),f=s.forwardRef(function(e,t){let a=(0,u.Z)({props:e,name:"MuiToggleButton"}),{children:s,className:o,color:r="standard",disabled:d=!1,disableFocusRipple:c=!1,fullWidth:p=!1,onChange:m,onClick:f,selected:y,size:j="medium",value:Z}=a,v=(0,l.Z)(a,h),C=(0,n.Z)({},a,{color:r,disabled:d,disableFocusRipple:c,fullWidth:p,size:j}),k=b(C);return(0,x.jsx)(g,(0,n.Z)({className:(0,i.Z)(k.root,o),disabled:d,focusRipple:!c,ref:t,onClick:e=>{f&&(f(e,Z),e.defaultPrevented)||!m||m(e,Z)},onChange:m,value:Z,ownerState:C,"aria-pressed":y},v,{children:s}))});t.Z=f},57230:function(e,t,a){a.d(t,{a:function(){return s}});var l=a(26520),n=a(25702);function s(e){return(0,n.Z)("MuiToggleButton",e)}let i=(0,l.Z)("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge"]);t.Z=i},92233:function(e,t,a){a.d(t,{Z:function(){return g}});var l=a(20791),n=a(13428),s=a(2265);a(68185);var i=a(57042),o=a(95600),r=a(35843),d=a(87927),c=a(28702),u=a(70944),p=a(57437);let m=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],x=e=>{let{classes:t,orientation:a,fullWidth:l,disabled:n}=e,s={root:["root","vertical"===a&&"vertical",l&&"fullWidth"],grouped:["grouped",`grouped${(0,c.Z)(a)}`,n&&"disabled"]};return(0,o.Z)(s,u.H,t)},h=(0,r.ZP)("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[{[`& .${u.Z.grouped}`]:t.grouped},{[`& .${u.Z.grouped}`]:t[`grouped${(0,c.Z)(a.orientation)}`]},t.root,"vertical"===a.orientation&&t.vertical,a.fullWidth&&t.fullWidth]}})(({ownerState:e,theme:t})=>(0,n.Z)({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},"vertical"===e.orientation&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${u.Z.grouped}`]:(0,n.Z)({},"horizontal"===e.orientation?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${u.Z.selected} + .${u.Z.grouped}.${u.Z.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${u.Z.selected} + .${u.Z.grouped}.${u.Z.selected}`]:{borderTop:0,marginTop:0}})})),b=s.forwardRef(function(e,t){let a=(0,d.Z)({props:e,name:"MuiToggleButtonGroup"}),{children:o,className:r,color:c="standard",disabled:u=!1,exclusive:b=!1,fullWidth:g=!1,onChange:f,orientation:y="horizontal",size:j="medium",value:Z}=a,v=(0,l.Z)(a,m),C=(0,n.Z)({},a,{disabled:u,fullWidth:g,orientation:y,size:j}),k=x(C),E=(e,t)=>{let a;if(!f)return;let l=Z&&Z.indexOf(t);Z&&l>=0?(a=Z.slice()).splice(l,1):a=Z?Z.concat(t):[t],f(e,a)},S=(e,t)=>{f&&f(e,Z===t?null:t)};return(0,p.jsx)(h,(0,n.Z)({role:"group",className:(0,i.Z)(k.root,r),ref:t,ownerState:C},v,{children:s.Children.map(o,e=>{var t;return s.isValidElement(e)?s.cloneElement(e,{className:(0,i.Z)(k.grouped,e.props.className),onChange:b?S:E,selected:void 0===e.props.selected?(t=e.props.value,void 0!==Z&&void 0!==t&&(Array.isArray(Z)?Z.indexOf(t)>=0:t===Z)):e.props.selected,size:e.props.size||j,fullWidth:g,color:e.props.color||c,disabled:e.props.disabled||u}):null})}))});var g=b},70944:function(e,t,a){a.d(t,{H:function(){return s}});var l=a(26520),n=a(25702);function s(e){return(0,n.Z)("MuiToggleButtonGroup",e)}let i=(0,l.Z)("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical"]);t.Z=i},27130:function(e,t,a){a.r(t),a.d(t,{default:function(){return el}});var l=a(57437),n=a(2265),s=a(41637),i=a(96507),o=a(19636),r=a(54986),d=a(85269),c=a(75745),u=a(11093),p=a(64728),m=a(9140),x=a(70812),h=a(67248),b=a(49600),g=a(26398);let f=["ChEBI","KEGG","HMDB","PubChem"],y={"Mean difference":{text1:"Select metadata variable",text2:"Metadata Variable"},"t-test":{text1:"Select metadata variable",text2:"Metadata Variable"},PCA:{text1:"Select Principal Component",text2:"Principal Component"},MOFA:{text1:"Select MOFA Factor",text2:"MOFA Factor"},Custom:{text1:"Select column with ranking metric",text2:"Ranking Metric Column"}};var j=function(e){let{omic:t,g2info:a,setG2info:o,gidCol:r,setGidCol:j,mParams:Z,setMParams:v,rankCol:C,setRankCol:k,subRankCol:E,setSubRankCol:S,groups:O,setGroups:w,handleRunGSEA:M,ready:R,mMethod:T}=e,A="m"==t,{OMIC2NAME:G,API_URL:I}=(0,u.S)(),{OS:P,jobID:D}=(0,s.tc)(),V=(0,p.a0)(),F=(0,p.mX)(),z=V.GSEA[t],{mdataType:B}=(0,s.tc)(),[_]=(0,c.Z)(t),$=(0,n.useMemo)(()=>_.columns.map(e=>({label:e,id:e})),[_]),[N,q]=(0,n.useState)({}),K=async(e,a)=>{if(null==a)return;o(null),j(a);let l={},n=_.column(a.id);if(!A){if(Object.keys(N).includes(a.id))l=N[a.id];else{n.values.map((e,t)=>{Object.keys(l).includes(e)?l[e].f.push(n.index[t]):l[e]={f:[n.index[t]]}}),console.log("Fetch ENTREZ identifiers");let e=await fetch("https://biit.cs.ut.ee/gprofiler/api/convert/convert/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({organism:P.id,target:"ENTREZGENE_ACC",query:Object.keys(l)})}),t=await e.json(),s=[];t.result.map(e=>{s.includes(e.incoming)||"None"==e.converted||(s.push(e.incoming),l[e.incoming].gn=e.name,l[e.incoming].egn=e.name.toUpperCase(),l[e.incoming].eid=e.converted)}),q(e=>({...e,[a.id]:l}))}}o(l),F({type:"set-g2info",omic:t,g2info:l,gidCol:a})},L=(0,p.a0)().status,W=(0,n.useMemo)(()=>[{label:"Mean difference",disabled:!Object.keys(B).some(e=>"categorical"==B[e].type)},{label:"t-test",disabled:!Object.keys(B).some(e=>"categorical"==B[e].type)},{label:"PCA",disabled:"ok"!=L.EDA_PCA.status},{label:"MOFA",disabled:"ok"!=L.MOFA.status},{label:"Custom",disabled:!_.ctypes.values.some(e=>e.includes("int")||e.includes("float"))}],[L,_,B]),[H,J]=(0,n.useState)(z.rankParams.subRankColOpts),[U,X]=(0,n.useState)(z.rankParams.showSubSection),[Q,Y]=(0,n.useState)(z.rankParams.groupColOpts),ee=async(e,a)=>{if(!a)return;k(a),S(null),Y([]),w({g1:null,g2:null}),X(!1),setTimeout(e=>X(!0),100);let l=[];if("PCA"==a.label){let e=V.EDA.PCA[t].data.explained_variance;if(null==e){let a=await fetch("".concat(I,"/get_eda_pca/").concat(D,"/").concat(t)),{resStatus:l,dataPCA:n}=await a.json();F({type:"set-eda-pca-data",data:n,omic:t}),F({type:"set-eda-pca-status",status:l,omic:t}),e=n.explained_variance}l=Object.keys(e).map(e=>({label:"PCA".concat(e),id:"PCA".concat(e)}))}if("MOFA"==a.label){let e;if(null==V.MOFA.data){let a=await fetch("".concat(I,"/get_mofa/").concat(D)),l=await a.json();F({type:"set-mofa-data",data:l.dataMOFA}),e=l.dataMOFA.explained_variance[t]}else e=V.MOFA.data.explained_variance[t];l=Object.keys(e).map(e=>({label:e,id:e}))}if(["Mean difference","t-test"].includes(a.label)&&(l=Object.keys(B).filter(e=>"categorical"==B[e].type).map(e=>({label:e,id:e}))),"Custom"==a.label){let e=_.ctypes;l=e.index.filter((t,a)=>e.values[a].includes("int")||e.values[a].includes("float")).map(e=>({label:e,id:e}))}J(l),F({type:"handle-rank-col-opts",omic:t,rankParams:{rankCol:a,subRankCol:null,groups:{g1:null,g2:null},subRankColOpts:l,groupColOpts:[],showSubSection:!0}})},[et,ea]=(0,n.useState)(A?z.ionValOpts:[]);return(0,l.jsxs)(i.Z,{sx:{mt:2},children:[(0,l.jsxs)(i.Z,{children:[!A&&(0,l.jsxs)(i.Z,{sx:{textAlign:"center",p:2},children:[(0,l.jsx)(d.Z,{type:"body2",children:"Select column containing ".concat(G[t]," ID")}),(0,l.jsx)(i.Z,{sx:{mt:2,display:"flex",justifyContent:"center"},children:(0,l.jsx)(x.Z,{options:$,sx:{width:300},renderInput:e=>(0,l.jsx)(h.Z,{...e,label:"".concat(G[t]," ID column")}),isOptionEqualToValue:(e,t)=>e.id===t.id,value:r,onChange:K,renderOption:(e,t)=>(0,n.createElement)("li",{...e,key:t.label},t.label)})})]}),A&&(0,l.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-between",textAlign:"center"},children:[(0,l.jsxs)(i.Z,{sx:{width:"49%",p:2},children:[(0,l.jsx)(d.Z,{type:"body2",variant:"h6",children:"MSEA"}),(0,l.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-evenly",flexDirection:"column",mt:2},children:[(0,l.jsxs)(i.Z,{sx:{textAlign:"center"},children:[(0,l.jsx)(d.Z,{type:"body2",children:"Select Metabolite ID"}),(0,l.jsx)(i.Z,{sx:{mt:2,display:"flex",justifyContent:"center"},children:(0,l.jsx)(x.Z,{options:$,sx:{width:250},renderInput:e=>(0,l.jsx)(h.Z,{...e,label:"Metabolite ID"}),isOptionEqualToValue:(e,t)=>e.label===t.label,getOptionDisabled:e=>e.disabled,value:Z.mid,onChange:(e,t)=>{v(e=>({...e,mid:t})),F({type:"set-m-params",attr:"mid",value:t})},renderOption:(e,t)=>(0,n.createElement)("li",{...e,key:t.label},t.label)})})]}),(0,l.jsxs)(i.Z,{sx:{textAlign:"center",mt:4},children:[(0,l.jsx)(d.Z,{type:"body2",children:"Select ID Type"}),(0,l.jsx)(i.Z,{sx:{mt:2,display:"flex",justifyContent:"center"},children:(0,l.jsx)(x.Z,{options:f.map(e=>({id:e,label:e})),sx:{width:250},renderInput:e=>(0,l.jsx)(h.Z,{...e,label:"ID Type"}),isOptionEqualToValue:(e,t)=>e.label===t.label,getOptionDisabled:e=>e.disabled,value:Z.midType,onChange:(e,t)=>{v(e=>({...e,midType:t})),F({type:"set-m-params",attr:"midType",value:t})},renderOption:(e,t)=>(0,n.createElement)("li",{...e,key:t.label},t.label)})})]})]})]}),(0,l.jsx)(i.Z,{sx:{width:0,borderWidth:"1px",borderStyle:"dashed",borderColor:"rgba(0,0,0,0.2)"}}),(0,l.jsxs)(i.Z,{sx:{width:"49%",p:2},children:[(0,l.jsx)(d.Z,{type:"body2",variant:"h6",children:"Mummichog"}),(0,l.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-evenly",mt:2},children:[(0,l.jsxs)(i.Z,{sx:{textAlign:"center"},children:[(0,l.jsx)(d.Z,{type:"body2",children:"Select Apex m/z Column"}),(0,l.jsx)(i.Z,{sx:{mt:2,display:"flex",justifyContent:"center"},children:(0,l.jsx)(x.Z,{options:$,sx:{width:250},renderInput:e=>(0,l.jsx)(h.Z,{...e,label:"Apex m/z"}),isOptionEqualToValue:(e,t)=>e.label===t.label,getOptionDisabled:e=>e.disabled,value:Z.mz,onChange:(e,t)=>{v(e=>({...e,mz:t})),F({type:"set-m-params",attr:"mz",value:t})},renderOption:(e,t)=>(0,n.createElement)("li",{...e,key:t.label},t.label)})})]}),(0,l.jsxs)(i.Z,{sx:{textAlign:"center"},children:[(0,l.jsx)(d.Z,{type:"body2",children:"Select Retention Time Column (min)"}),(0,l.jsx)(i.Z,{sx:{mt:2,display:"flex",justifyContent:"center"},children:(0,l.jsx)(x.Z,{options:$,sx:{width:250},renderInput:e=>(0,l.jsx)(h.Z,{...e,label:"RT column (min)"}),isOptionEqualToValue:(e,t)=>e.label===t.label,getOptionDisabled:e=>e.disabled,value:Z.rt,onChange:(e,t)=>{v(e=>({...e,rt:t})),F({type:"set-m-params",attr:"rt",value:t})},renderOption:(e,t)=>(0,n.createElement)("li",{...e,key:t.label},t.label)})})]})]}),(0,l.jsxs)(i.Z,{children:[(0,l.jsxs)(i.Z,{sx:{textAlign:"center",mt:4},children:[(0,l.jsx)(d.Z,{type:"body2",children:"Select Ion Mode Column"}),(0,l.jsx)(i.Z,{sx:{mt:2,display:"flex",justifyContent:"center"},children:(0,l.jsx)(x.Z,{options:$,sx:{width:250},renderInput:e=>(0,l.jsx)(h.Z,{...e,label:"Ion Mode Column"}),isOptionEqualToValue:(e,t)=>e.label===t.label,getOptionDisabled:e=>e.disabled,value:Z.ionCol,onChange:(e,t)=>{if(v(e=>({...e,ionCol:t})),F({type:"set-m-params",attr:"ionCol",value:t}),v(e=>({...e,ionVal:{pos:null,neg:null}})),F({type:"set-m-params",attr:"ionVal",value:{pos:null,neg:null}}),!t)return;let a=[...new Set(_.column(t.id).values)].map(e=>({label:e,id:e})).slice(0,10);ea(a),F({type:"set-ion-val-opts",ionValOpts:a})},renderOption:(e,t)=>(0,n.createElement)("li",{...e,key:t.label},t.label)})})]}),(0,l.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"center",mt:4},children:[(0,l.jsxs)(i.Z,{sx:{textAlign:"center"},children:[(0,l.jsx)(d.Z,{type:"body2",children:"Positive Ion Value"}),(0,l.jsx)(i.Z,{sx:{mt:2,display:"flex",justifyContent:"center"},children:(0,l.jsx)(x.Z,{options:et,sx:{width:150},renderInput:e=>(0,l.jsx)(h.Z,{...e,label:"Positive Ion"}),isOptionEqualToValue:(e,t)=>e.label===t.label,getOptionDisabled:e=>e.disabled,value:Z.ionVal.pos,onChange:(e,t)=>{v(e=>({...e,ionVal:{...e.ionVal,pos:t}})),F({type:"set-ion-val",mode:"pos",value:t})},renderOption:(e,t)=>(0,n.createElement)("li",{...e,key:t.label},t.label)})})]}),(0,l.jsx)(i.Z,{sx:{width:"5%"}}),(0,l.jsxs)(i.Z,{sx:{textAlign:"center"},children:[(0,l.jsx)(d.Z,{type:"body2",children:"Negative Ion Value"}),(0,l.jsx)(i.Z,{sx:{mt:2,display:"flex",justifyContent:"center"},children:(0,l.jsx)(x.Z,{options:et,sx:{width:150},renderInput:e=>(0,l.jsx)(h.Z,{...e,label:"Negative Ion"}),isOptionEqualToValue:(e,t)=>e.label===t.label,getOptionDisabled:e=>e.disabled,value:Z.ionVal.neg,onChange:(e,t)=>{v(e=>({...e,ionVal:{...e.ionVal,neg:t}})),F({type:"set-ion-val",mode:"neg",value:t})},renderOption:(e,t)=>(0,n.createElement)("li",{...e,key:t.label},t.label)})})]})]})]})]})]})]}),(0,l.jsx)(i.Z,{sx:{height:0,borderWidth:"1px",borderStyle:"dashed",borderColor:"rgba(0,0,0,0.2)"}}),(0,l.jsxs)(i.Z,{children:[(0,l.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"center",textAlign:"center",mt:3},children:[(0,l.jsxs)(i.Z,{sx:{width:"30%"},children:[(0,l.jsxs)(d.Z,{type:"body2",children:["Select ",A?"Enrichment":"GSEA"," Ranking Metric"]}),(0,l.jsx)(i.Z,{sx:{mt:2,display:"flex",justifyContent:"center"},children:(0,l.jsx)(x.Z,{options:W,sx:{width:300},renderInput:e=>(0,l.jsx)(h.Z,{...e,label:"GSEA Ranking Metric"}),isOptionEqualToValue:(e,t)=>e.label===t.label,getOptionDisabled:e=>e.disabled,value:C,onChange:ee,renderOption:(e,t)=>(0,n.createElement)("li",{...e,key:t.label},t.label)})})]}),(0,l.jsxs)(i.Z,{sx:{width:"30%"},children:[(0,l.jsx)(d.Z,{type:"body2",children:U?y[C.label].text1:"-"}),(0,l.jsx)(i.Z,{sx:{mt:2,display:"flex",justifyContent:"center"},children:(0,l.jsx)(x.Z,{options:H,sx:{width:300},renderInput:e=>(0,l.jsx)(h.Z,{...e,label:U?y[C.label].text2:""}),disabled:!U,isOptionEqualToValue:(e,t)=>e.label===t.label,value:E,onChange:(e,a)=>{if(null!=a&&(S(a),F({type:"set-sub-rank-col",subRankCol:a,omic:t}),["Mean difference","t-test"].includes(C.label))){w({g1:null,g2:null});let e=B[a.id].levels.map(e=>({label:e,id:e}));Y(e),F({type:"set-group-col-opts",groupColOpts:e,omic:t})}},renderOption:(e,t)=>(0,n.createElement)("li",{...e,key:t.label},t.label)})})]})]}),U&&["Mean difference","t-test"].includes(C.label)&&(0,l.jsx)(m.Z,{children:(0,l.jsx)(i.Z,{sx:{display:"flex",justifyContent:"space-evenly",textAlign:"center",mt:5},children:["Mean difference","t-test"].includes(C.label)&&(0,l.jsxs)(i.Z,{sx:{display:"flex"},children:[(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(d.Z,{type:"body2",children:"Select 1st group"}),(0,l.jsx)(i.Z,{sx:{mt:2,display:"flex",justifyContent:"center"},children:(0,l.jsx)(x.Z,{options:Q,sx:{width:200},renderInput:e=>(0,l.jsx)(h.Z,{...e,label:"1st Group"}),isOptionEqualToValue:(e,t)=>e.label===t.label,value:O.g1,onChange:(e,a)=>{w(e=>({...e,g1:a})),F({type:"set-group",g:"g1",value:a,omic:t})},renderOption:(e,t)=>(0,n.createElement)("li",{...e,key:t.label},t.label)})})]}),(0,l.jsx)(i.Z,{sx:{width:"20%",mx:2,display:"flex",alignItems:"flex-end"},children:(0,l.jsx)(d.Z,{type:"body1",sx:{py:2},children:"vs"})}),(0,l.jsxs)(i.Z,{sx:{},children:[(0,l.jsx)(d.Z,{type:"body2",children:"Select 2nd group"}),(0,l.jsx)(i.Z,{sx:{mt:2,display:"flex",justifyContent:"center"},children:(0,l.jsx)(x.Z,{options:Q,sx:{width:200},renderInput:e=>(0,l.jsx)(h.Z,{...e,label:"2nd Group"}),isOptionEqualToValue:(e,t)=>e.label===t.label,value:O.g2,onChange:(e,a)=>{w(e=>({...e,g2:a})),F({type:"set-group",g:"g2",value:a,omic:t})},renderOption:(e,t)=>(0,n.createElement)("li",{...e,key:t.label},t.label)})})]})]})})}),(0,l.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",mt:5},children:(0,l.jsx)(b.Z,{variant:"outlined",color:"primary",endIcon:(0,l.jsx)(g.Z,{}),disabled:!(R&&C&&E&&(!["Mean difference","t-test"].includes(C.label)||O.g1&&O.g2)&&(!A||T.msea||T.mummichog)&&(A||r&&a)),onClick:M,children:"Run QEA"})})]})]})},Z=a(10537),v=a(47042);let C=e=>{let{selDb:t,setDb:a,dbid:s,status:o,label:r,setShowEnrichment:d}=e,c=t==s,[u,p]=(0,n.useState)(!1),m="#00000015",x="#000000aa";return c?(m="#006633ff",x="#ffffff"):"ok"!=o?(m="#00000033",x="#000000aa"):u&&(m="#00000033",x="#000000aa"),(0,l.jsx)(i.Z,{sx:{px:1,py:.5,mx:.5,fontSize:"1em",color:x,backgroundColor:m,userSelect:"none",cursor:"ok"==o?"pointer":"no-drop",transition:"ease 1s"},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),onClick:()=>{"ok"==o&&(d(!1),setTimeout(()=>d(!0),500),a(e=>e.map(e=>e.db==s?{...e,show:!0}:{...e,show:!1})))},children:(0,l.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"space-evenly",alignItems:"center"},children:["waiting"==o&&(0,l.jsx)(i.Z,{sx:{mr:1,display:"flex",alignItems:"center"},children:(0,l.jsx)(v.Z,{disableShrink:!0,size:15})}),(0,l.jsx)(i.Z,{children:r})]})})};var k=e=>{let{db:t,selDb:a,setDb:n,setShowEnrichment:s}=e;return(0,l.jsx)(i.Z,{sx:{display:"flex"},children:t.map(e=>(0,l.jsx)(C,{selDb:a,setDb:n,dbid:e.db,status:e.status,label:e.label,setShowEnrichment:s},e.db))})};let E=(e,t)=>{let a=e.length,l=t.length,n=a-1,s=l-1,i=e.reduce((e,t)=>e+t)/a,o=t.reduce((e,t)=>e+t)/l,r=e.map(e=>e-i^2).reduce((e,t)=>e+t)/n,d=t.map(e=>e-o^2).reduce((e,t)=>e+t)/s,c=(i-o)/Math.sqrt((r*n+d*s)/(n+s)*(1/a+1/l));return c},S=e=>{e=[...e].sort((e,t)=>e-t);let t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2},O=(e,t)=>{let a=e.reduce((e,t)=>e+t)/e.length,l=t.reduce((e,t)=>e+t)/t.length;return a-l};var w=a(86056),M=a(98864),R=a.n(M),T=a(22079),A=a(93202),G=a(59637),I=a(33457),P=a(38592),D=a(92069);a(16691);var V=a(35048),F=a(38227),z=a(24235),B=a(50039),_=a(16573),$=a(19223),N=a(27978),q=a(90045),K=a(51125),L=a(30188);let W=e=>{let{ES:t,setBool:a,deltaZ:n,score:s,pvalue:o}=e;t.length;let r=t.map((e,t)=>({ES:e,index:t})),c=n.map((e,t)=>({deltaZ:e,index:t}));return(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",my:0},children:(0,l.jsxs)(d.Z,{children:["Enrichment Score = ",Math.round(1e3*s)/1e3]})}),(0,l.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",my:1},children:(0,l.jsxs)(d.Z,{children:["Empirical p-value ","≤"," ",o]})}),(0,l.jsx)(i.Z,{children:(0,l.jsx)(V.h,{width:"100%",height:250,children:(0,l.jsxs)(F.w,{data:r,margin:{top:5,right:20,left:10,bottom:0},children:[(0,l.jsx)(z.K,{dataKey:"index",tick:!1}),(0,l.jsx)(B.B,{label:{value:"ES",angle:-90,position:"insideLeft"}}),(0,l.jsx)(_.q,{stroke:"#ccc",strokeDasharray:"3 3"}),(0,l.jsx)($.x,{type:"monotone",dataKey:"ES",stroke:"grey",strokeWidth:1,dot:!1})]})})}),(0,l.jsx)(i.Z,{sx:{position:"relative",top:-28,border:"0px solid red"},children:(0,l.jsx)(V.h,{width:"100%",height:80,children:(0,l.jsxs)(F.w,{margin:{top:0,right:20,left:10,bottom:0},children:[(0,l.jsx)(_.q,{strokeDasharray:"3 3"}),(0,l.jsx)(z.K,{dataKey:"name",domain:(0,L.Z)(0,a.length,1),tick:!1}),(0,l.jsx)(B.B,{}),a.map((e,t)=>e&&(0,l.jsx)(N.d,{x:t,strokeWidth:.5,stroke:"grey"},t))]})})}),(0,l.jsx)(i.Z,{sx:{position:"relative",top:-58,border:"0px solid red"},children:(0,l.jsx)(V.h,{width:"100%",height:120,children:(0,l.jsxs)(q.T,{data:c,margin:{top:0,right:20,left:10,bottom:0},children:[(0,l.jsx)(z.K,{dataKey:"index",tick:!1}),(0,l.jsx)(B.B,{label:{value:"ΔZ",angle:-90,position:"insideLeft"}}),(0,l.jsx)(_.q,{stroke:"#ccc",strokeDasharray:"3 3"}),(0,l.jsx)(K.u,{type:"monotone",dataKey:"deltaZ",stroke:"grey",fill:"grey"})]})})})]})},H=(e,t)=>{var a,l;let n=e.map(e=>[...e,t.includes(e[0])]);(n=n.map(e=>[e[0],e[1],e[2],e[2]?Math.abs(e[1]):0,e[2]?0:1])).sort((e,t)=>t[1]-e[1]);let s=n.map(e=>e[3]).reduce((e,t)=>e+t),i=n.map(e=>e[4]).reduce((e,t)=>e+t),o=n.map((a=0,e=>a+=e[3]/s)),r=n.map((l=0,e=>l+=e[4]/i)),d=o.map((e,t)=>e-r[t]),c=n.map(e=>e[2]),u=n.map(e=>e[1]);return{ES:d,setBool:c,deltaZ:u,score:Math.abs(Math.max(...d))>Math.abs(Math.min(...d))?Math.max(...d):Math.min(...d)}};var J=function(e){let{f2MeanL:t,fSet:a}=e;(0,u.S)().BASE_URL;let[s,o]=(0,n.useState)(!1),r=(0,n.useMemo)(()=>Object.keys(t).map(e=>[e,t[e]]),[t]),{ES:c,setBool:p,deltaZ:m,score:x}=(0,n.useMemo)(()=>H(r,a),[r,a]),[h,b]=(0,n.useState)(null),g=(0,n.useCallback)(async()=>{let e=await new Promise(e=>{isNaN(x)&&e(1);let l=[];for(let e=0;e<100;e++){let e=function(e,t){let a=[],l=[...e];t=Math.min(t,e.length);for(let e=0;e<t;e++){let e=Math.floor(Math.random()*l.length),t=l.splice(e,1)[0];a.push(t)}return a}(Object.keys(t),a.length),n=H(r,e).score;l.push(n)}let n=l.filter(e=>Math.abs(e)>Math.abs(x)).length/100;e(n=0==n?.01:n)});b(e)},[x,100,t,a,r]);return(0,n.useEffect)(()=>{g()},[g]),(0,l.jsxs)(i.Z,{sx:{mt:0,height:540},children:[(0,l.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,l.jsx)(i.Z,{sx:{mr:2},children:(0,l.jsx)(d.Z,{variant:"h5",children:"Set Enrichment Analysis"})})}),(0,l.jsx)(i.Z,{sx:{mt:3,opacity:s?0:1,transition:"all ease 1s"},children:(0,l.jsx)(W,{ES:c,setBool:p,deltaZ:m,score:x,pvalue:h})})]})};let U=e=>{let{table:t,myData:a,setPlotGseaFn:n}=e,s=(e,t)=>{let a=e.getFilteredRowModel().rows.map(e=>e.original);console.log(a),console.log(t);let l=Object.keys(t[0])[0],n=a.map(e=>e[l]),s=t.map(e=>({...e,CustomSet:n.includes(e[l])})),i=(0,D.iL)({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0,filename:"Enrichment_Table"}),o=(0,D.gB)(i)(s).replace(/,null/g,",").replace(/^null,/g,",");(0,D.LR)(i)(o)};return(0,l.jsxs)(i.Z,{sx:{display:"flex",gap:"16px",padding:"8px",flexWrap:"wrap"},children:[(0,l.jsx)(i.Z,{children:(0,l.jsx)(P.UN,{table:t})}),(0,l.jsx)(b.Z,{onClick:()=>s(t,a),startIcon:(0,l.jsx)(A.Z,{}),children:"Export Table"}),(0,l.jsx)(b.Z,{disabled:t.getFilteredRowModel().rows.length===a.length,onClick:()=>n(),startIcon:(0,l.jsx)(G.Z,{}),children:"Plot GSEA"})]})};var X=function(e){let{gseaData:t,omic:a}=e,s=(0,n.useMemo)(()=>{let e={};return Object.keys(t).map(a=>{t[a].f.map(l=>{e[l]=t[a].rank})}),e},[t]),[o]=(0,c.Z)(a),[r,d]=(0,n.useMemo)(()=>{let e=(0,Z.$i)(o),t=Object.keys(e).map(t=>{let a={...e[t],rank:Number.parseFloat(Number.parseFloat(s[t]).toExponential(5))};return a}),a={};return t.map(e=>a[e[o.columns[0]]]=e.rank),[t,a]},[o,s]),u=(0,n.useMemo)(()=>{let e=(e,t,a)=>{let l;try{l=new RegExp(a)}catch(e){return!0}return l.test(e.getValue(t))};return[...o.columns.map((t,a)=>({header:t,accessorKey:t,muiTableHeadCellProps:{align:"left"},muiTableBodyCellProps:{align:"left"},filterFn:"string"==o.ctypes.values[a]?e:"equals",columnFilterModeOptions:"string"==o.ctypes.values[a]?[]:null,..."string"==o.ctypes.values[a]?{muiFilterTextFieldProps:{placeholder:"Regex"}}:{}})),{header:"Ranking Metric",accessorKey:"rank",muiTableHeadCellProps:{align:"left"},muiTableBodyCellProps:{align:"center"},filterFn:"greaterThan"}]},[o]),[p,m]=(0,n.useState)(!1),x=(0,n.useCallback)(()=>m(!0),[]),h=(0,I.X0)({columns:u,data:r,layoutMode:"grid",enableColumnResizing:!0,enableColumnActions:!1,enableSelectAll:!1,enableColumnFilterModes:!0,enableColumnFilters:!0,enableColumnOrdering:!0,enableColumnDragging:!1,enableGrouping:!0,enableColumnPinning:!0,enableFacetedValues:!0,enableRowActions:!1,enableRowSelection:!1,enableDensityToggle:!1,enableFullScreenToggle:!0,enableGlobalFilter:!1,enableFilterMatchHighlighting:!1,muiTableContainerProps:{sx:{maxHeight:"500px"}},initialState:{density:"compact",showColumnFilters:!0,showGlobalFilter:!1,sorting:[{id:"rank",desc:!0}]},paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiPaginationProps:{rowsPerPageOptions:[10],shape:"rounded",variant:"outlined"},renderTopToolbar:e=>{let{table:t}=e;return(0,l.jsx)(U,{table:t,myData:r,setPlotGseaFn:x})}}),b=h.getFilteredRowModel().rows.map(e=>e.original[o.columns[0]]);return(0,l.jsxs)(i.Z,{sx:{px:5,pb:3,mt:2},children:[(0,l.jsx)(I.P2,{table:h}),(0,l.jsx)(T.Z,{onClose:()=>m(!1),open:p,maxWidth:"md",fullWidth:!0,children:(0,l.jsx)(i.Z,{sx:{p:4},children:(0,l.jsx)(J,{f2MeanL:d,fSet:b})})})]})};let Q=R()(()=>a.e(112).then(a.bind(a,41112)),{loadableGenerated:{webpack:()=>[41112]}}),Y=e=>{let t=Object.keys(e).map(t=>({GeneName:e[t].egn,EntrezGene:e[t].eid,RankStat:e[t].rank}));t=t.filter(e=>e.GeneName&&e.EntrezGene&&e.RankStat);let a=[];return t.filter(e=>{let t=!0;return a.includes(e.egn)?t=!1:a.push(e.egn),t}),t},ee=(e,t,a,l,n)=>{let s=structuredClone(e),i=Object.keys(s).map(e=>Math.abs(s[e].rank));i.sort(function(e,t){return t-e});let o=i[Math.ceil(.1*i.length)];Object.keys(s).map(e=>{s[e].id=e,s[e].rt=t[e][a.id],s[e].mode=t[e][l.id],s[e].pv=s[e].rank<-o||s[e].rank>o?0:1});let r={};Object.keys(n).map(e=>{n[e]&&(r[e]=Object.keys(s).map(e=>s[e]).filter(t=>t.mode==n[e].id))});let d={};return Object.keys(n).map(e=>{n[e]&&(d[e]="m/z	retention_time	p-value	t-score	custom_id\n",r[e].map(t=>{d[e]+="".concat(t.mz,"	").concat(t.rt,"	").concat(t.pv,"	").concat(t.rank,"	").concat(t.id,"\n")}))}),d},et=e=>{let t={KEGG:[],ChEBI:[]},a={KEGG:Object.keys(e).map(t=>({ID:e[t].KEGG,RankStat:e[t].rank})).filter(e=>{let a=!1;return e.ID&&!t.KEGG.includes(e.ID)&&(a=!0,t.KEGG.push(e.ID)),a}),ChEBI:Object.keys(e).map(t=>({ID:e[t].ChEBI,RankStat:e[t].rank})).filter(e=>{let a=!1;return e.ID&&!t.ChEBI.includes(e.ID)&&(a=!0,t.ChEBI.push(e.ID)),a})};return a};var ea=function(e){let{omic:t}=e,o="m"==t,{API_URL:x}=(0,u.S)(),{OS:h}=(0,s.tc)(),{jobID:b}=(0,s.tc)(),g=(0,p.a0)(),f=(0,p.mX)(),y=g.GSEA[t],[v]=(0,c.Z)(t),[C,M]=(0,n.useState)(y.g2info),R=(0,s.tc)().norm["x".concat(t)],{mdataType:T}=(0,s.tc)(),[A,G]=(0,n.useState)(o?null:y.gidCol),[I,P]=(0,n.useState)(y.mParams),D=(0,n.useMemo)(()=>({msea:o&&!!I.mid&&!!I.midType,mummichog:o&&!!I.mz&&!!I.rt&&!!I.ionCol&&(!!I.ionVal.pos||!!I.ionVal.neg)}),[o,I]),[V,F]=(0,n.useState)(y.rankParams.rankCol),[z,B]=(0,n.useState)(y.rankParams.subRankCol),[_,$]=(0,n.useState)(y.rankParams.groups),[N,q]=(0,n.useState)(y.db),K=(0,n.useCallback)(()=>{let e="".concat(h.scientific_name.replace(" ","_"),"-").concat(V.label,"-").concat(z.id);return e+=["Mean difference","t-test"].includes(V.label)?"".concat(_.g1.id,"vs").concat(_.g2.id):"",o||(e+="-".concat(A.id)),D.msea&&(e+="-".concat(I.mid.id,"-").concat(I.midType.id)),D.mummichog&&(e+="-".concat(I.mz.id,"-").concat(I.rt.id)+(I.ionVal.pos.id?"_"+I.ionVal.pos.id:"")+(I.ionVal.neg.id?"_"+I.ionVal.neg.id:"")),e=e.replace(/[^a-zA-Z0-9]/g,"_")},[A,V,z,_,h,o,I,D]),[L,W]=(0,n.useState)(y.guiParams.gseaID),[H,J]=(0,n.useState)([]),[U,ea]=(0,n.useState)(y.gseaData),[el,en]=(0,n.useState)(y.guiParams.showGsea),[es,ei]=(0,n.useState)(y.guiParams.titleGsea),eo=(0,n.useCallback)(()=>{console.log("Run GSEA");let e={};if(o){if(v.index.map(t=>e[t]={f:[t]}),D.msea){let t=a(91794),l=v.column(I.mid.id);l.index.map((a,n)=>{let s=l.values[n],i=t[I.midType.id].indexOf(s);e[a].mid=s,e[a].KEGG=t.KEGG[i],e[a].ChEBI=t.ChEBI[i]})}if(D.mummichog){let t=v.column(I.mz.id);t.index.map((a,l)=>e[a].mz=t.values[l])}}else Object.keys(C).map(t=>e[t]={...C[t]});if("PCA"==V.label){let a=g.EDA.PCA[t].data.loadings,l=z.id.replace(/PCA/,"");Object.keys(e).map(t=>{e[t].fRank=e[t].f.map(e=>a[e][l])})}if("MOFA"==V.label){let a=g.MOFA.data.loadings[t][z.id];Object.keys(e).map(t=>{e[t].fRank=e[t].f.map(e=>a[e])})}if(["Mean difference","t-test"].includes(V.label)){let t=(0,Z.$i)(R),a=T[z.id].level2id[_.g1.id].filter(e=>R.index.includes(e)),l=T[z.id].level2id[_.g2.id].filter(e=>R.index.includes(e));Object.keys(e).map(n=>{e[n].fRank=e[n].f.map(e=>{let n=a.map(a=>t[a][e]),s=l.map(a=>t[a][e]);return"Mean difference"==V.label?O(n,s):"t-test"==V.label?E(n,s):void 0})})}if("Custom"==V.label){let t=(0,Z.$i)(v);Object.keys(e).map(a=>{e[a].fRank=e[a].f.map(e=>t[e][z.id])})}Object.keys(e).map(t=>{e[t].rank=S(e[t].fRank)}),ea(e),f({type:"set-gsea-data",gseaData:e,omic:t});let l=K();W(l),J([{id:l}]);let n="Enrichment Analysis: ".concat(V.label," | ").concat(z.label,"\n            ").concat(["Mean difference","t-test"].includes(V.label)?" | "+_.g1.label+" vs "+_.g2.label:"");ei(n),en(!1),o?q(e=>e.map(e=>"Custom"==e.db?e:["KEGG","ChEBI"].includes(e.db)?D.msea?{...e,status:"waiting"}:{...e,status:""}:["pos","neg"].includes(e.db)?D.mummichog?{...e,status:"waiting"}:{...e,status:""}:void 0)):q(e=>e.map(e=>"Custom"==e.db?e:{...e,status:"waiting"})),q(e=>e.map(e=>({...e,show:"Custom"==e.db}))),setTimeout(()=>en(!0),500),f({type:"set-run-gsea",omic:t,guiParams:{gseaID:l,title:n,showGsea:!0}}),console.log("Executed")},[C,V,z,_,v,K,o,T,D,t,g,R,I,f]),[er,ed]=(0,n.useState)("ready"),ec=(0,n.useRef)(),eu=(0,n.useCallback)(async e=>{console.log("fetchResults: Getting GSEA results for ",e);let a=await fetch("".concat(x,"/get_gsea/").concat(b,"/").concat(t,"/").concat(L,"/").concat(e)),l=await a.json();if("waiting"!=l.status){let a=null;if("ok"==l.status){if(o&&["pos","neg"].includes(e)){let e;[a,e]=await (0,w.$)(l.gseaRes,"	",!1);let[t,n]=await (0,w.$)(l.usrInput2EC,"	",!1);a=a.map(e=>{if(!e["overlap_EmpiricalCompounds (id)"])return{...e,overlap_fid:""};{let a=e["overlap_EmpiricalCompounds (id)"].split(","),l=[...new Set(t.filter(e=>a.includes(e.EID)).map(e=>e.CompoundID_from_user))];return{...e,overlap_fid:l.join(",")}}})}else a=l.gseaRes}q(t=>t.map(t=>t.db==e?{...t,status:l.status,gseaID:L,gseaRes:a}:t)),f({type:"set-db",db:e,status:l.status,gseaID:L,gseaRes:a,omic:t}),clearInterval(ec.current[e]),console.log("GSEA results were got for ",e)}},[b,t,L,x,ec,o,f]),ep=(0,n.useCallback)(async()=>{let e;console.log("Start fetchRunGsea"),ed("sendJob");let a=h.scientific_name.replace(" ","_");if(o){if(D.msea){let l=et(U);e=await fetch("".concat(x,"/run_msea/").concat(b,"/").concat(t,"/").concat(L,"/").concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});let n=await e.json();console.log("GSEA data (msea) was sent: ",n)}if(D.mummichog){let l=ee(U,(0,Z.$i)(v),I.rt,I.ionCol,I.ionVal);e=await fetch("".concat(x,"/run_mummichog/").concat(b,"/").concat(t,"/").concat(L,"/").concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});let n=await e.json();console.log("GSEA data (mummichog) was sent: ",n)}}else{let l=Y(U);e=await fetch("".concat(x,"/run_gsea/").concat(b,"/").concat(t,"/").concat(L,"/").concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});let n=await e.json();console.log("GSEA data was sent: ",n)}console.log("fetchRunGsea will set a fetchResults interval to get GSEA results"),ec.current={},o?(D.msea&&(ec.current.KEGG=setInterval(()=>eu("KEGG"),5e3),ec.current.ChEBI=setInterval(()=>eu("ChEBI"),5e3)),D.mummichog&&Object.keys(I.ionVal).map(e=>{I.ionVal[e]&&(ec.current[e]=setInterval(()=>eu(e),5e3))}),console.log("Get for metabolomics")):N.filter(e=>"Custom"!=e.db).map(e=>{ec.current[e.db]=setInterval(()=>eu(e.db),5e3)})},[h,x,b,L,U,eu,ec,N,o,t,v,I,D]);(0,n.useEffect)(()=>{if(console.log("Launcher useEffect - is ready? - ",er,H),1!=H.length||"ready"!=er)return;console.log("Launcher useEffect calls fetchRunGsea");let e=setTimeout(ep,500);return()=>clearTimeout(e)},[H,ep,er]),(0,n.useEffect)(()=>{console.log("Ending useEffect - did finished?",er,N),N.every(e=>"waiting"!=e.status)&&"sendJob"==er&&(console.log("useEffect will handle GSEA finish"),J(e=>e.slice(1)),ed("ready"))},[H,N,er]);let[em,ex]=(0,n.useState)(!0),eh=N.filter(e=>e.show)[0].db;return(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(j,{omic:t,g2info:C,setG2info:M,gidCol:A,setGidCol:G,mParams:I,setMParams:P,mMethod:D,rankCol:V,setRankCol:F,subRankCol:z,setSubRankCol:B,groups:_,setGroups:$,handleRunGSEA:eo,ready:0==H.length}),el&&(0,l.jsxs)(m.Z,{children:[(0,l.jsx)(r.Z,{sx:{my:4},children:(0,l.jsx)(d.Z,{variant:"body2",children:es})}),(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,l.jsx)(k,{db:N,selDb:eh,setDb:q,setShowEnrichment:ex})}),(0,l.jsx)(i.Z,{sx:{height:620},children:em&&(0,l.jsx)(m.Z,{children:"Custom"==eh?(0,l.jsx)(X,{gseaData:U,omic:t}):(0,l.jsx)(Q,{gseaRes:N.filter(e=>e.db==eh)[0].gseaRes,omic:t,db:eh})})})]})]})]})},el=function(){let{omics:e}=(0,s.tc)(),[t,a]=(0,n.useState)(e[0]),r=(0,n.useRef)();return(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(o.Z,{selOmic:t,setSelOmic:a,omicViewRef:r}),(0,l.jsx)(i.Z,{ref:r,sx:{overflow:"hidden"},children:(0,l.jsx)(i.Z,{sx:{display:"flex",width:"".concat(e.length,"00%")},children:e.map(a=>(0,l.jsx)(i.Z,{sx:{width:"".concat(100/e.length,"%"),opacity:a==t?1:0,transition:"all 1s ease"},children:(0,l.jsx)(ea,{omic:a})},a))})})]})}}}]);