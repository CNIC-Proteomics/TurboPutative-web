"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[475],{50294:function(e,t,l){l.d(t,{$S:function(){return c},AT:function(){return r}});var i=l(57437),s=l(64728),n=l(96507),a=l(2265),o=l(80149);function r(e){let{options:t,handleSelect:l,label:r}=e,c=(0,s.a0)().EDA.DD.groupby,[d,u]=(0,a.useState)(c);return(0,i.jsxs)(n.Z,{children:[(0,i.jsx)("label",{id:"aria-label",htmlFor:"aria-example-input",children:r}),(0,i.jsx)(o.ZP,{"aria-labelledby":"aria-label",inputId:"aria-example-input",className:"basic-single",classNamePrefix:"select",placeholder:"",isSearchable:!0,isClearable:!1,options:t,value:d,onChange:e=>{u({label:e.value,value:e.value}),setTimeout(()=>l(e),100)}})]})}function c(e){let{options:t,value:l,onChange:s,label:a}=e;return(0,i.jsxs)(n.Z,{children:[(0,i.jsx)("label",{id:"aria-label",htmlFor:"aria-example-input",children:a}),(0,i.jsx)(o.ZP,{"aria-labelledby":"aria-label",inputId:"aria-example-input",className:"basic-single",classNamePrefix:"select",placeholder:"",isSearchable:!0,isClearable:!1,options:t,value:l,onChange:s})]})}},19636:function(e,t,l){l.d(t,{Z:function(){return r}});var i=l(57437),s=l(11093),n=l(41637),a=l(96507),o=l(2265);function r(e){let{selOmic:t,setSelOmic:l,omicViewRef:o}=e,{omics:r}=(0,n.tc)(),{OMIC2NAME:d}=(0,s.S)();return(0,i.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",mt:1},children:r.map((e,s)=>(0,i.jsx)(c,{selOmic:t,id:e,title:d[e],setSelOmic:l,omicViewRef:o},e))})}let c=e=>{let{selOmic:t,id:l,title:s,setSelOmic:r,omicViewRef:c}=e,{omics:d}=(0,n.tc)(),[u,h]=(0,o.useState)(!1),x=l==t,p="#00000015",m="#000000aa";return x?(p="#1976D2ff",m="#ffffff"):u&&(p="#00000033",m="#000000aa"),(0,i.jsx)(a.Z,{sx:{px:3,py:1,mx:.1,fontSize:"1.1em",color:m,backgroundColor:p,userSelect:"none",cursor:"pointer",transition:"ease 1s"},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),onClick:()=>{let e=d.indexOf(l)-d.indexOf(t);setTimeout(()=>{c.current.scrollLeft=c.current.scrollLeft+e*c.current.clientWidth},100),r(l)},children:s})}},93097:function(e,t,l){let{default:i}=l(31863),s=async(e,t,l)=>{let s=e.container.firstChild.cloneNode(!0),n=t.firstChild.firstChild.firstChild,a=n.children[0].cloneNode(!0),o=n.children[2].cloneNode(!0),r=window.document.createElement("div");r.style.position="relative";let c=window.document.createElement("div");c.appendChild(s),c.style.paddingLeft="20px";let d=window.document.createElement("div");d.appendChild(a);let u=window.document.createElement("div");u.style.position="absolute",u.style.top="230px",u.appendChild(o),r.appendChild(c),r.appendChild(d),r.appendChild(u);let h=window.document.createElement("div");h.appendChild(c),console.log(h);let x=window.document.createElement("div");x.appendChild(d),i(h,"DensityPlot_".concat(l)),i(x,"BoxPlot_".concat(l))};e.exports=s},15632:function(e,t,l){function i(e,t){let l=Math.min(...e),i=(Math.max(...e)-l)/t,s=Array(t).fill(0);e.forEach(e=>{let n=Math.floor((e-l)/i);n>=0&&n<t&&s[n]++});let n=s.map(t=>t/(e.length*i)),a=Array(t).fill(0).map((e,t)=>l+(t+.5)*i),o=[];for(let e=0;e<t;e++)o.push({binCenter:a[e],density:n[e]});return o}function s(e,t){let l=e.slice().sort((e,t)=>e-t),i=Math.floor(l.length*t),s=l[i];return s}function n(e,t,l){let i=(t-e)/(l-1),s=[];for(let t=0;t<l;t++){let l=e+t*i;s.push(l)}return s.filter(e=>e<0).length>0&&s.filter(e=>e>0).length>0&&s.push(0),s.sort((e,t)=>e-t),s=s.map(e=>e<=0?Math.floor(100*e)/100:e>0?Math.ceil(100*e)/100:void 0)}l.d(t,{jI:function(){return n},vi:function(){return s},wH:function(){return i}})},42475:function(e,t,l){l.r(t),l.d(t,{default:function(){return ec}});var i=l(57437),s=l(2265),n=l(63916),a=l(55303),o=l(85269),r=l(96507),c=l(41637),d=l(38939),u=l(50294),h=l(64728),x=l(11093),p=l(49600),m=l(46776),f=l(47042),b=l(22079),g=l(91797),j=l(52151),y=l(78063),v=l(91928),Z=l(52481),w=l(33533),C=l(43795),A=l(93097),S=l.n(A),k=l(15632),D=l(90045),T=l(16573),E=l(24235),F=l(50039),M=l(2047),N=l(51125),P=l(90053);function O(e){let{dataHist:t,gValues:l,xrange:s,yrange:n,xTicks:a,figRef:o,omic:r}=e;return(0,i.jsxs)(D.T,{ref:e=>{o.current[r].Hist=e},style:{margin:"auto"},width:500,height:210,data:t,margin:{top:10,right:30,left:0,bottom:0},children:[(0,i.jsx)(T.q,{strokeDasharray:"3 3"}),(0,i.jsx)(E.K,{dataKey:"binCenter",type:"number",ticks:a,domain:s}),(0,i.jsx)(F.B,{domain:n}),(0,i.jsx)(M.u,{}),l.map((e,t)=>(0,i.jsx)(N.u,{connectNulls:!0,type:"monotone",dataKey:e,fillOpacity:.3,stroke:P.s[t%P.s.length],fill:P.s[t%P.s.length]},e))]})}var z=l(98864),I=l.n(z);let R=I()(()=>Promise.all([l.e(934),l.e(901)]).then(l.bind(l,87022)),{loadableGenerated:{webpack:()=>[87022]},ssr:!1});function B(e){let{data:t,xrange:l,xTicks:s,figRef:n,omic:a}=e;return(0,i.jsx)(r.Z,{ref:e=>{n.current[a].Box=e},children:(0,i.jsx)(R,{style:{position:"relative",left:-20},data:t,layout:{width:570,height:280,showlegend:!0,legend:{orientation:"h"},xaxis:{zeroline:!1,range:l,tickvals:s},yaxis:{type:"category",showticklabels:!1},margin:{t:0}},config:{staticPlot:!0,displayModeBar:!1},onChange:e=>console.log(e)})})}var L=l(10537),V=l(9140);function _(e){let{omic:t,fileType:l,filteredID:n,groupby:a,showNorm:o,figRef:d}=e,u=(0,c.tc)().user.mdata,h=(0,c.tc)().norm[l],x=(0,s.useMemo)(()=>{let e=Math.floor(Math.max(1,n.length/1e4)),t=[];for(let l=0;l<n.length;l+=e)t.push(n[l]);let l=[],i=(0,L.$i)(h.T);for(let e=0;e<t.length;e++)l.push(i[t[e]]);let s=new dfd.DataFrame(l);return s.setIndex({index:t,inplace:!0}),(0,L.$i)(s.T)},[h,n]),{myData:p,gValues:m,idx2g:f}=(0,s.useMemo)(()=>{let e={};for(let t=0;t<u.shape[0];t++)u.columns.includes(a)?null!=u.column(a).values[t]&&(e[u.index[t]]=u.column(a).values[t]):e[u.index[t]]="All values";let t=Object.keys(e).map(t=>e[t]).filter((e,t,l)=>l.indexOf(e)===t),l={};return t.map(e=>l[e]=[]),Object.keys(x).map(t=>{Object.keys(e).includes(t)&&Object.keys(x[t]).map(i=>l[e[t]].push(x[t][i]))}),{myData:l,gValues:t,idx2g:e}},[a,u,x]),{xrange:b,xTicks:g,minimum:j,maximum:y}=(0,s.useMemo)(e=>{let t=Object.keys(p).map(e=>p[e]).flat(),l=(0,k.vi)(t,1e-4),i=(0,k.vi)(t,.9999),s=[l-Math.abs(.05*l),i+Math.abs(.05*i)],n=(0,k.jI)(l,i,6);return{xrange:s,xTicks:n,minimum:l,maximum:i}},[p]),{dataHist:v,yrange:Z}=(0,s.useMemo)(()=>{let e={};Object.keys(p).map(t=>{e[t]=p[t].filter(e=>j<=e&&e<=y);let l=Math.max(1,Math.floor(e[t].length/5e4)),i=[];for(let s=0;s<e[t].length;s+=l)i.push(e[t][s]);i.push(e[t].slice(-1)),e[t]=i}),Object.keys(e).map(t=>{try{e[t].length>0?e[t]=(0,k.wH)(e[t],1+Math.ceil(Math.log2(e[t].length))):delete e[t]}catch(e){console.error(e)}}),(e=(e=Object.keys(e).map(t=>e[t].map(e=>{let{binCenter:l,density:i}=e;return{binCenter:Math.round(100*l)/100,[t]:Number.parseFloat(i).toExponential(3),d:i}}))).flat()).sort((e,t)=>e.binCenter-t.binCenter);let t=0,l=e.map(e=>e.d);for(let e=0;e<l.length;e++)t=l[e]>t?l[e]:t;let i=[0,Number.parseFloat((1.05*t).toPrecision(2))];return{dataHist:e,yrange:i}},[p,j,y]),w=(0,s.useMemo)(()=>Object.keys(p).map((e,t)=>p[e].length>0?{x:p[e],type:"box",name:"".concat(e),marker:{color:P.s[t%P.s.length]}}:null).filter(e=>null!=e),[p]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Z,{sx:{height:210},children:(0,i.jsx)(O,{dataHist:v,gValues:m,xrange:b,xTicks:g,yrange:Z,figRef:d,omic:t})}),(0,i.jsx)(r.Z,{sx:{height:280,width:500,margin:"auto",overflowX:"hidden",overflowY:"hidden"},children:(0,i.jsx)(V.Z,{children:(0,i.jsx)(B,{data:w,xrange:b,xTicks:g,figRef:d,omic:t})})})]})}var G=l(67248),U=l(33457);function q(e){let{columns:t,data:l}=e,n=(0,s.useRef)(null),[a,o]=(0,s.useState)(!0),[r,c]=(0,s.useState)([]);(0,s.useEffect)(()=>{o(!1)},[]),(0,s.useEffect)(()=>{try{var e,t;null===(t=n.current)||void 0===t||null===(e=t.scrollToIndex)||void 0===e||e.call(t,0)}catch(e){console.error(e)}},[r]);let d=(0,U.X0)({columns:t,data:l,defaultDisplayColumn:{enableResizing:!0},layoutMode:"grid",enableBottomToolbar:!1,enableTopToolbar:!1,enableColumnResizing:!1,enableColumnVirtualization:!0,enableGlobalFilterModes:!1,enablePagination:!1,enableColumnPinning:!1,enableRowNumbers:!1,enableRowVirtualization:!0,enableColumnFilters:!1,muiTableContainerProps:{sx:{maxHeight:"450px"}},onSortingChange:c,state:{isLoading:a,sorting:r},rowVirtualizerInstanceRef:n,rowVirtualizerOptions:{overscan:5},columnVirtualizerOptions:{overscan:2}});return(0,i.jsx)(V.Z,{children:(0,i.jsx)("div",{style:{opacity:.9,width:"100%",margin:"auto"},children:(0,i.jsx)(U.P2,{table:d})})})}var H=l(75745),W=l(35843),Y=l(666);let X=(0,W.ZP)(b.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function $(){let[e,t]=s.useState(!1),l=()=>{t(!1)};return(0,i.jsxs)(r.Z,{children:[(0,i.jsx)(m.Z,{"aria-label":"question",size:"large",onClick:()=>{t(!0)},children:(0,i.jsx)(Y.Z,{fontSize:"inherit"})}),(0,i.jsxs)(X,{onClose:l,"aria-labelledby":"customized-dialog-title",open:e,maxWidth:"md",children:[(0,i.jsx)(g.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Data Distribution"}),(0,i.jsx)(m.Z,{"aria-label":"close",onClick:l,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,i.jsx)(w.default,{})}),(0,i.jsx)(j.Z,{sx:{textAlign:"justify"},dividers:!0,children:(0,i.jsxs)(o.Z,{gutterBottom:!0,children:["The ",(0,i.jsx)("strong",{children:"Biomolecule Table"})," lists the identifiers of biomolecules used in the visualization on the left. It helps users track which biomolecules are currently being analyzed. users to Users can ",(0,i.jsx)("strong",{children:"filter the biomolecules"})," based on a specific column from the Omic Metadata Table. After selecting a filter, only the biomolecules that match the string criteria (regex are accepted) will be displayed in the density plot."]})}),(0,i.jsx)(v.Z,{})]})]})}function K(e){let{omic:t,setFilteredID:l,updatePlot:n}=e,a=(0,h.a0)().EDA.DD.filterText["".concat(t,"2i")],[o,c]=(0,s.useState)(a),d=(0,h.a0)().EDA.DD.filterCol["".concat(t,"2i")],[x,p]=(0,s.useState)(d),[m]=(0,H.Z)(t),{filteredFeatures:f,columns:b}=(0,s.useMemo)(()=>{console.log("calculating filteredFeatures");let e=[],t=[{accessorKey:" ",header:" ",size:60}];if(m.columns.includes(x)){e=(e=m.column(x)).values.map((t,l)=>({" ":e.index[l],[x]:t}));let l=RegExp("");try{l=new RegExp(o)}catch(e){l=RegExp("")}e=e.filter(e=>null!=e[x]&&l.test(e[x])),t.push({accessorKey:x,header:x})}else e=(e=m.index).map((e,t)=>({" ":e}));return{filteredFeatures:e,columns:t}},[o,x,m]);return(0,s.useEffect)(()=>{console.log("useEffect: Recalculating features");let e=setTimeout(()=>{l(f.map(e=>e[" "])),n([t]),console.log("Features recalculated")},1e3);return()=>clearTimeout(e)},[f,l,n,t]),(0,i.jsxs)(r.Z,{sx:{width:"95%",margin:"auto"},children:[(0,i.jsxs)(r.Z,{sx:{display:"flex",height:80},children:[(0,i.jsx)(r.Z,{sx:{mt:3},children:(0,i.jsx)($,{})}),(0,i.jsx)(r.Z,{sx:{width:"40%",pt:1},children:(0,i.jsx)(u.$S,{options:[{label:"All features",value:"All features"},...m.columns.map(e=>({label:e,value:e}))],onChange:e=>p(e.value),value:{label:x,value:x}})}),m.columns.includes(x)&&(0,i.jsx)(V.Z,{children:(0,i.jsx)(r.Z,{sx:{mt:3,ml:3},children:(0,i.jsx)(G.Z,{id:"standard-name",placeholder:"Filter text",value:o,onChange:e=>c(e.target.value)})})})]}),(0,i.jsx)(r.Z,{sx:{mt:2},children:(0,i.jsx)(q,{data:f,columns:b})})]})}let Q=e=>{let{openVSNPlot:t,setOpenVSNPlot:l,omic:n}=e,{API_URL:a}=(0,x.S)(),d=(0,c.tc)(),{jobID:u}=(0,c.tc)(),[h,f]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=async()=>{let e=await fetch("".concat(a,"/get_vsn_plot/").concat(u,"/").concat(n)),t=await e.blob(),l=URL.createObjectURL(t);f(l)},t=setTimeout(e,500);return()=>clearTimeout(t)},[f,a,u,n]),(0,i.jsxs)(b.Z,{open:t,onClose:()=>l(!1),fullWidth:!0,maxWidth:"md",children:[(0,i.jsx)(g.Z,{children:"VSN-Quality Plot"}),(0,i.jsx)(m.Z,{"aria-label":"close",onClick:()=>l(!1),sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,i.jsx)(w.default,{})}),(0,i.jsxs)(j.Z,{dividers:!0,children:[(0,i.jsx)(o.Z,{sx:{textAlign:"justify"},gutterBottom:!0,children:"The red dots, connected by lines, show the running median of the standard deviation. The aim of these plots is to see whether there is a systematic trend in the standard deviation of the data as a function of overall expression. After variance stabilisation, this should be approximately a horizontal line. It may have some random fluctuations, but should not show an overall trend. If this is not the case, that usually indicates a data quality problem, or is a consequence of inadequate prior data preprocessing."}),(0,i.jsx)(r.Z,{sx:{textAlign:"center",py:2},children:(0,i.jsx)("img",{src:h,alt:"VSN-Quality Plot"})}),(0,i.jsxs)(o.Z,{sx:{textAlign:"justify"},gutterBottom:!0,children:["Please, find more information about VSN on ",(0,i.jsx)(y.Z,{target:"_blank",href:"https://www.bioconductor.org/packages/release/bioc/vignettes/vsn/inst/doc/A-vsn.html",children:"VSN vignette"}),"."]})]}),(0,i.jsx)(v.Z,{children:(0,i.jsx)(p.Z,{autoFocus:!0,onClick:()=>{var e=document.createElement("a");e.setAttribute("download","".concat(d.userFileNames["x".concat(n)].replace(/\.[^.]+$/,"")+"VSN_QualityPlot.png")),e.style.display="none",e.href=h,document.body.appendChild(e),e.click(),e.remove()},children:"Download Plot"})})]})};var J=function(e){let{omic:t,figRef:l,showPlot:n,showNorm:a,updatePlot:d,groupby:u}=e,[h,b]=(0,s.useState)(),{OMIC2NAME:g}=(0,x.S)(),j=(0,c.tc)(),y=()=>{let e=(0,L.$i)(j.norm["x".concat(t)].T),l=Object.keys(e),i=j.index["x".concat(t)],s=[["",...i].join("	"),...l.map(t=>[t,...i.map(l=>e[t][l])].join("	"))].join("\n"),n=new Blob([s],{type:"text/plain"});var a=document.createElement("a");a.setAttribute("download","Norm_".concat(j.userFileNames["x".concat(t)])),a.style.display="none",a.href=window.URL.createObjectURL(n),document.body.appendChild(a),a.click(),a.remove()},[v,w]=(0,s.useState)(!1);return(0,i.jsxs)(r.Z,{children:[(0,i.jsxs)(r.Z,{sx:{border:"0px solid red",height:0,width:"50%",display:"flex",justifyContent:"center",position:"relative",top:-10,py:1},children:[(0,i.jsx)(r.Z,{sx:{px:2},children:(0,i.jsx)(p.Z,{sx:{fontSize:16,textTransform:"none",color:"rgba(0,0,0,0.6)"},startIcon:(0,i.jsx)(Z.Z,{}),color:"info",onClick:()=>y(),children:"Download Normalized Data"})}),"vsn"==j.results.PRE.norm["x".concat(t)]&&(0,i.jsxs)(r.Z,{sx:{px:2},children:[(0,i.jsx)(p.Z,{sx:{fontSize:16,textTransform:"none",color:"rgba(0,0,0,0.6)"},startIcon:(0,i.jsx)(C.Z,{}),color:"info",onClick:()=>w(!0),children:"VSN-Quality Plot"}),(0,i.jsx)(Q,{openVSNPlot:v,setOpenVSNPlot:w,omic:t})]})]}),(0,i.jsxs)(r.Z,{sx:{display:"flex",justifyContent:"space-evenly",alignItems:"flex-start"},children:[(0,i.jsxs)(r.Z,{sx:{width:"45%",height:"600px",pt:4},children:[(0,i.jsxs)(o.Z,{variant:"h6",sx:{textAlign:"center",color:"#555555"},children:["Data Distribution",(0,i.jsx)(m.Z,{"aria-label":"download",size:"small",onClick:e=>S()(l.current[t].Hist,l.current[t].Box,g[t]),sx:{opacity:.5,visibility:n[t]?"visible":"hidden",paddingBottom:1},children:(0,i.jsx)(Z.Z,{})})]}),n[t]?(0,i.jsx)(r.Z,{sx:{height:500,overflow:"hidden",mt:3},children:(0,i.jsx)(_,{omic:t,fileType:"x".concat(t),filteredID:h,groupby:u,showNorm:a,figRef:l})}):(0,i.jsx)(r.Z,{sx:{textAlign:"center",pt:20,height:550},children:(0,i.jsx)(f.Z,{size:100,thickness:2})})]}),(0,i.jsx)(r.Z,{sx:{width:"45%",height:"600px"},children:(0,i.jsx)(K,{omic:t,setFilteredID:b,updatePlot:d})})]})]})},ee=l(19636);let et=(0,W.ZP)(b.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function el(){let[e,t]=s.useState(!1),l=()=>{t(!1)};return(0,i.jsxs)(r.Z,{children:[(0,i.jsx)(m.Z,{"aria-label":"question",size:"large",onClick:()=>{t(!0)},children:(0,i.jsx)(Y.Z,{fontSize:"inherit"})}),(0,i.jsxs)(et,{onClose:l,"aria-labelledby":"customized-dialog-title",open:e,maxWidth:"lg",children:[(0,i.jsx)(g.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Data Distribution"}),(0,i.jsx)(m.Z,{"aria-label":"close",onClick:l,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,i.jsx)(w.default,{})}),(0,i.jsxs)(j.Z,{sx:{textAlign:"justify"},dividers:!0,children:[(0,i.jsx)(o.Z,{gutterBottom:!0,children:"This section allows users to explore the distribution of quantitative values for biomolecules across different omic datasets (metabolomics, proteomics and transcriptomics). Users can navigate between different omics using the Omic Selector button at the top."}),(0,i.jsxs)(o.Z,{gutterBottom:!0,children:["The ",(0,i.jsx)("strong",{children:"Density Plot & Boxplot"})," figure displays the distribution of quantitative values for the selected biomolecules. The default view shows the overall distribution, but users can customize this view using the Group by selector."]}),(0,i.jsxs)(o.Z,{gutterBottom:!0,children:["The ",(0,i.jsx)("strong",{children:"Group by Selector"})," button lets users choose a categorical variable from the Experimental Metadata Table to group the data by. When a category is selected, the plot will display separate density curves for each group within that category. This feature is particularly useful for detecting batch effects or other group-specific variations in your data."]})]}),(0,i.jsx)(v.Z,{})]})]})}function ei(){let e=(0,s.useRef)(),{omics:t}=(0,c.tc)(),[l,n]=(0,s.useState)(t[0]),a=(0,s.useRef)(t.reduce((e,t)=>({...e,[t]:{}}),{})),o=(0,h.mX)(),x=(0,h.a0)().EDA.DD.showNorm,[p,m]=(0,s.useState)(x),f=(0,h.a0)().EDA.DD.groupby,[b,g]=(0,s.useState)(f),{mdataType:j}=(0,c.tc)(),y=(0,c.tc)().user.mdata.columns.map(e=>({label:e,value:e})).filter(e=>"categorical"==j[e.value].type);y=[{label:"All values",value:"All values"},...y];let[v,Z]=(0,s.useState)(t.reduce((e,t)=>({...e,[t]:!1}),{})),w=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;e.map(e=>{Z(t=>({...t,[e]:!1}))}),e.map(e=>setTimeout(()=>Z(t=>({...t,[e]:!0})),300))},[]),C=(0,s.useCallback)(e=>{let l={label:e.value,value:e.value};g(l),o({type:"set-eda-dd-groupby",groupby:l}),w(t)},[w,t,o]);return(0,s.useCallback)(e=>{m(e.target.checked),w(t)},[w,t]),(0,i.jsxs)(r.Z,{children:[(0,i.jsx)(r.Z,{sx:{position:"absolute"},children:(0,i.jsx)(el,{})}),(0,i.jsx)(ee.Z,{selOmic:l,setSelOmic:n,omicViewRef:e}),(0,i.jsxs)(d.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",sx:{mb:3,mt:3},children:[!1,(0,i.jsx)(d.ZP,{item:!0,xs:3,children:(0,i.jsx)(u.AT,{options:y,handleSelect:C,label:"Group by"})})]}),(0,i.jsx)(r.Z,{ref:e,sx:{overflow:"hidden"},children:(0,i.jsx)(r.Z,{sx:{display:"flex",width:"".concat(t.length,"00%")},children:t.map(e=>(0,i.jsx)(r.Z,{sx:{width:"".concat(100/t.length,"%"),opacity:l==e?1:0,transition:"all 1s ease"},children:(0,i.jsx)(J,{omic:e,figRef:a,showPlot:v,showNorm:p,updatePlot:w,groupby:b.value})},e))})})]})}var es=l(15095);let en=I()(()=>Promise.all([l.e(543),l.e(125),l.e(62),l.e(56)]).then(l.bind(l,28056)),{loadableGenerated:{webpack:()=>[28056]}}),ea=I()(()=>Promise.all([l.e(227),l.e(543),l.e(125),l.e(328),l.e(48),l.e(62),l.e(735)]).then(l.bind(l,93735)),{loadableGenerated:{webpack:()=>[93735]}}),eo=I()(()=>Promise.all([l.e(813),l.e(261),l.e(227),l.e(543),l.e(405),l.e(48),l.e(794),l.e(984)]).then(l.bind(l,73984)),{loadableGenerated:{webpack:()=>[73984]}}),er=I()(()=>l.e(408).then(l.bind(l,29408)),{loadableGenerated:{webpack:()=>[29408]}});function ec(){let e=(0,h.mX)(),{API_URL:t}=(0,x.S)(),d=(0,s.useRef)(),u=(0,h.a0)().status,[p,m]=(0,s.useState)(u),f=(0,h.a0)().value,[b,g]=(0,s.useState)(f),{jobID:j,omics:y}=(0,c.tc)(),v=(0,s.useCallback)(async()=>{let l=await fetch("".concat(t,"/get_status/").concat(j,"/").concat(y.join(""))),i=await l.json();Object.keys(p).some(e=>p[e].status!=i[e].status)&&(console.log("Set status: ".concat(i)),m(i),e({type:"set-status",status:i})),Object.keys(i).every(e=>"waiting"!=i[e].status)&&clearInterval(d.current)},[t,j,d,e,p,y]);return(0,s.useEffect)(()=>{if(console.log("useEffect: Check status"),Object.keys(u).some(e=>"waiting"==u[e].status))return console.log("useEffect: Initialize status fetching"),d.current=setInterval(v,2500),()=>clearInterval(d.current)},[d,v,u]),(0,s.useEffect)(()=>{l.e(794).then(l.t.bind(l,91794,19)).then(t=>{e({type:"set-pwa-attr",attr:"MetaboID",value:t}),console.log("MetaboID loaded")})},[e]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.Z,{variant:"body2",sx:{textAlign:"right",pr:4},children:["Job ID: ",j]}),(0,i.jsxs)(r.Z,{sx:{display:"flex",flexGrow:1,bgcolor:"background.paper"},children:[(0,i.jsx)(r.Z,{sx:{width:"15%",borderRight:1,borderColor:"divider"},children:(0,i.jsxs)(n.Z,{orientation:"vertical",variant:"scrollable",value:b,onChange:(t,l)=>{g(l),e({type:"set-tab-value",value:l})},"aria-label":"Results Sections Tabs",sx:{width:"15%",position:"fixed"},children:[(0,i.jsx)(a.Z,{label:(0,i.jsx)(ed,{text:"EXPLORATORY DATA ANALYSIS",status:""}),value:.1,sx:{mt:2,p:0,color:0==Math.floor(b)?"#1976d2":"#00000099"}}),(0,i.jsx)(a.Z,{label:(0,i.jsx)(ed,{text:"DATA DISTRIBUTION",status:""}),value:.1,sx:{fontSize:12,m:0,p:0,borderTop:"1px solid #cccccc"}}),(0,i.jsx)(a.Z,{label:(0,i.jsx)(ed,{text:"PCA",status:p.EDA_PCA.status}),value:.2,sx:{fontSize:12,m:0,p:0,borderBottom:"1px solid #cccccc"},disabled:"ok"!=p.EDA_PCA.status}),(0,i.jsx)(a.Z,{label:(0,i.jsx)(ed,{text:"MULTIOMICS FACTOR ANALYSIS",status:p.MOFA.status}),value:1.1,sx:{fontSize:12,mt:2,p:0},disabled:"ok"!=p.MOFA.status}),(0,i.jsx)(a.Z,{label:(0,i.jsx)(ed,{text:"INTEGRATIVE PATHWAY ANALYSIS",status:""}),value:2.1,sx:{fontSize:12,m:0,p:0},disabled:!1}),(0,i.jsx)(a.Z,{label:(0,i.jsx)(ed,{text:"ENRICHMENT ANALYSIS",status:""}),value:3.1,sx:{fontSize:12,m:0,p:0},disabled:!1})]})}),(0,i.jsxs)(r.Z,{sx:{width:"85%",borderTop:"1px solid #cccccc"},children:[.1==b&&(0,i.jsx)(r.Z,{sx:{p:1},children:(0,i.jsx)(ei,{})}),.2==b&&(0,i.jsx)(r.Z,{sx:{p:1},children:(0,i.jsx)(en,{})}),1.1==b&&(0,i.jsx)(r.Z,{sx:{p:1},children:(0,i.jsx)(ea,{})}),2.1==b&&(0,i.jsx)(r.Z,{sx:{p:1},children:(0,i.jsx)(er,{})}),3.1==b&&(0,i.jsx)(r.Z,{sx:{p:1},children:(0,i.jsx)(eo,{})})]})]})]})}let ed=e=>{let{text:t,status:l}=e;return(0,i.jsxs)(d.ZP,{container:!0,sx:{m:"auto",height:55},children:[("waiting"==l||"error"==l)&&(0,i.jsx)(r.Z,{sx:{position:"absolute",height:"100%"},children:(0,i.jsxs)(r.Z,{sx:{height:20,position:"relative",top:"35%",left:20},children:["waiting"==l&&(0,i.jsx)(f.Z,{sx:{verticalAlign:"middle"},size:15,thickness:5}),"error"==l&&(0,i.jsx)(es.Z,{})]})}),(0,i.jsx)(o.Z,{sx:{m:"auto",width:"85%",fontSize:13,position:"relative",right:-12},children:t})]})}},75745:function(e,t,l){var i=l(41637),s=l(2265);t.Z=function(e){let t=(0,i.tc)().user["".concat(e,"2i")],l=(0,i.tc)().f2x[e],n=(0,s.useMemo)(()=>{let e=dfd.toJSON(t).filter((e,t)=>l[t]);return(e=new dfd.DataFrame(e)).setIndex({column:e.columns[0],inplace:!0}),e},[t,l]);return[n]}},31863:function(e,t,l){function i(e,t){let l=new XMLSerializer().serializeToString(e.childNodes[0].childNodes[0]),i=new Blob([l],{type:"image/svg+xml;charset=utf-8"});var s=URL.createObjectURL(i);let n=window.document.createElement("a");n.style="display:none",n.download="".concat(t),n.href=s,document.body.appendChild(n),n.click(),document.body.removeChild(n),n.remove()}l.r(t),l.d(t,{default:function(){return i}})},90053:function(e,t,l){l.d(t,{s:function(){return i}});let i=["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52","#2E91E5","#E15F99","#1CA71C","#FB0D0D","#DA16FF","#222A2A","#B68100","#750D86","#EB663B","#511CFB","#00A08B","#FB00D1","#FC0080","#B2828D","#6C7C32","#778AAE","#862A16","#A777F1","#620042","#1616A7","#DA60CA","#6C4516","#0D2A63","#AF0038"]}}]);