"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[475],{50294:function(e,t,l){l.d(t,{$S:function(){return c},AT:function(){return o}});var n=l(57437),i=l(64728),r=l(96507),a=l(2265),s=l(80149);function o(e){let{options:t,handleSelect:l,label:o}=e,c=(0,i.a0)().EDA.DD.groupby,[d,u]=(0,a.useState)(c);return(0,n.jsxs)(r.Z,{children:[(0,n.jsx)("label",{id:"aria-label",htmlFor:"aria-example-input",children:o}),(0,n.jsx)(s.ZP,{"aria-labelledby":"aria-label",inputId:"aria-example-input",className:"basic-single",classNamePrefix:"select",placeholder:"",isSearchable:!0,isClearable:!1,options:t,value:d,onChange:e=>{u({label:e.value,value:e.value}),setTimeout(()=>l(e),100)}})]})}function c(e){let{options:t,value:l,onChange:i,label:a}=e;return(0,n.jsxs)(r.Z,{children:[(0,n.jsx)("label",{id:"aria-label",htmlFor:"aria-example-input",children:a}),(0,n.jsx)(s.ZP,{"aria-labelledby":"aria-label",inputId:"aria-example-input",className:"basic-single",classNamePrefix:"select",placeholder:"",isSearchable:!0,isClearable:!1,options:t,value:l,onChange:i})]})}},19636:function(e,t,l){l.d(t,{Z:function(){return o}});var n=l(57437),i=l(11093),r=l(41637),a=l(96507),s=l(2265);function o(e){let{selOmic:t,setSelOmic:l,omicViewRef:s}=e,{omics:o}=(0,r.tc)(),{OMIC2NAME:d}=(0,i.S)();return(0,n.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",mt:1},children:o.map((e,i)=>(0,n.jsx)(c,{selOmic:t,id:e,title:d[e],setSelOmic:l,omicViewRef:s},e))})}let c=e=>{let{selOmic:t,id:l,title:i,setSelOmic:o,omicViewRef:c}=e,{omics:d}=(0,r.tc)(),[u,h]=(0,s.useState)(!1),x=l==t,p="#00000015",m="#000000aa";return x?(p="#1976D2ff",m="#ffffff"):u&&(p="#00000033",m="#000000aa"),(0,n.jsx)(a.Z,{sx:{px:3,py:1,mx:.1,fontSize:"1.1em",color:m,backgroundColor:p,userSelect:"none",cursor:"pointer",transition:"ease 1s"},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),onClick:()=>{let e=d.indexOf(l)-d.indexOf(t);setTimeout(()=>{c.current.scrollLeft=c.current.scrollLeft+e*c.current.clientWidth},100),o(l)},children:i})}},15632:function(e,t,l){function n(e,t){let l=Math.min(...e),n=(Math.max(...e)-l)/t,i=Array(t).fill(0);e.forEach(e=>{let r=Math.floor((e-l)/n);r>=0&&r<t&&i[r]++});let r=i.map(t=>t/(e.length*n)),a=Array(t).fill(0).map((e,t)=>l+(t+.5)*n),s=[];for(let e=0;e<t;e++)s.push({binCenter:a[e],density:r[e]});return s}function i(e,t){let l=e.slice().sort((e,t)=>e-t),n=Math.floor(l.length*t),i=l[n];return i}function r(e,t,l){let n=(t-e)/(l-1),i=[];for(let t=0;t<l;t++){let l=e+t*n;i.push(l)}return i.filter(e=>e<0).length>0&&i.filter(e=>e>0).length>0&&i.push(0),i.sort((e,t)=>e-t),i=i.map(e=>e<=0?Math.floor(100*e)/100:e>0?Math.ceil(100*e)/100:void 0)}l.d(t,{jI:function(){return r},vi:function(){return i},wH:function(){return n}})},42475:function(e,t,l){l.r(t),l.d(t,{default:function(){return eo}});var n=l(57437),i=l(2265),r=l(63916),a=l(55303),s=l(85269),o=l(96507),c=l(41637),d=l(38939),u=l(50294),h=l(64728),x=l(11093),p=l(49600),m=l(46776),f=l(47042),g=l(22079),b=l(91797),j=l(52151),w=l(78063),y=l(91928),v=l(52481),A=l(33533),C=l(43795),Z=l(7035),S=l(15632),E=l(90045),N=l(16573),k=l(24235),D=l(50039),T=l(2047),z=l(51125),M=l(90053);function F(e){let{dataHist:t,gValues:l,xrange:i,yrange:r,xTicks:a,figRef:s,omic:o}=e;return(0,n.jsxs)(E.T,{ref:e=>{s.current[o].Hist=e},style:{margin:"auto"},width:500,height:210,data:t,margin:{top:10,right:30,left:0,bottom:0},children:[(0,n.jsx)(N.q,{strokeDasharray:"3 3"}),(0,n.jsx)(k.K,{dataKey:"binCenter",type:"number",ticks:a,domain:i,style:{fontFamily:"Calibri"}}),(0,n.jsx)(D.B,{domain:r,style:{fontFamily:"Calibri"}}),(0,n.jsx)(T.u,{}),l.map((e,t)=>(0,n.jsx)(z.u,{connectNulls:!0,type:"monotone",dataKey:e,fillOpacity:.3,stroke:M.s[t%M.s.length],fill:M.s[t%M.s.length]},e))]})}var I=l(98864),P=l.n(I);let O=P()(()=>Promise.all([l.e(934),l.e(901)]).then(l.bind(l,87022)),{loadableGenerated:{webpack:()=>[87022]},ssr:!1});function B(e){let{data:t,xrange:l,xTicks:i,figRef:r,omic:a}=e;return(0,n.jsx)(o.Z,{ref:e=>{r.current[a].Box=e},children:(0,n.jsx)(O,{style:{position:"relative",left:-20},data:t,layout:{width:570,height:280,showlegend:!0,legend:{orientation:"h"},xaxis:{zeroline:!1,range:l,tickvals:i},yaxis:{type:"category",showticklabels:!1},margin:{t:0}},config:{staticPlot:!0,displayModeBar:!1},onChange:e=>console.log(e)})})}var R=l(10537),L=l(9140);function q(e){let{omic:t,fileType:l,filteredID:r,groupby:a,showNorm:s,figRef:d}=e,u=(0,c.tc)().user.mdata,h=(0,c.tc)().norm[l],x=(0,i.useMemo)(()=>{let e=Math.floor(Math.max(1,r.length/1e4)),t=[];for(let l=0;l<r.length;l+=e)t.push(r[l]);let l=[],n=(0,R.$i)(h.T);for(let e=0;e<t.length;e++)l.push(n[t[e]]);let i=new dfd.DataFrame(l);return i.setIndex({index:t,inplace:!0}),(0,R.$i)(i.T)},[h,r]),{myData:p,gValues:m,idx2g:f}=(0,i.useMemo)(()=>{let e={};for(let t=0;t<u.shape[0];t++)u.columns.includes(a)?null!=u.column(a).values[t]&&(e[u.index[t]]=u.column(a).values[t]):e[u.index[t]]="All values";let t=Object.keys(e).map(t=>e[t]).filter((e,t,l)=>l.indexOf(e)===t),l={};return t.map(e=>l[e]=[]),Object.keys(x).map(t=>{Object.keys(e).includes(t)&&Object.keys(x[t]).map(n=>l[e[t]].push(x[t][n]))}),{myData:l,gValues:t,idx2g:e}},[a,u,x]),{xrange:g,xTicks:b,minimum:j,maximum:w}=(0,i.useMemo)(e=>{let t=Object.keys(p).map(e=>p[e]).flat(),l=(0,S.vi)(t,1e-4),n=(0,S.vi)(t,.9999),i=[l-Math.abs(.05*l),n+Math.abs(.05*n)],r=(0,S.jI)(l,n,6);return{xrange:i,xTicks:r,minimum:l,maximum:n}},[p]),{dataHist:y,yrange:v}=(0,i.useMemo)(()=>{let e={};Object.keys(p).map(t=>{e[t]=p[t].filter(e=>j<=e&&e<=w);let l=Math.max(1,Math.floor(e[t].length/5e4)),n=[];for(let i=0;i<e[t].length;i+=l)n.push(e[t][i]);n.push(e[t].slice(-1)),e[t]=n}),Object.keys(e).map(t=>{try{e[t].length>0?e[t]=(0,S.wH)(e[t],1+Math.ceil(Math.log2(e[t].length))):delete e[t]}catch(e){console.error(e)}}),(e=(e=Object.keys(e).map(t=>e[t].map(e=>{let{binCenter:l,density:n}=e;return{binCenter:Math.round(100*l)/100,[t]:Number.parseFloat(n).toExponential(3),d:n}}))).flat()).sort((e,t)=>e.binCenter-t.binCenter);let t=0,l=e.map(e=>e.d);for(let e=0;e<l.length;e++)t=l[e]>t?l[e]:t;let n=[0,Number.parseFloat((1.05*t).toPrecision(2))];return{dataHist:e,yrange:n}},[p,j,w]),A=(0,i.useMemo)(()=>Object.keys(p).map((e,t)=>p[e].length>0?{x:p[e],type:"box",name:"".concat(e),marker:{color:M.s[t%M.s.length]}}:null).filter(e=>null!=e),[p]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{sx:{height:210},children:(0,n.jsx)(F,{dataHist:y,gValues:m,xrange:g,xTicks:b,yrange:v,figRef:d,omic:t})}),(0,n.jsx)(o.Z,{sx:{height:280,width:500,margin:"auto",overflowX:"hidden",overflowY:"hidden"},children:(0,n.jsx)(L.Z,{children:(0,n.jsx)(B,{data:A,xrange:g,xTicks:b,figRef:d,omic:t})})})]})}var V=l(67248),_=l(33457);function G(e){let{columns:t,data:l}=e,r=(0,i.useRef)(null),[a,s]=(0,i.useState)(!0),[o,c]=(0,i.useState)([]);(0,i.useEffect)(()=>{s(!1)},[]),(0,i.useEffect)(()=>{try{var e,t;null===(t=r.current)||void 0===t||null===(e=t.scrollToIndex)||void 0===e||e.call(t,0)}catch(e){console.error(e)}},[o]);let d=(0,_.X0)({columns:t,data:l,defaultDisplayColumn:{enableResizing:!0},layoutMode:"grid",enableBottomToolbar:!1,enableTopToolbar:!1,enableColumnResizing:!1,enableColumnVirtualization:!0,enableGlobalFilterModes:!1,enablePagination:!1,enableColumnPinning:!1,enableRowNumbers:!1,enableRowVirtualization:!0,enableColumnFilters:!1,muiTableContainerProps:{sx:{maxHeight:"450px"}},onSortingChange:c,state:{isLoading:a,sorting:o},rowVirtualizerInstanceRef:r,rowVirtualizerOptions:{overscan:5},columnVirtualizerOptions:{overscan:2}});return(0,n.jsx)(L.Z,{children:(0,n.jsx)("div",{style:{opacity:.9,width:"100%",margin:"auto"},children:(0,n.jsx)(_.P2,{table:d})})})}var U=l(75745),H=l(35843),W=l(666);let X=(0,H.ZP)(g.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function Y(){let[e,t]=i.useState(!1),l=()=>{t(!1)};return(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(m.Z,{"aria-label":"question",size:"large",onClick:()=>{t(!0)},children:(0,n.jsx)(W.Z,{fontSize:"inherit"})}),(0,n.jsxs)(X,{onClose:l,"aria-labelledby":"customized-dialog-title",open:e,maxWidth:"md",children:[(0,n.jsx)(b.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Data Distribution"}),(0,n.jsx)(m.Z,{"aria-label":"close",onClick:l,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,n.jsx)(A.default,{})}),(0,n.jsx)(j.Z,{sx:{textAlign:"justify"},dividers:!0,children:(0,n.jsxs)(s.Z,{gutterBottom:!0,children:["The ",(0,n.jsx)("strong",{children:"Biomolecule Table"})," lists the identifiers of biomolecules used in the visualization on the left. It helps users track which biomolecules are currently being analyzed. users to Users can ",(0,n.jsx)("strong",{children:"filter the biomolecules"})," based on a specific column from the Omic Metadata Table. After selecting a filter, only the biomolecules that match the string criteria (regex are accepted) will be displayed in the density plot."]})}),(0,n.jsx)(y.Z,{})]})]})}function $(e){let{omic:t,setFilteredID:l,updatePlot:r}=e,a=(0,h.a0)().EDA.DD.filterText["".concat(t,"2i")],[s,c]=(0,i.useState)(a),d=(0,h.a0)().EDA.DD.filterCol["".concat(t,"2i")],[x,p]=(0,i.useState)(d),[m]=(0,U.Z)(t),{filteredFeatures:f,columns:g}=(0,i.useMemo)(()=>{console.log("calculating filteredFeatures");let e=[],t=[{accessorKey:" ",header:" ",size:60}];if(m.columns.includes(x)){e=(e=m.column(x)).values.map((t,l)=>({" ":e.index[l],[x]:t}));let l=RegExp("");try{l=new RegExp(s)}catch(e){l=RegExp("")}e=e.filter(e=>null!=e[x]&&l.test(e[x])),t.push({accessorKey:x,header:x})}else e=(e=m.index).map((e,t)=>({" ":e}));return{filteredFeatures:e,columns:t}},[s,x,m]);return(0,i.useEffect)(()=>{console.log("useEffect: Recalculating features");let e=setTimeout(()=>{l(f.map(e=>e[" "])),r([t]),console.log("Features recalculated")},1e3);return()=>clearTimeout(e)},[f,l,r,t]),(0,n.jsxs)(o.Z,{sx:{width:"95%",margin:"auto"},children:[(0,n.jsxs)(o.Z,{sx:{display:"flex",height:80},children:[(0,n.jsx)(o.Z,{sx:{mt:3},children:(0,n.jsx)(Y,{})}),(0,n.jsx)(o.Z,{sx:{width:"40%",pt:1},children:(0,n.jsx)(u.$S,{options:[{label:"All features",value:"All features"},...m.columns.map(e=>({label:e,value:e}))],onChange:e=>p(e.value),value:{label:x,value:x}})}),m.columns.includes(x)&&(0,n.jsx)(L.Z,{children:(0,n.jsx)(o.Z,{sx:{mt:3,ml:3},children:(0,n.jsx)(V.Z,{id:"standard-name",placeholder:"Filter text",value:s,onChange:e=>c(e.target.value)})})})]}),(0,n.jsx)(o.Z,{sx:{mt:2},children:(0,n.jsx)(G,{data:f,columns:g})})]})}let K=e=>{let{openVSNPlot:t,setOpenVSNPlot:l,omic:r}=e,{API_URL:a}=(0,x.S)(),d=(0,c.tc)(),{jobID:u}=(0,c.tc)(),[h,f]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=async()=>{let e=await fetch("".concat(a,"/get_vsn_plot/").concat(u,"/").concat(r)),t=await e.blob(),l=URL.createObjectURL(t);f(l)},t=setTimeout(e,500);return()=>clearTimeout(t)},[f,a,u,r]),(0,n.jsxs)(g.Z,{open:t,onClose:()=>l(!1),fullWidth:!0,maxWidth:"md",children:[(0,n.jsx)(b.Z,{children:"VSN-Quality Plot"}),(0,n.jsx)(m.Z,{"aria-label":"close",onClick:()=>l(!1),sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,n.jsx)(A.default,{})}),(0,n.jsxs)(j.Z,{dividers:!0,children:[(0,n.jsx)(s.Z,{sx:{textAlign:"justify"},gutterBottom:!0,children:"The red dots, connected by lines, show the running median of the standard deviation. The aim of these plots is to see whether there is a systematic trend in the standard deviation of the data as a function of overall expression. After variance stabilisation, this should be approximately a horizontal line. It may have some random fluctuations, but should not show an overall trend. If this is not the case, that usually indicates a data quality problem, or is a consequence of inadequate prior data preprocessing."}),(0,n.jsx)(o.Z,{sx:{textAlign:"center",py:2},children:(0,n.jsx)("img",{src:h,alt:"VSN-Quality Plot"})}),(0,n.jsxs)(s.Z,{sx:{textAlign:"justify"},gutterBottom:!0,children:["Please, find more information about VSN on ",(0,n.jsx)(w.Z,{target:"_blank",href:"https://www.bioconductor.org/packages/release/bioc/vignettes/vsn/inst/doc/A-vsn.html",children:"VSN vignette"}),"."]})]}),(0,n.jsx)(y.Z,{children:(0,n.jsx)(p.Z,{autoFocus:!0,onClick:()=>{var e=document.createElement("a");e.setAttribute("download","".concat(d.userFileNames["x".concat(r)].replace(/\.[^.]+$/,"")+"VSN_QualityPlot.png")),e.style.display="none",e.href=h,document.body.appendChild(e),e.click(),e.remove()},children:"Download Plot"})})]})};var Q=function(e){let{omic:t,figRef:l,showPlot:r,showNorm:a,updatePlot:d,groupby:u}=e,[h,g]=(0,i.useState)(),{OMIC2NAME:b}=(0,x.S)(),j=(0,c.tc)(),w=()=>{let e=(0,R.$i)(j.norm["x".concat(t)].T),l=Object.keys(e),n=j.index["x".concat(t)],i=[["",...n].join("	"),...l.map(t=>[t,...n.map(l=>e[t][l])].join("	"))].join("\n"),r=new Blob([i],{type:"text/plain"});var a=document.createElement("a");a.setAttribute("download","Norm_".concat(j.userFileNames["x".concat(t)])),a.style.display="none",a.href=window.URL.createObjectURL(r),document.body.appendChild(a),a.click(),a.remove()},[y,A]=(0,i.useState)(!1);return(0,n.jsxs)(o.Z,{children:[(0,n.jsxs)(o.Z,{sx:{border:"0px solid red",height:0,width:"50%",display:"flex",justifyContent:"center",position:"relative",top:-10,py:1},children:[(0,n.jsx)(o.Z,{sx:{px:2},children:(0,n.jsx)(p.Z,{sx:{fontSize:16,textTransform:"none",color:"rgba(0,0,0,0.6)"},startIcon:(0,n.jsx)(v.Z,{}),color:"info",onClick:()=>w(),children:"Download Normalized Data"})}),"vsn"==j.results.PRE.norm["x".concat(t)]&&(0,n.jsxs)(o.Z,{sx:{px:2},children:[(0,n.jsx)(p.Z,{sx:{fontSize:16,textTransform:"none",color:"rgba(0,0,0,0.6)"},startIcon:(0,n.jsx)(C.Z,{}),color:"info",onClick:()=>A(!0),children:"VSN-Quality Plot"}),(0,n.jsx)(K,{openVSNPlot:y,setOpenVSNPlot:A,omic:t})]})]}),(0,n.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-evenly",alignItems:"flex-start"},children:[(0,n.jsxs)(o.Z,{sx:{width:"45%",height:"600px",pt:4},children:[(0,n.jsxs)(s.Z,{variant:"h6",sx:{textAlign:"center",color:"#555555"},children:["Data Distribution",(0,n.jsx)(m.Z,{"aria-label":"download",size:"small",onClick:e=>(0,Z.kr)(l.current[t].Hist,l.current[t].Box,b[t]),sx:{opacity:.5,visibility:r[t]?"visible":"hidden",paddingBottom:1},children:(0,n.jsx)(v.Z,{})})]}),r[t]?(0,n.jsx)(o.Z,{sx:{height:500,overflow:"hidden",mt:3},children:(0,n.jsx)(q,{omic:t,fileType:"x".concat(t),filteredID:h,groupby:u,showNorm:a,figRef:l})}):(0,n.jsx)(o.Z,{sx:{textAlign:"center",pt:20,height:550},children:(0,n.jsx)(f.Z,{size:100,thickness:2})})]}),(0,n.jsx)(o.Z,{sx:{width:"45%",height:"600px"},children:(0,n.jsx)($,{omic:t,setFilteredID:g,updatePlot:d})})]})]})},J=l(19636);let ee=(0,H.ZP)(g.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function et(){let[e,t]=i.useState(!1),l=()=>{t(!1)};return(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(m.Z,{"aria-label":"question",size:"large",onClick:()=>{t(!0)},children:(0,n.jsx)(W.Z,{fontSize:"inherit"})}),(0,n.jsxs)(ee,{onClose:l,"aria-labelledby":"customized-dialog-title",open:e,maxWidth:"lg",children:[(0,n.jsx)(b.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Data Distribution"}),(0,n.jsx)(m.Z,{"aria-label":"close",onClick:l,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,n.jsx)(A.default,{})}),(0,n.jsxs)(j.Z,{sx:{textAlign:"justify"},dividers:!0,children:[(0,n.jsx)(s.Z,{gutterBottom:!0,children:"This section allows users to explore the distribution of quantitative values for biomolecules across different omic datasets (metabolomics, proteomics and transcriptomics). Users can navigate between different omics using the Omic Selector button at the top."}),(0,n.jsxs)(s.Z,{gutterBottom:!0,children:["The ",(0,n.jsx)("strong",{children:"Density Plot & Boxplot"})," figure displays the distribution of quantitative values for the selected biomolecules. The default view shows the overall distribution, but users can customize this view using the Group by selector."]}),(0,n.jsxs)(s.Z,{gutterBottom:!0,children:["The ",(0,n.jsx)("strong",{children:"Group by Selector"})," button lets users choose a categorical variable from the Experimental Metadata Table to group the data by. When a category is selected, the plot will display separate density curves for each group within that category. This feature is particularly useful for detecting batch effects or other group-specific variations in your data."]})]}),(0,n.jsx)(y.Z,{})]})]})}function el(){let e=(0,i.useRef)(),{omics:t}=(0,c.tc)(),[l,r]=(0,i.useState)(t[0]),a=(0,i.useRef)(t.reduce((e,t)=>({...e,[t]:{}}),{})),s=(0,h.mX)(),x=(0,h.a0)().EDA.DD.showNorm,[p,m]=(0,i.useState)(x),f=(0,h.a0)().EDA.DD.groupby,[g,b]=(0,i.useState)(f),{mdataType:j}=(0,c.tc)(),w=(0,c.tc)().user.mdata.columns.map(e=>({label:e,value:e})).filter(e=>"categorical"==j[e.value].type);w=[{label:"All values",value:"All values"},...w];let[y,v]=(0,i.useState)(t.reduce((e,t)=>({...e,[t]:!1}),{})),A=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;e.map(e=>{v(t=>({...t,[e]:!1}))}),e.map(e=>setTimeout(()=>v(t=>({...t,[e]:!0})),300))},[]),C=(0,i.useCallback)(e=>{let l={label:e.value,value:e.value};b(l),s({type:"set-eda-dd-groupby",groupby:l}),A(t)},[A,t,s]);return(0,i.useCallback)(e=>{m(e.target.checked),A(t)},[A,t]),(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(o.Z,{sx:{position:"absolute"},children:(0,n.jsx)(et,{})}),(0,n.jsx)(J.Z,{selOmic:l,setSelOmic:r,omicViewRef:e}),(0,n.jsxs)(d.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",sx:{mb:3,mt:3},children:[!1,(0,n.jsx)(d.ZP,{item:!0,xs:3,children:(0,n.jsx)(u.AT,{options:w,handleSelect:C,label:"Group by"})})]}),(0,n.jsx)(o.Z,{ref:e,sx:{overflow:"hidden"},children:(0,n.jsx)(o.Z,{sx:{display:"flex",width:"".concat(t.length,"00%")},children:t.map(e=>(0,n.jsx)(o.Z,{sx:{width:"".concat(100/t.length,"%"),opacity:l==e?1:0,transition:"all 1s ease"},children:(0,n.jsx)(Q,{omic:e,figRef:a,showPlot:y,showNorm:p,updatePlot:A,groupby:g.value})},e))})})]})}var en=l(15095);let ei=P()(()=>Promise.all([l.e(543),l.e(125),l.e(62),l.e(56)]).then(l.bind(l,28056)),{loadableGenerated:{webpack:()=>[28056]}}),er=P()(()=>Promise.all([l.e(227),l.e(543),l.e(125),l.e(328),l.e(48),l.e(62),l.e(735)]).then(l.bind(l,93735)),{loadableGenerated:{webpack:()=>[93735]}}),ea=P()(()=>Promise.all([l.e(813),l.e(261),l.e(227),l.e(543),l.e(405),l.e(48),l.e(794),l.e(984)]).then(l.bind(l,73984)),{loadableGenerated:{webpack:()=>[73984]}}),es=P()(()=>l.e(408).then(l.bind(l,29408)),{loadableGenerated:{webpack:()=>[29408]}});function eo(){let e=(0,h.mX)(),{API_URL:t}=(0,x.S)(),d=(0,i.useRef)(),u=(0,h.a0)().status,[p,m]=(0,i.useState)(u),f=(0,h.a0)().value,[g,b]=(0,i.useState)(f),{jobID:j,omics:w}=(0,c.tc)(),y=(0,i.useCallback)(async()=>{let l=await fetch("".concat(t,"/get_status/").concat(j,"/").concat(w.join(""))),n=await l.json();Object.keys(p).some(e=>p[e].status!=n[e].status)&&(console.log("Set status: ".concat(n)),m(n),e({type:"set-status",status:n})),Object.keys(n).every(e=>"waiting"!=n[e].status)&&clearInterval(d.current)},[t,j,d,e,p,w]);return(0,i.useEffect)(()=>{if(console.log("useEffect: Check status"),Object.keys(u).some(e=>"waiting"==u[e].status))return console.log("useEffect: Initialize status fetching"),d.current=setInterval(y,2500),()=>clearInterval(d.current)},[d,y,u]),(0,i.useEffect)(()=>{l.e(794).then(l.t.bind(l,91794,19)).then(t=>{e({type:"set-pwa-attr",attr:"MetaboID",value:t}),console.log("MetaboID loaded")})},[e]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.Z,{variant:"body2",sx:{textAlign:"right",pr:4},children:["Job ID: ",j]}),(0,n.jsxs)(o.Z,{sx:{display:"flex",flexGrow:1,bgcolor:"background.paper"},children:[(0,n.jsx)(o.Z,{sx:{width:"15%",borderRight:1,borderColor:"divider"},children:(0,n.jsxs)(r.Z,{orientation:"vertical",variant:"scrollable",value:g,onChange:(t,l)=>{b(l),e({type:"set-tab-value",value:l})},"aria-label":"Results Sections Tabs",sx:{width:"15%",position:"fixed"},children:[(0,n.jsx)(a.Z,{label:(0,n.jsx)(ec,{text:"EXPLORATORY DATA ANALYSIS",status:""}),value:.1,sx:{mt:2,p:0,color:0==Math.floor(g)?"#1976d2":"#00000099"}}),(0,n.jsx)(a.Z,{label:(0,n.jsx)(ec,{text:"DATA DISTRIBUTION",status:""}),value:.1,sx:{fontSize:12,m:0,p:0,borderTop:"1px solid #cccccc"}}),(0,n.jsx)(a.Z,{label:(0,n.jsx)(ec,{text:"PCA",status:p.EDA_PCA.status}),value:.2,sx:{fontSize:12,m:0,p:0,borderBottom:"1px solid #cccccc"},disabled:"ok"!=p.EDA_PCA.status}),(0,n.jsx)(a.Z,{label:(0,n.jsx)(ec,{text:"MULTIOMICS FACTOR ANALYSIS",status:p.MOFA.status}),value:1.1,sx:{fontSize:12,mt:2,p:0},disabled:"ok"!=p.MOFA.status}),(0,n.jsx)(a.Z,{label:(0,n.jsx)(ec,{text:"PATHWAY INTEGRATIVE ANALYSIS",status:""}),value:2.1,sx:{fontSize:12,m:0,p:0},disabled:!1}),(0,n.jsx)(a.Z,{label:(0,n.jsx)(ec,{text:"ENRICHMENT ANALYSIS",status:""}),value:3.1,sx:{fontSize:12,m:0,p:0},disabled:!1})]})}),(0,n.jsxs)(o.Z,{sx:{width:"85%",borderTop:"1px solid #cccccc"},children:[.1==g&&(0,n.jsx)(o.Z,{sx:{p:1},children:(0,n.jsx)(el,{})}),.2==g&&(0,n.jsx)(o.Z,{sx:{p:1},children:(0,n.jsx)(ei,{})}),1.1==g&&(0,n.jsx)(o.Z,{sx:{p:1},children:(0,n.jsx)(er,{})}),2.1==g&&(0,n.jsx)(o.Z,{sx:{p:1},children:(0,n.jsx)(es,{})}),3.1==g&&(0,n.jsx)(o.Z,{sx:{p:1},children:(0,n.jsx)(ea,{})})]})]})]})}let ec=e=>{let{text:t,status:l}=e;return(0,n.jsxs)(d.ZP,{container:!0,sx:{m:"auto",height:55},children:[("waiting"==l||"error"==l)&&(0,n.jsx)(o.Z,{sx:{position:"absolute",height:"100%"},children:(0,n.jsxs)(o.Z,{sx:{height:20,position:"relative",top:"35%",left:20},children:["waiting"==l&&(0,n.jsx)(f.Z,{sx:{verticalAlign:"middle"},size:15,thickness:5}),"error"==l&&(0,n.jsx)(en.Z,{})]})}),(0,n.jsx)(s.Z,{sx:{m:"auto",width:"85%",fontSize:13,position:"relative",right:-12},children:t})]})}},75745:function(e,t,l){var n=l(41637),i=l(2265);t.Z=function(e){let t=(0,n.tc)().user["".concat(e,"2i")],l=(0,n.tc)().f2x[e],r=(0,i.useMemo)(()=>{let e=dfd.toJSON(t).filter((e,t)=>l[t]);return(e=new dfd.DataFrame(e)).setIndex({column:e.columns[0],inplace:!0}),e},[t,l]);return[r]}},7035:function(e,t,l){l.d(t,{LA:function(){return c},Wd:function(){return d},OT:function(){return h},Z2:function(){return u},kr:function(){return o}});var n=l(57437),i=l(96507),r=l(46776),a=l(52481);function s(e,t){let l;l="svg"==e.tagName.toLowerCase()?new XMLSerializer().serializeToString(e):new XMLSerializer().serializeToString(e.childNodes[0].childNodes[0]);let n=new Blob([l],{type:"image/svg+xml;charset=utf-8"});var i=URL.createObjectURL(n);let r=window.document.createElement("a");r.style="display:none",r.download="".concat(t),r.href=i,document.body.appendChild(r),r.click(),document.body.removeChild(r),r.remove()}let o=async(e,t,l)=>{let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),n.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),n.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g"));let i=e.container.firstChild.cloneNode(!0);Array.from(i.children).map(e=>n.children[0].appendChild(e));let r=t.firstChild.firstChild.firstChild.cloneNode(!0);Array.from(r.children[0].children).map(e=>n.children[1].appendChild(e)),n.children[1].setAttribute("transform","translate(-20, 200)"),Array.from(r.children[2].children).map(e=>n.children[2].appendChild(e)),n.children[2].setAttribute("transform","translate(-20, 230)"),s(n,"DensityPlot_".concat(l,".svg"))},c=e=>{let{scatterRef:t,name:l}=e;return(0,n.jsx)(i.Z,{sx:{height:0},children:(0,n.jsx)(i.Z,{sx:{width:50,position:"relative",top:5,zIndex:10},children:(0,n.jsx)(r.Z,{"aria-label":"download",size:"small",onClick:()=>{let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g"));let n=t.current.container.cloneNode(!0);if(Array.from(n.children[0].children).map(t=>e.children[0].appendChild(t)),3==n.children.length){e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[1].setAttribute("transform","translate(600, 20)");let t=function(e){let t=document.createElement("div");t.appendChild(e);let l=t.querySelector(".recharts-legend-wrapper"),n=l.querySelectorAll(".recharts-legend-item"),i="http://www.w3.org/2000/svg",r=document.createElementNS(i,"svg");r.setAttribute("xmlns",i),r.setAttribute("width",l.style.width.replace("px","")),r.setAttribute("viewBox","0 0 ".concat(parseInt(l.style.width,10)," ").concat(20*n.length));let a=20;return n.forEach(e=>{let t=e.querySelector("svg path"),l=e.querySelector(".recharts-legend-item-text"),n=document.createElementNS(i,"g");n.setAttribute("transform","translate(0, ".concat(a,")"));let s=document.createElementNS(i,"path");s.setAttribute("d",t.getAttribute("d")),s.setAttribute("fill",t.getAttribute("fill")),s.setAttribute("transform","".concat(t.getAttribute("transform")," scale(0.5)"));let o=document.createElementNS(i,"text");o.textContent=l.textContent,o.setAttribute("x",26),o.setAttribute("y",21),o.setAttribute("fill",l.style.color),o.setAttribute("font-family","Calibri"),o.setAttribute("font-size","16"),n.appendChild(s),n.appendChild(o),r.appendChild(n),a+=20}),r}(n.children[1]);Array.from(t.children).map(t=>e.children[1].appendChild(t))}s(e,"".concat(l,"-Scatter"))},sx:{opacity:.5},children:(0,n.jsx)(a.Z,{})})})})},d=e=>{let{scatterRef:t,name:l}=e;return(0,n.jsx)(i.Z,{sx:{height:0},children:(0,n.jsx)(i.Z,{sx:{width:50,position:"relative",top:5,zIndex:5e3},children:(0,n.jsx)(r.Z,{"aria-label":"download",size:"small",onClick:()=>{let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g"));let n=t.current.container.cloneNode(!0);if(Array.from(n.children[0].children).map(t=>e.children[0].appendChild(t)),3==n.children.length){e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[1].setAttribute("transform","translate(600, 20)");let t=function(e){let t=document.createElement("div");t.appendChild(e);let l=t.querySelector(".recharts-legend-wrapper"),n=Array.from(l.children[0].children),i="http://www.w3.org/2000/svg",r=document.createElementNS(i,"svg");r.setAttribute("xmlns",i),r.setAttribute("width",l.style.width.replace("px","")),r.setAttribute("viewBox","0 0 ".concat(parseInt(l.style.width,10)," ").concat(30*n.length));let a=25;return n.forEach(e=>{let t=e.querySelector("div"),l=e.querySelector("span"),n=document.createElementNS(i,"g");n.setAttribute("transform","translate(-30, ".concat(a,")"));let s=document.createElementNS(i,"rect");s.setAttribute("x",0),s.setAttribute("y",0),s.setAttribute("width",15),s.setAttribute("height",15),s.setAttribute("fill",t.style.backgroundColor);let o=document.createElementNS(i,"text");o.textContent=l.textContent,o.setAttribute("x",20),o.setAttribute("y",12),o.setAttribute("font-family","Calibri"),o.setAttribute("font-size","12"),o.setAttribute("fill","#000"),n.appendChild(s),n.appendChild(o),r.appendChild(n),a+=30}),r}(n.children[1]);Array.from(t.children).map(t=>e.children[1].appendChild(t))}s(e,"".concat(l,"-BarPlot"))},sx:{opacity:.5},children:(0,n.jsx)(a.Z,{})})})})},u=e=>{let{scatterRef:t,name:l}=e;return(0,n.jsx)(i.Z,{sx:{height:0},children:(0,n.jsx)(i.Z,{sx:{width:50,position:"relative",top:5,zIndex:5e3},children:(0,n.jsx)(r.Z,{"aria-label":"download",size:"small",onClick:()=>window.print(),sx:{opacity:.5},children:(0,n.jsx)(a.Z,{})})})})},h=e=>{let{scatterRef:t,name:l}=e;return(0,n.jsx)(i.Z,{sx:{height:0},children:(0,n.jsx)(i.Z,{sx:{width:50,position:"relative",top:5,zIndex:5e3},children:(0,n.jsx)(r.Z,{"aria-label":"download",size:"small",onClick:()=>{let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[0].setAttribute("transform","translate(0,70)");let n=t.current.p1.current.cloneNode(!0);Array.from(n.children[0].children[0].children).map(t=>e.children[0].appendChild(t)),e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[1].setAttribute("transform","translate(0,291)");let i=t.current.p2.current.cloneNode(!0);Array.from(i.children[0].children[0].children).map(t=>e.children[1].appendChild(t)),e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[2].setAttribute("transform","translate(0,342)");let r=t.current.p3.current.cloneNode(!0);Array.from(r.children[0].children[0].children).map(t=>e.children[2].appendChild(t)),e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[3].setAttribute("transform","translate(60,0)");let a=function(e){let t=document.createElement("div");t.appendChild(e);let l=t.querySelector(".MuiBox-root.css-0"),n=l.querySelector(".MuiBox-root.css-3cj8ml p"),i=l.querySelector(".MuiBox-root.css-85t6ji p"),r="http://www.w3.org/2000/svg",a=document.createElementNS(r,"svg");a.setAttribute("xmlns",r),a.setAttribute("width","300"),a.setAttribute("height","100"),a.setAttribute("viewBox","0 0 300 100");let s=document.createElementNS(r,"text");s.textContent=n.textContent,s.setAttribute("x","10"),s.setAttribute("y","30"),s.setAttribute("font-family","Calibri"),s.setAttribute("font-size","20"),s.setAttribute("fill","#787878");let o=document.createElementNS(r,"text");return o.textContent=i.textContent,o.setAttribute("x","10"),o.setAttribute("y","52"),o.setAttribute("font-family","Calibri"),o.setAttribute("font-size","20"),o.setAttribute("fill","#787878"),a.appendChild(s),a.appendChild(o),a}(t.current.values.cloneNode(!0));Array.from(a.children).map(t=>e.children[3].appendChild(t)),s(e,"".concat(l))},sx:{opacity:.5},children:(0,n.jsx)(a.Z,{})})})})}},90053:function(e,t,l){l.d(t,{s:function(){return n}});let n=["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52","#2E91E5","#E15F99","#1CA71C","#FB0D0D","#DA16FF","#222A2A","#B68100","#750D86","#EB663B","#511CFB","#00A08B","#FB00D1","#FC0080","#B2828D","#6C7C32","#778AAE","#862A16","#A777F1","#620042","#1616A7","#DA60CA","#6C4516","#0D2A63","#AF0038"]}}]);