(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[735],{24094:function(e,t,n){"use strict";var i=n(26314);t.Z=void 0;var a=i(n(80984)),r=n(57437),s=(0,a.default)((0,r.jsx)("path",{d:"M6 6v2h8.59L5 17.59 6.41 19 16 9.41V18h2V6z"}),"ArrowOutward");t.Z=s},62254:function(e,t,n){"use strict";var i=n(26314);t.Z=void 0;var a=i(n(80984)),r=n(57437),s=(0,a.default)((0,r.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z"}),"GridOn");t.Z=s},13716:function(e,t,n){"use strict";n.d(t,{E:function(){return r},c:function(){return s}});var i=n(57437),a=n(96507);function r(e){let{children:t,sx:n}=e;return(0,i.jsx)(a.Z,{sx:{...n},style:{scrollSnapAlign:"center",border:"0px solid yellow"},children:t})}function s(e){let{children:t,height:n}=e;return(0,i.jsx)(a.Z,{sx:{height:{height:n},scrollSnapType:"y mandatory",overflow:"auto",border:"0px solid red"},children:t})}n(2265)},88030:function(e,t,n){"use strict";n.d(t,{$Y:function(){return A},Mz:function(){return M},T3:function(){return C}});var i=n(57437),a=n(41637),r=n(96507),s=n(14172),l=n(88444),o=n(85269),c=n(46776),d=n(52481),u=n(90053),h=n(2265),x=n(41125),p=n(16573),f=n(24235),m=n(33343),g=n(50039),j=n(2047),y=n(89366),b=n(561),v=n(79857),Z=n(31863),w=n(11093);function C(e){let t,{omic:n,scatterData:s,mdataCol:l,PCA:o}=e,[c,d]=(0,h.useState)(!1),{OMIC2NAME:v}=(0,w.S)(),Z=(0,h.useRef)(),C=(0,a.tc)().mdataType[l].type;return"categorical"==C&&(t="category"),"numeric"==C&&(t="number"),(0,i.jsxs)(r.Z,{children:[(0,i.jsx)(F,{scatterRef:Z,name:v[n]}),(0,i.jsxs)(x.G,{width:600,height:550,ref:Z,margin:{top:20,right:20,bottom:20,left:20},children:[(0,i.jsx)(p.q,{}),(0,i.jsx)(f.K,{type:t,dataKey:"mdataValue",name:l,allowDuplicatedCategory:!1,children:(0,i.jsx)(m._,{value:l,offset:-10,position:"insideBottom"})}),(0,i.jsx)(g.B,{type:"number",dataKey:"projection",name:"PCA ".concat(o),children:(0,i.jsx)(m._,{value:"PCA ".concat(o),offset:20,position:"insideLeft",angle:-90})}),(0,i.jsx)(j.u,{cursor:{strokeDasharray:"3 3"},content:(0,i.jsx)(k,{})}),(0,i.jsx)(y.b,{data:s,fill:u.s[0],children:c&&(0,i.jsx)(b.e,{dataKey:"element",position:"right"})})]}),(0,i.jsx)(M,{showLabels:c,setShowLabels:d})]})}function A(e){let{omic:t,scatterData:n,selectedPlot2D:a}=e,{OMIC2NAME:s}=(0,w.S)(),l=(0,h.useRef)(),[o,c]=(0,h.useState)(!1);return(0,i.jsxs)(r.Z,{children:[(0,i.jsx)(F,{scatterRef:l,name:s[t]}),(0,i.jsxs)(x.G,{ref:l,width:600,height:550,margin:{top:20,right:20,bottom:20,left:20},children:[(0,i.jsx)(p.q,{}),(0,i.jsx)(f.K,{type:"number",dataKey:"x",name:"PCA ".concat(a.x),children:(0,i.jsx)(m._,{value:"PCA ".concat(a.x),offset:-10,position:"insideBottom"})}),(0,i.jsx)(g.B,{type:"number",dataKey:"y",name:"PCA ".concat(a.y),children:(0,i.jsx)(m._,{value:"PCA ".concat(a.y),offset:20,position:"insideLeft",angle:-90})}),(0,i.jsx)(j.u,{cursor:{strokeDasharray:"3 3"},content:(0,i.jsx)(k,{})}),Object.keys(n).length>1&&(0,i.jsx)(v.D,{verticalAlign:"top"}),Object.keys(n).map((e,t)=>(0,i.jsx)(y.b,{data:n[e],fill:u.s[t%u.s.length],name:e,children:o&&(0,i.jsx)(b.e,{dataKey:"element",position:"top"})},e))]}),(0,i.jsx)(r.Z,{sx:{mt:1},children:(0,i.jsx)(M,{showLabels:o,setShowLabels:c})})]})}let M=e=>{let{showLabels:t,setShowLabels:n}=e;return(0,i.jsx)(r.Z,{sx:{mt:0,display:"flex",justifyContent:"center"},children:(0,i.jsxs)(r.Z,{sx:{width:100,textAlign:"center",position:"relative",left:30,border:"0px solid red"},children:[(0,i.jsx)(s.Z,{component:"legend",sx:{pt:0},children:"Show Labels"}),(0,i.jsx)(l.Z,{sx:{position:"relative",top:-10,border:"0px solid red"},checked:t,onChange:e=>{n(e=>!e)},inputProps:{"aria-label":"controlled"}})]})})},k=e=>{let{active:t,payload:n}=e;return t&&n&&n.length?(0,i.jsxs)(r.Z,{className:"custom-tooltip",sx:{backgroundColor:"rgba(5,5,5,0.8)",color:"rgba(250,250,250,0.8)",border:"1px solid rgba(50, 50, 50, 0.8)",padding:1,borderRadius:1},children:[(0,i.jsx)(o.Z,{variant:"h8",sx:{display:"block"},children:"".concat(n[0].payload.element)}),(0,i.jsx)(o.Z,{variant:"h9",sx:{display:"block"},children:"".concat(n[0].name,": ").concat("string"==typeof n[0].value?n[0].value:n[0].value.toFixed(3))}),(0,i.jsx)(o.Z,{variant:"h9",sx:{display:"block"},children:"".concat(n[1].name,": ").concat(n[1].value.toFixed(3))})]}):null},F=e=>{let{scatterRef:t,name:n}=e;return(0,i.jsx)(r.Z,{sx:{height:0},children:(0,i.jsx)(r.Z,{sx:{width:50,position:"relative",top:5,zIndex:5e3},children:(0,i.jsx)(c.Z,{"aria-label":"download",size:"small",onClick:()=>{let e=t.current.container.cloneNode(!0),i=window.document.createElement("div");i.appendChild(e),(0,Z.default)(i,"PCA_Scatter-".concat(n))},sx:{opacity:.5},children:(0,i.jsx)(d.Z,{})})})})}},93735:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eK}});var i=n(57437),a=n(96507),r=n(54986),s=n(49600),l=n(65498),o=n(47042),c=n(85269),d=n(24094),u=n(2265),h=n(64728),x=n(11093),p=n(41637),f=n(46776),m=n(38939),g=n(23503),j=n(75897),y=n(53514),b=n(77370),v=n(80470),Z=n(57842),w=n(62254),C=n(55183),A=n(35843),M=n(22079),k=n(91797),F=n(52151),S=n(91928),O=n(33533),P=n(80565),D=n(37682),z=n(666);let _=(0,A.ZP)(M.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function L(){let[e,t]=u.useState(!1),n=()=>{t(!1)};return(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(f.Z,{"aria-label":"question",size:"large",onClick:()=>{t(!0)},children:(0,i.jsx)(z.Z,{fontSize:"inherit"})}),(0,i.jsxs)(_,{onClose:n,"aria-labelledby":"customized-dialog-title",open:e,maxWidth:"lg",children:[(0,i.jsx)(k.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Multi-Omics Factor Analysis (MOFA)"}),(0,i.jsx)(f.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,i.jsx)(O.default,{})}),(0,i.jsxs)(F.Z,{sx:{textAlign:"justify"},dividers:!0,children:[(0,i.jsx)(c.Z,{gutterBottom:!0,children:"This section presents the results of the Multi-Omics Factor Analysis (MOFA) [1], a multivariate statistical technique that decomposes your omics data into latent factors. These factors capture the major sources of variation across different data modalities, allowing for the identification of continuous molecular gradients or discrete subgroups of samples. MOFA operates in an unsupervised manner and runs with default parameters."}),(0,i.jsxs)(c.Z,{gutterBottom:!0,children:["At the top of this section you can find a ",(0,i.jsx)("strong",{children:"Summary Table of Latent Factor"})," with the following information:"]}),(0,i.jsx)(a.Z,{sx:{pl:3},children:(0,i.jsxs)(P.Z,{sx:{listStyleType:"disc",border:"0px solid blue",listStyle:"outside"},children:[(0,i.jsxs)(D.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,i.jsx)("strong",{children:"Variability Explained"}),": For each latent factor, the table summarizes the percentage of variability explained in each omic dataset. This information helps users understand the contribution of each factor to the overall variability within each omic type."]}),(0,i.jsxs)(D.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,i.jsx)("strong",{children:"Metadata Associations"}),": The table also includes additional rows corresponding to the variables in the uploaded Experimental Metadata table. For each metadata variable, the table displays the p-value of the linear regression between the variable and the sample projections on each latent factor. These p-values indicate the significance of the association between the factors and the experimental conditions or other metadata, helping to identify potentially meaningful biological or technical influences."]})]})})]}),(0,i.jsx)(S.Z,{children:(0,i.jsx)(a.Z,{sx:{textAlign:"justify",p:2},children:(0,i.jsx)(c.Z,{gutterBottom:!0,children:"[1] Argelaguet R, Velten B, Arnol D, Dietrich S, Zenz T, Marioni JC, Buettner F, Huber W, Stegle O. Multi-Omics Factor Analysis-a framework for unsupervised integration of multi-omics data sets. Mol Syst Biol. 2018 Jun 20;14(6):e8124. doi: 10.15252/msb.20178124. PMID: 29925568; PMCID: PMC6010767."})})})]})]})}let T="rgba(200,200,200,0.5)",R=e=>({cell:{transition:"background-color 0.3s, border-color 0.3s",border:"1px solid ".concat(T),cursor:"1D"==e?"pointer":"",padding:.5,fontSize:15,textAlign:"center",userSelect:"none","&:hover":{border:"1D"==e?"1px solid rgba(50,50,50,1)":"1px solid ".concat(T)}},selectedCell:{border:"1D"==e?"1px solid rgba(50,50,50,1)":"1px solid ".concat(T)}}),E={textAlign:"center",padding:.5,border:"1px solid ".concat(T),borderRight:"1px solid rgba(10,10,10,1)",fontSize:15,whiteSpace:"nowrap",userSelect:"none"},B=e=>({backgroundColor:e<.1?"rgba(".concat(2550*e,",").concat(200+550*e,",").concat(2550*e,", 0.5)"):"rgba(255,255,255,0.5)"}),I=e=>({backgroundColor:"rgba(".concat(255,",").concat(255-255*e/100,",").concat(255-255*e/100,", 0.8)")});function V(e){let{anova:t,explained_variance:n,setSelectedPlot:r,selectedCell:s,setSelectedCell:l,scatterMode:o,factorNames:c,colNames:d,rowNames:h}=e,{OMIC2NAME:A}=(0,x.S)(),{omics:M}=(0,p.tc)(),k=R(o),F=(0,u.useMemo)(()=>h.map(e=>c.map(n=>t[n][e].pvalue)),[t,h,c]),S=(0,u.useMemo)(()=>M.reduce((e,t)=>({...e,[t]:c.map(e=>n[t][e].Explained_Variance)}),{}),[n,c,M]),O=(e,t)=>{"2D"!=o&&(l({rowIndex:e,colIndex:t}),r({mdataCol:h[e],Factor:c[t]}),console.log("Plot scatter: MOFA ".concat(c[t]," vs ").concat(h[e])))},P=(0,u.useMemo)(()=>{let e=[];e.push(["Factor / Cond.",...d]),M.map(t=>e.push(["%Var (".concat(t.toUpperCase(),")"),...S[t]]));let t=F.map((e,t)=>[h[t],...e]);return e=[...e,...t]},[d,F,h,M,S]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Z,{sx:{height:0,width:50,zIndex:5e3,display:"flex",paddingLeft:.5},children:(0,i.jsx)(f.Z,{"aria-label":"download",size:"small",sx:{opacity:.5,position:"relative",top:-21},children:(0,i.jsx)(C.CSVLink,{data:P,filename:"MOFA_Anova_pvalues.csv",separator:",",children:(0,i.jsx)(w.Z,{})})})}),(0,i.jsxs)(m.ZP,{container:!0,children:[(0,i.jsx)(m.ZP,{item:!0,xs:2,children:(0,i.jsx)(g.Z,{sx:{margin:"auto"},children:(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(y.Z,{children:(0,i.jsx)(b.Z,{children:(0,i.jsx)(v.Z,{sx:{padding:0,textAlign:"center"},children:"Factor / Cond."})})}),(0,i.jsxs)(Z.Z,{children:[M.map((e,t)=>(0,i.jsx)(b.Z,{children:(0,i.jsx)(v.Z,{sx:{padding:0,border:0},children:(0,i.jsxs)(a.Z,{sx:{...E,borderBottom:t==M.length-1&&"1px solid rgba(10,10,10,1)"},children:["%Var (",A[e].slice(0,4),".)"]})})},e)),h.map((e,t)=>(0,i.jsx)(b.Z,{children:(0,i.jsx)(v.Z,{sx:{padding:0,border:0},children:(0,i.jsxs)(a.Z,{sx:E,children:["p-value [ ",(0,i.jsx)("strong",{children:e})," ]"]})})},t))]})]})})}),(0,i.jsx)(m.ZP,{item:!0,xs:10,children:(0,i.jsx)(g.Z,{sx:{margin:"auto"},children:(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(y.Z,{children:(0,i.jsx)(b.Z,{children:d.map((e,t)=>(0,i.jsx)(v.Z,{sx:{padding:0,textAlign:"center",userSelect:"none"},children:e},t))})}),(0,i.jsxs)(Z.Z,{children:[M.map(e=>S[e]).map((e,t)=>(0,i.jsx)(b.Z,{children:e.map((e,n)=>(0,i.jsx)(v.Z,{sx:{padding:0,border:0},children:(0,i.jsx)(a.Z,{sx:{padding:.5,border:"1px solid ".concat(T),borderBottom:t==M.length-1&&"1px solid rgba(10,10,10,1)",fontSize:15,textAlign:"center",backgroundColor:I(e),userSelect:"none"},children:e.toFixed(2)})},n))},t)),F.map((e,t)=>(0,i.jsx)(b.Z,{children:e.map((e,n)=>(0,i.jsx)(v.Z,{sx:{padding:0,border:0},onClick:()=>O(t,n),style:{minWidth:100},children:(0,i.jsx)(a.Z,{sx:s&&s.rowIndex===t&&s.colIndex===n?{...k.cell,...k.selectedCell,...B(e)}:{...k.cell,...B(e)},children:e<.001?e.toExponential(3):e.toFixed(3)})},n))},t))]})]})})})]})]})}var N=n(50294);function q(e){let{factorNames:t,rowNames:n,selectedPlot2D:r,setSelectedPlot2D:s}=e,l=(0,h.mX)(),{mdataType:o}=(0,p.tc)();return(0,i.jsxs)(a.Z,{sx:{height:75,display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(a.Z,{sx:{width:"25%"},children:(0,i.jsx)(N.$S,{options:t.map(e=>({label:e,value:e})),onChange:e=>{s(t=>({...t,x:e.value})),l({type:"set-selected-plot-2d-mofa",mode:{...r,x:e.value}})},value:{label:"".concat(r.x),value:r.x},label:"X axis"})}),(0,i.jsx)(a.Z,{sx:{width:"25%"},children:(0,i.jsx)(N.$S,{options:t.map(e=>({label:e,value:e})),onChange:e=>{s(t=>({...t,y:e.value})),l({type:"set-selected-plot-2d-mofa",mode:{...r,y:e.value}})},value:{label:"".concat(r.y),value:r.y},label:"Y axis"})}),(0,i.jsx)(a.Z,{sx:{width:"40%"},children:(0,i.jsx)(N.$S,{options:[{label:"No color",value:"No color"},...n.filter(e=>"categorical"==o[e].type).map(e=>({label:e,value:e}))],onChange:e=>{s(t=>({...t,g:e.value})),l({type:"set-selected-plot-2d-mofa",mode:{...r,g:e.value}})},value:{label:r.g,value:r.g},label:"Color by"})})]})}function K(e){let{factorNames:t,rowNames:n,selectedPlot:r,setSelectedPlot:s,setSelectedCell:l}=e;(0,h.mX)();let{mdataType:o}=(0,p.tc)();return(0,i.jsxs)(a.Z,{sx:{height:75,display:"flex",justifyContent:"space-around"},children:[(0,i.jsx)(a.Z,{sx:{width:"25%"},children:(0,i.jsx)(N.$S,{options:t.map(e=>({label:e,value:e})),onChange:e=>{s(t=>({...t,Factor:e.value})),l(n=>({...n,colIndex:t.map((e,t)=>[e,t]).filter(t=>t[0]==e.value)[0][1]}))},value:{label:"".concat(r.Factor),value:r.Factor},label:"Factor"})}),(0,i.jsx)(a.Z,{sx:{width:"40%"},children:(0,i.jsx)(N.$S,{options:n.filter(e=>"categorical"==o[e].type).map(e=>({label:e,value:e})),onChange:e=>{s(t=>({...t,mdataCol:e.value})),l(t=>({...t,rowIndex:n.map((e,t)=>[e,t]).filter(t=>t[0]==e.value)[0][1]}))},value:{label:r.mdataCol,value:r.mdataCol},label:"Group by"})})]})}var H=n(92233),U=n(5301),W=function(e){let{scatterMode:t,setScatterMode:n,disable2D:r}=e,s=(0,h.mX)();return(0,i.jsx)(a.Z,{sx:{textAlign:"center"},children:(0,i.jsx)(a.Z,{sx:{mb:2},children:(0,i.jsxs)(H.Z,{color:"primary",value:t,exclusive:!0,onChange:(e,t)=>{n(e.target.value),s({type:"set-scatter-mode-mofa",mode:e.target.value})},"aria-label":"Platform",children:[(0,i.jsx)(U.Z,{value:"1D",children:"1D"}),(0,i.jsx)(U.Z,{value:"2D",disabled:r,children:"2D"})]})})})},J=n(90053),G=n(35048),X=n(41125),$=n(16573),Y=n(24235),Q=n(33343),ee=n(50039),et=n(2047),en=n(89366),ei=n(561),ea=n(79857),er=n(2678),es=n(88030);let el=e=>{let{active:t,payload:n}=e;return t&&n&&n.length?(0,i.jsxs)(a.Z,{className:"custom-tooltip",sx:{backgroundColor:"rgba(5,5,5,0.8)",color:"rgba(250,250,250,0.8)",border:"1px solid rgba(50, 50, 50, 0.8)",padding:1,borderRadius:1},children:[(0,i.jsx)(c.Z,{variant:"h8",sx:{display:"block"},children:"".concat(n[0].payload.element)}),(0,i.jsx)(c.Z,{variant:"h9",sx:{display:"block"},children:"".concat(n[0].name,": ").concat("string"==typeof n[0].value?n[0].value:n[0].value.toFixed(3))}),(0,i.jsx)(c.Z,{variant:"h9",sx:{display:"block"},children:"".concat(n[1].name,": ").concat(n[1].value.toFixed(3))})]}):null};function eo(e){let t,{scatterData:n,mdataCol:r,Factor:s}=e,[l,o]=(0,u.useState)(!1),c=(0,u.useRef)(),d=(0,p.tc)().mdataType[r].type;return"categorical"==d&&(t="category"),"numeric"==d&&(t="number"),(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(es.Mz,{showLabels:l,setShowLabels:o}),(0,i.jsx)(er.L,{scatterRef:c,fileName:"MOFA_Scatter_1D"}),(0,i.jsx)(G.h,{width:"100%",height:400,children:(0,i.jsxs)(X.G,{ref:c,margin:{top:5,right:20,bottom:20,left:20},children:[(0,i.jsx)($.q,{}),(0,i.jsx)(Y.K,{type:t,dataKey:"mdataValue",name:r,allowDuplicatedCategory:!1,children:(0,i.jsx)(Q._,{value:r,offset:-10,position:"insideBottom"})}),(0,i.jsx)(ee.B,{type:"number",dataKey:"projection",name:"".concat(s),children:(0,i.jsx)(Q._,{value:"".concat(s),offset:20,position:"insideLeft",angle:-90})}),(0,i.jsx)(et.u,{cursor:{strokeDasharray:"3 3"},content:(0,i.jsx)(el,{})}),(0,i.jsx)(en.b,{data:n,fill:J.s[0],children:l&&(0,i.jsx)(ei.e,{dataKey:"element",position:"right"})})]})})]})}function ec(e){let{scatterData:t,selectedPlot2D:n}=e,[r,s]=(0,u.useState)(!1),l=(0,u.useRef)();return(0,i.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,i.jsxs)(a.Z,{sx:{width:600},children:[(0,i.jsx)(es.Mz,{showLabels:r,setShowLabels:s}),(0,i.jsx)(er.L,{scatterRef:l,fileName:"MOFA_Scatter_2D"}),(0,i.jsxs)(X.G,{ref:l,width:600,height:500,margin:{top:5,right:20,bottom:20,left:20},children:[(0,i.jsx)($.q,{}),(0,i.jsx)(Y.K,{type:"number",dataKey:"x",name:"".concat(n.x),children:(0,i.jsx)(Q._,{value:"".concat(n.x),offset:-10,position:"insideBottom"})}),(0,i.jsx)(ee.B,{type:"number",dataKey:"y",name:"".concat(n.y),children:(0,i.jsx)(Q._,{value:"".concat(n.y),offset:20,position:"insideLeft",angle:-90})}),(0,i.jsx)(et.u,{cursor:{strokeDasharray:"3 3"},content:(0,i.jsx)(el,{})}),Object.keys(t).length>1&&(0,i.jsx)(ea.D,{verticalAlign:"top"}),Object.keys(t).map((e,n)=>(0,i.jsx)(en.b,{data:t[e],fill:J.s[n%J.s.length],name:e,children:r&&(0,i.jsx)(ei.e,{dataKey:"element",position:"top"})},e))]})]})})}let ed=(0,A.ZP)(M.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function eu(){let[e,t]=u.useState(!1),n=()=>{t(!1)};return(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(f.Z,{"aria-label":"question",size:"large",onClick:()=>{t(!0)},children:(0,i.jsx)(z.Z,{fontSize:"inherit"})}),(0,i.jsxs)(ed,{onClose:n,"aria-labelledby":"customized-dialog-title",open:e,maxWidth:"lg",children:[(0,i.jsx)(k.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Multi-Omics Factor Analysis (MOFA) - Loading Plot"}),(0,i.jsx)(f.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,i.jsx)(O.default,{})}),(0,i.jsxs)(F.Z,{sx:{textAlign:"justify"},dividers:!0,children:[(0,i.jsx)(c.Z,{gutterBottom:!0,children:"This subsection allows you to visualize the projection of your samples onto the latent factors calculated by MOFA, providing insights into how these factors capture variability across your multi-omics data. The scatter plot can be viewed in two modes:"}),(0,i.jsx)(a.Z,{sx:{pl:3},children:(0,i.jsxs)(P.Z,{sx:{listStyleType:"disc",border:"0px solid blue",listStyle:"outside"},children:[(0,i.jsxs)(D.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,i.jsx)("strong",{children:"1D Mode (Default)"}),(0,i.jsxs)(P.Z,{sx:{listStyleType:"disc",border:"0px solid blue",listStyle:"outside"},children:[(0,i.jsx)(D.ZP,{sx:{display:"list-item",textAlign:"justify"},children:"In this mode, the Y axis represents the projection of samples on a single selected factor, while the X axis displays the different sample groups. This view is particularly useful for comparing how different groups of samples project onto the selected factor."}),(0,i.jsxs)(D.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,i.jsx)("strong",{children:"Further Exploration:"})," When using the 1D mode, you can explore the selected factor in greater detail using additional sections below, which include further analyses or visualizations related to the factor."]})]})]}),(0,i.jsxs)(D.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,i.jsx)("strong",{children:"2D Mode"}),(0,i.jsxs)(P.Z,{sx:{listStyleType:"disc",border:"0px solid blue",listStyle:"outside"},children:[(0,i.jsx)(D.ZP,{sx:{display:"list-item",textAlign:"justify"},children:"This mode allows you to visualize the relationship between two factors simultaneously. You can select one factor to be displayed on the X axis and another on the Y axis."}),(0,i.jsxs)(D.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,i.jsx)("strong",{children:"Color-Coding by Group"}),": The data points representing samples can be color-coded based on different grouping criteria, such as experimental conditions or metadata categories. This helps in identifying patterns, subgroups, or gradients within the data."]})]})]})]})})]}),(0,i.jsx)(S.Z,{children:(0,i.jsx)(a.Z,{sx:{textAlign:"justify",p:2},children:(0,i.jsx)(c.Z,{gutterBottom:!0,children:"[1] Argelaguet R, Velten B, Arnol D, Dietrich S, Zenz T, Marioni JC, Buettner F, Huber W, Stegle O. Multi-Omics Factor Analysis-a framework for unsupervised integration of multi-omics data sets. Mol Syst Biol. 2018 Jun 20;14(6):e8124. doi: 10.15252/msb.20178124. PMID: 29925568; PMCID: PMC6010767."})})})]})]})}let eh=(e,t,n,i,a,r)=>{let s=null;if(n&&"1D"==t){s=[];let t=a.column(n.mdataCol),i={};t.index.map((e,n)=>{i[e]=t.values[n]}),Object.keys(e).map(t=>{s.push({element:t,mdataValue:i[t],projection:e[t][n.Factor]})}),"categorical"==r[n.mdataCol].type&&s.sort((e,t)=>r[n.mdataCol].levels.indexOf(e.mdataValue)-r[n.mdataCol].levels.indexOf(t.mdataValue))}else"2D"==t&&(s={},Object.keys(r).includes(i.g)?r[i.g].levels.map(t=>{s[t]=[...r[i.g].level2id[t].map(t=>Object.keys(e).includes(t)?{element:t,x:e[t][i.x],y:e[t][i.y]}:null).filter(e=>null!=e)]}):s[i.g]=Object.keys(e).map(t=>({element:t,x:e[t][i.x],y:e[t][i.y]})));return s};var ex=function(e){let{scatterMode:t,setScatterMode:n,selectedPlot:r,setSelectedPlot:s,setSelectedCell:l,selectedPlot2D:o,setSelectedPlot2D:c,factorNames:d,rowNames:h,projections:x}=e,{mdata:f}=(0,p.tc)().user,{mdataType:m}=(0,p.tc)(),g=(0,u.useMemo)(()=>eh(x,t,r,o,f,m),[x,t,r,o,f,m]);return(0,i.jsxs)(a.Z,{sx:{},children:[(0,i.jsx)(a.Z,{sx:{height:0},children:(0,i.jsx)(eu,{})}),(0,i.jsxs)(a.Z,{sx:{pt:2},children:[(0,i.jsx)(W,{scatterMode:t,setScatterMode:n,disable2D:Object.keys(Object.values(x)[0]).length<2}),(0,i.jsx)(a.Z,{sx:{px:3,pb:2,textAlign:"center",width:600,margin:"auto"},children:"1D"==t?(0,i.jsx)(K,{factorNames:d,rowNames:h,selectedPlot:r,setSelectedPlot:s,setSelectedCell:l}):(0,i.jsx)(q,{factorNames:d,rowNames:h,selectedPlot2D:o,setSelectedPlot2D:c})})]}),(0,i.jsx)(a.Z,{sx:{pb:2},children:g&&(0,i.jsx)(a.Z,{sx:{width:750,margin:"auto"},children:"1D"==t?(0,i.jsx)(eo,{scatterData:g,mdataCol:r.mdataCol,Factor:r.Factor}):(0,i.jsx)(ec,{scatterData:g,selectedPlot2D:o})})})]})},ep=n(13716),ef=n(73295),em=n(67248),eg=n(38227),ej=n(20003),ey=n(27978),eb=n(19223),ev=n(15632);function eZ(e){return"".concat(e)}var ew=function(e){let{omic:t,fLVec:n,nFeatRef:r,thrLRef:s,plotHeatMap:l}=e,[o,d]=(0,u.useState)({down:0,up:0}),[h,x]=(0,u.useState)({down:0,up:0});(0,u.useEffect)(()=>{let e={down:Math.floor(.01*n.length),up:Math.floor(.01*n.length)};x(e),r.current[t]=e;let i={down:n[e.down][1],up:n[n.length-e.up-1][1]};d(i),s.current[t]=i},[n,r,t,s]),(0,u.useEffect)(()=>{let e=setTimeout(l,100);return()=>clearInterval(e)},[h,l]);let p=(0,u.useMemo)(()=>{let e=Math.min(200,n.length),t=Math.floor(n.length/e);return n.map(e=>({f:e[0],loading:Math.floor(1e4*e[1])/1e4,quantile:e[2]})).filter((e,i)=>i%t==0||i==n.length-1).map(e=>e.loading>o.down&&e.loading<o.up?{...e,qNS:e.quantile}:{...e,qS:e.quantile})},[n,o]),f=e=>{let[i,a]=e,l={down:Math.min(i,0),up:Math.max(a,0)};d(l),s.current[t]=l;let o={down:n.filter(e=>e[1]<l.down).length,up:n.filter(e=>e[1]>l.up).length};x(o),r.current[t]=o},m=e=>{if(e<0){d(t=>({...t,down:e})),s.current[t].down=e;let i=n.filter(t=>t[1]<e).length;x(e=>({...e,down:i})),r.current[t].down=i}else{d(t=>({...t,up:e})),s.current[t].up=e;let i=n.filter(t=>t[1]>e).length;x(e=>({...e,up:i})),r.current[t].up=i}},g=(e,i)=>{let a=parseInt(e);if(isNaN(a)){x(e=>({...e,[i]:0}));return}if("down"==i){let e=n.filter(e=>e[1]<0);a>=0&&a<e.length?(x(e=>({...e,down:a})),r.current[t].down=a,d(t=>({...t,down:e[a][1]})),s.current[t].down=e[a][1]):a>=e.length&&(x(t=>({...t,down:e.length})),r.current[t].down=e.length,d(e=>({...e,down:0})),s.current[t].down=0)}if("up"==i){let e=n.filter(e=>e[1]>0);a>=0&&a<e.length?(x(e=>({...e,up:a})),r.current[t].up=a,d(t=>({...t,up:e[e.length-a-1][1]})),s.current[t].up=e[e.length-a-1][1]):a<0?(x(e=>({...e,up:0})),r.current[t].up=0,d(t=>({...t,up:e[e.length-1][1]})),s.current[t].up=e[e.length-1][1]):a>=e.length&&(x(t=>({...t,up:e.length})),r.current[t].up=e.length,d(e=>({...e,up:0})),s.current[t].up=0)}},j=Math.ceil(1e3*Math.max(Math.abs(n[0][1]),Math.abs(n[n.length-1][1])))/1e3;return(0,i.jsx)(a.Z,{sx:{overflow:"auto"},children:(0,i.jsxs)(a.Z,{sx:{mt:1,display:"block",m:"auto",width:400},children:[(0,i.jsx)(a.Z,{sx:{width:400,position:"relative"},children:(0,i.jsxs)(eg.w,{data:p,margin:{top:5,right:30,left:20,bottom:20},width:400,height:200,onClick:e=>null!=e&&m(e.activeLabel),children:[(0,i.jsx)($.q,{strokeDasharray:"3 3"}),(0,i.jsx)(Y.K,{dataKey:"loading",type:"number",name:"Loadings",domain:[-j,j],label:{value:"Loading",position:"insideBottom",offset:-10},ticks:(0,ev.jI)(-j,j,6)}),(0,i.jsx)(ee.B,{type:"number",label:{value:"Quantile",position:"insideLeft",angle:-90,dy:30,offset:-5}}),(0,i.jsx)(ej.z,{x1:o.down,x2:o.up,y1:0,y2:1}),(0,i.jsx)(ey.d,{x:0,stroke:"#333333",strokeDasharray:"3 3"}),(0,i.jsx)(eb.x,{type:"monotone",dataKey:"quantile",stroke:"#aaaaaa",dot:!1,strokeWidth:1}),(0,i.jsx)(eb.x,{type:"monotone",dataKey:"qS",stroke:"#8884d8",dot:!1,strokeWidth:3})]})}),(0,i.jsx)(a.Z,{sx:{width:290,position:"relative",left:80},children:(0,i.jsx)(ef.ZP,{track:"inverted",value:[Math.floor(1e3*o.down)/1e3,Math.ceil(1e3*o.up)/1e3],getAriaValueText:eZ,valueLabelDisplay:"auto",step:.001,min:-j,max:j,onChange:e=>f(e.target.value)})}),(0,i.jsxs)(a.Z,{sx:{width:290,position:"relative",left:80,display:"flex",textAlign:"center",justifyContent:"space-around"},children:[(0,i.jsxs)(a.Z,{sx:{width:"33%"},children:[(0,i.jsx)(c.Z,{variant:"body2",children:"Negatively Associated"}),(0,i.jsx)(em.Z,{size:"small",value:h.down,inputProps:{min:0,style:{textAlign:"center",width:45,height:12}},onChange:e=>g(e.target.value,"down")})]}),(0,i.jsxs)(a.Z,{sx:{width:"33%"},children:[(0,i.jsx)(c.Z,{variant:"body2",children:"Positively Associated"}),(0,i.jsx)(em.Z,{size:"small",value:h.up,inputProps:{min:0,style:{textAlign:"center",width:45,height:12}},onChange:e=>g(e.target.value,"up")})]})]})]})})};let eC=(0,A.ZP)(M.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function eA(){let[e,t]=u.useState(!1),n=()=>{t(!1)};return(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(f.Z,{"aria-label":"question",size:"large",onClick:()=>{t(!0)},children:(0,i.jsx)(z.Z,{fontSize:"inherit"})}),(0,i.jsxs)(eC,{onClose:n,"aria-labelledby":"customized-dialog-title",open:e,maxWidth:"lg",children:[(0,i.jsx)(k.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Multi-Omics Factor Analysis (MOFA) - Loading Plot"}),(0,i.jsx)(f.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,i.jsx)(O.default,{})}),(0,i.jsxs)(F.Z,{sx:{textAlign:"justify"},dividers:!0,children:[(0,i.jsxs)(c.Z,{gutterBottom:!0,children:["This subsection provides insights into how individual biomolecules contribute to each latent factor calculated by MOFA. For each omic, users can visualize the",(0,i.jsx)("strong",{children:"loading distribution"})," of biomolecules, which represents the strength and direction (positive or negative) of their association within the selected factor."]}),(0,i.jsxs)(c.Z,{gutterBottom:!0,children:["Users can ",(0,i.jsx)("strong",{children:"select the top most positively and negatively associated"})," biomolecules for the chosen factor within each omic. This selection is crucial for deeper analysis as these biomolecules are the key drivers of the factor’s influence. The selected biomolecules are used to generate a heatmap, allowing for visual exploration of their expression patterns across samples."]}),(0,i.jsxs)(c.Z,{gutterBottom:!0,children:["At the bottom of the page, a button directs users to a ",(0,i.jsx)("strong",{children:"detailed exploratory subsection"})," where the selected biomolecules can be further analyzed, helping to reveal more about their roles and significance within the dataset."]})]}),(0,i.jsx)(S.Z,{children:(0,i.jsx)(a.Z,{sx:{textAlign:"justify",p:2},children:(0,i.jsx)(c.Z,{gutterBottom:!0,children:"[1] Argelaguet R, Velten B, Arnol D, Dietrich S, Zenz T, Marioni JC, Buettner F, Huber W, Stegle O. Multi-Omics Factor Analysis-a framework for unsupervised integration of multi-omics data sets. Mol Syst Biol. 2018 Jun 20;14(6):e8124. doi: 10.15252/msb.20178124. PMID: 29925568; PMCID: PMC6010767."})})})]})]})}var eM=function(e){let{fLVec:t,nFeatRef:n,thrLRef:r,plotHeatMap:s}=e,{omics:l}=(0,p.tc)(),{OMIC2NAME:o}=(0,x.S)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Z,{sx:{height:0},children:(0,i.jsx)(eA,{})}),(0,i.jsx)(a.Z,{sx:{my:3,display:"flex",justifyContent:"space-evenly"},children:l.map((e,l)=>(0,i.jsxs)(a.Z,{sx:{width:"31%"},children:[(0,i.jsx)(c.Z,{variant:"h6",sx:{textAlign:"center"},children:o[e]}),(0,i.jsx)(ew,{omic:e,fLVec:t[e],nFeatRef:n,thrLRef:r,plotHeatMap:s})]},l))})]})},ek=n(63870);function eF(e){let{omic:t,myIndex:n,myFeat:r,mdataCol:s,zLegend:l}=e,o=2*(0,p.tc)().omics.length,c=(0,p.tc)().norm["x".concat(t)],d=(0,p.tc)().mdataType[s],h=(0,u.useMemo)(()=>eO(n,r,c,d),[n,r,c,d]);return(0,i.jsx)(a.Z,{sx:{height:510,width:1160/o,marginRight:.5,border:"2px solid #444444"},children:(0,i.jsx)(ek.Tu,{data:h,margin:{top:0,right:0,bottom:0,left:0},axisTop:{tickSize:0,tickPadding:0,tickRotation:0,legend:"",legendOffset:0},colors:{type:"diverging",scheme:"red_blue",minValue:l.min,maxValue:l.max},emptyColor:"#555555",isInteractive:!1,animate:!1,enableLabels:!1})})}let eS=e=>{let{myIndex:t,mdataCol:n,showBorder:a,showLevel:r}=e,s=(0,p.tc)().mdataType[n],l=(0,u.useMemo)(()=>eO(t,[],null,s),[t,s]),o=[];o=r?l.map(e=>e.id.split("##")).map(e=>e[e.length-1]):l.map(e=>e.id.split("##")).map(e=>e.slice(0,-1).join("##"));let d={};o.forEach(e=>{d[e]=(d[e]||0)+1});let h=[...new Set(o)];return(0,i.jsx)("table",{children:(0,i.jsx)("tbody",{children:h.map((e,t)=>(0,i.jsx)("tr",{style:{height:500*d[e]/o.length,borderTop:a&&"2px solid #444444",borderBottom:a&&"2px solid #444444"},children:(0,i.jsx)("td",{style:{paddingRight:5},children:(0,i.jsx)(c.Z,{variant:"h7",children:e})})},t))})})},eO=(e,t,n,i)=>{let a={};return e.map(e=>{a[e]=[]}),t.map(t=>{let i=n.column(t);i.index.map((e,t)=>[e,i.values[t]]).filter(t=>e.includes(t[0])).map(e=>{a[e[0]].push({x:t,y:-e[1]})})}),"categorical"==i.type?a=i.levels.map(t=>i.level2id[t].filter(t=>e.includes(t)).map(e=>({id:"".concat(e,"##").concat(t),data:a[e]}))).flat():"numeric"==i.type&&(a=e.map(e=>({id:e,data:a[e]}))),a};var eP=function(e){let{nFeatRef:t}=e,{OMIC2NAME:n}=(0,x.S)(),r=(0,p.tc)().omics;return(0,i.jsxs)(a.Z,{sx:{mt:1,display:"flex",justifyContent:"center",textAlign:"center"},children:[(0,i.jsx)(a.Z,{sx:{width:"5%"}}),r.map(e=>(0,i.jsx)(a.Z,{children:(t.current[e].up>0||t.current[e].down>0)&&(0,i.jsxs)(a.Z,{sx:{marginRight:.5},children:[(0,i.jsx)(a.Z,{children:(0,i.jsx)(c.Z,{variant:"h6",children:n[e]})}),(0,i.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-around"},children:[t.current[e].down>0&&(0,i.jsx)(a.Z,{sx:{width:1160/(2*r.length),marginRight:.5},children:(0,i.jsx)(a.Z,{children:"Negatively Associated"})}),t.current[e].up>0&&(0,i.jsx)(a.Z,{sx:{width:1160/(2*r.length)},children:(0,i.jsx)(a.Z,{children:"Positively Associated"})})]})]},e)},e)),(0,i.jsx)(a.Z,{sx:{width:"5%"}})]})};let eD=e=>{let{a:t,b:n,updateZLegend:a,omic:r,plotHeatMap:s}=e,[l,o]=(0,u.useState)({min:t,max:n}),c=(0,h.mX)(),d=(t+n)/2,x={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"10px",background:"linear-gradient(to right, ".concat("#1f4e79",", ").concat("rgb(255, 255, 255)"," ").concat((d-t)/(n-t)*100,"%, ").concat("#9e2a2b",")"),color:"#fff",height:"15px"},p=(e,t)=>{let n=Number(t);o(n=>({...n,[e]:t})),"number"!=typeof n||isNaN(n)||(a(t=>{t[r][e]=n}),c({type:"update-zlegend",omic:r,minmax:e,numValue:n}),s())};return(0,i.jsxs)("div",{style:x,children:[(0,i.jsx)("div",{children:(0,i.jsx)("input",{type:"text",style:{width:30,height:20,textAlign:"center"},value:l.min,onChange:e=>p("min",e.target.value)})}),(0,i.jsx)("div",{style:{color:"black"},children:d.toFixed(0)}),(0,i.jsx)("div",{children:(0,i.jsx)("input",{type:"text",style:{width:30,height:20,textAlign:"center"},value:l.max,onChange:e=>p("max",e.target.value)})})]})};var ez=e=>{let{nFeatRef:t,zLegend:n,updateZLegend:r,plotHeatMap:s}=e,l=(0,p.tc)().omics;return(0,i.jsxs)(a.Z,{sx:{mt:1,display:"flex",justifyContent:"center",textAlign:"center"},children:[(0,i.jsx)(a.Z,{sx:{width:"5%"}}),l.map(e=>(0,i.jsx)(a.Z,{sx:{mr:.7},children:(t.current[e].up>0||t.current[e].down>0)&&(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(eD,{a:n[e].min,b:n[e].max,updateZLegend:r,omic:e,plotHeatMap:s}),(0,i.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-around"},children:[t.current[e].down>0&&(0,i.jsx)(a.Z,{sx:{width:1160/(2*l.length)}}),t.current[e].up>0&&(0,i.jsx)(a.Z,{sx:{width:1160/(2*l.length)}})]})]})},e)),(0,i.jsx)(a.Z,{sx:{width:"5%"}})]})},e_=n(36970);let eL=(0,A.ZP)(M.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function eT(){let[e,t]=u.useState(!1),n=()=>{t(!1)};return(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(f.Z,{"aria-label":"question",size:"large",onClick:()=>{t(!0)},children:(0,i.jsx)(z.Z,{fontSize:"inherit"})}),(0,i.jsxs)(eL,{onClose:n,"aria-labelledby":"customized-dialog-title",open:e,maxWidth:"lg",children:[(0,i.jsx)(k.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Multi-Omics Factor Analysis (MOFA) - Heatmap"}),(0,i.jsx)(f.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,i.jsx)(O.default,{})}),(0,i.jsxs)(F.Z,{sx:{textAlign:"justify"},dividers:!0,children:[(0,i.jsx)(c.Z,{gutterBottom:!0,children:"This subsection visualizes the quantitative values of the biomolecules selected in the Loading Plot Distribution section, providing a comprehensive overview of their expression patterns across samples."}),(0,i.jsxs)(a.Z,{sx:{pl:3},children:[(0,i.jsx)(c.Z,{gutterBottom:!0,children:(0,i.jsx)("strong",{children:"Heatmap Representation:"})}),(0,i.jsxs)(P.Z,{sx:{listStyleType:"disc",border:"0px solid blue",listStyle:"outside"},children:[(0,i.jsxs)(D.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,i.jsx)("strong",{children:"Columns"}),": Each column represents a biomolecule from the selected omics, showcasing their quantitative values."]}),(0,i.jsxs)(D.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,i.jsx)("strong",{children:"Rows"}),": Each row corresponds to a sample, grouped according to the metadata variable selected at the top of the section."]}),(0,i.jsxs)(D.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,i.jsx)("strong",{children:"Color Range Customization"}),": The heatmap’s color range can be adjusted using the legend at the bottom."]})]}),(0,i.jsx)(c.Z,{gutterBottom:!0,children:"Located at the bottom of the section, the Explore Features button allows for an in-depth exploration of the biomolecules displayed in the heatmap. Clicking it will take you to a detailed analysis section, where you can further investigate the selected biomolecules and delve into their biological significance."})]})]}),(0,i.jsx)(S.Z,{children:(0,i.jsx)(a.Z,{sx:{textAlign:"justify",p:2},children:(0,i.jsx)(c.Z,{gutterBottom:!0,children:"[1] Argelaguet R, Velten B, Arnol D, Dietrich S, Zenz T, Marioni JC, Buettner F, Huber W, Stegle O. Multi-Omics Factor Analysis-a framework for unsupervised integration of multi-omics data sets. Mol Syst Biol. 2018 Jun 20;14(6):e8124. doi: 10.15252/msb.20178124. PMID: 29925568; PMCID: PMC6010767."})})})]})]})}var eR=function(e){let{nFeatRef:t,fLVec:n,mdataCol:r,plotHM:s,plotHeatMap:l}=e,{omics:o}=(0,p.tc)(),c=(0,p.tc)().user.mdata.shape[0]<=24;(0,p.tc)().user.mdata.columns[0];let d=(0,h.a0)().MOFA.displayOpts.zLegend,[x,f]=(0,e_.x)(o.reduce((e,t)=>({...e,[t]:{min:d[t].min,max:d[t].max}}),{})),m=(0,p.tc)().norm,g=(0,u.useMemo)(()=>o.map(e=>m["x".concat(e)].index).reduce((e,t)=>e.filter(e=>t.includes(e))),[o,m]),j=(0,u.useMemo)(()=>{console.log(s);let e={};return o.map(i=>{e[i]={down:n[i].filter((e,n)=>n<t.current[i].down).map(e=>e[0]),up:n[i].filter((e,a)=>a>=n[i].length-t.current[i].up).map(e=>e[0])}}),e},[o,t,n,s]);return(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(a.Z,{children:(0,i.jsx)(eT,{})}),(0,i.jsx)(eP,{nFeatRef:t}),(0,i.jsxs)(a.Z,{sx:{mt:1,display:"flex",justifyContent:"center"},children:[(0,i.jsx)(a.Z,{sx:{width:"5%",display:"flex",justifyContent:"flex-end"},children:(0,i.jsx)(eS,{myIndex:g,mdataCol:r,showBorder:!0,showLevel:!0})}),o.map(e=>(0,i.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"center"},children:[t.current[e].down>0&&(0,i.jsx)(eF,{omic:e,myIndex:g,myFeat:j[e].down,mdataCol:r,zLegend:x[e]}),t.current[e].up>0&&(0,i.jsx)(eF,{omic:e,myIndex:g,myFeat:j[e].up,mdataCol:r,zLegend:x[e]})]},e)),(0,i.jsx)(a.Z,{sx:{width:"5%",display:"flex",justifyContent:"flex-start"},children:c&&(0,i.jsx)(eS,{myIndex:g,mdataCol:r,showBorder:!1,showLevel:!1})})]}),(0,i.jsx)(ez,{nFeatRef:t,zLegend:x,updateZLegend:f,plotHeatMap:l})]})},eE=n(98864),eB=n.n(eE);let eI=eB()(()=>Promise.all([n.e(813),n.e(261),n.e(30),n.e(378),n.e(794),n.e(164)]).then(n.bind(n,47169)),{loadableGenerated:{webpack:()=>[47169]}}),eV=e=>{if(null==e)return[null,null];let t=Object.keys(e.anova),n=Object.keys(e.explained_variance);t=t.map(t=>({f:t,var:n.reduce((n,i)=>n+e.explained_variance[i][t].Explained_Variance,0)})).filter(e=>e.var>1.5).map(e=>e.f);let i=t.map((e,t)=>t+1);return[i,t]},eN=(e,t)=>null==e?null:Object.keys(e.anova[t[0]]).map(n=>[n,t.map(t=>0==Object.keys(e.anova[t][n]).length).every(e=>e)]).filter(e=>!e[1]).map(e=>e[0]),eq=(e,t,n)=>{if(null==e||null==t)return null;let i=n.reduce((e,t)=>({...e,[t]:[]}),{});return Object.keys(i).map(n=>{i[n]=Object.keys(e.loadings[n][t.Factor]).map(i=>[i,e.loadings[n][t.Factor][i]]),i[n].sort((e,t)=>e[1]-t[1]),i[n]=i[n].map((e,t)=>[...e,(t+1)/i[n].length])}),i};var eK=function(){let e=(0,h.mX)(),{API_URL:t}=(0,x.S)(),{jobID:n}=(0,p.tc)(),f=(0,h.a0)().MOFA.data,[m,g]=(0,u.useState)(f),j=(0,h.a0)().MOFA.displayOpts.scatterMode,[y,b]=(0,u.useState)(j),v=(0,h.a0)().MOFA.displayOpts.selectedPlot,[Z,w]=(0,u.useState)(v),C=(0,h.a0)().MOFA.displayOpts.selectedCell,[A,M]=(0,u.useState)(C),k=(0,h.a0)().MOFA.displayOpts.selectedPlot2D,[F,S]=(0,u.useState)(k),O=(0,u.useCallback)(async()=>{if(console.log("Fetching MOFA data"),null==f){let i=await fetch("".concat(t,"/get_mofa/").concat(n)),a=await i.json();g(a.dataMOFA),e({type:"set-mofa-data",data:a.dataMOFA})}},[f,t,e,n]);(0,u.useEffect)(()=>{let e=setTimeout(O,100);return()=>clearTimeout(e)},[O]);let[P,D]=(0,u.useMemo)(()=>eV(m),[m]),z=(0,u.useMemo)(()=>eN(m,D),[m,D]);null!=D&&null!=z&&null==Z&&(w({mdataCol:z[0],Factor:D[0]}),M({rowIndex:0,colIndex:0})),(0,u.useEffect)(()=>{if(null!=D&&null!=z&&null==F){let t={x:D[0],y:D.length>1?D[1]:D[0],g:"No color"};S(t),e({type:"set-selected-plot-2d-mofa",mode:t})}},[D,z,F,e]);let[_,T]=(0,u.useState)(!1),R=(0,u.useCallback)(()=>{console.log("Refresh"),T(e=>!e)},[T]);(0,u.useEffect)(()=>{let e=setTimeout(R,1e3);return()=>clearTimeout(e)},[T,R]),(0,u.useEffect)(()=>{null!=Z&&null!=A&&(R(),e({type:"set-selected-plot-cell-mofa",rowIndex:A.rowIndex,colIndex:A.colIndex,mdataCol:Z.mdataCol,Factor:Z.Factor}))},[Z,A,e,R]);let{omics:E}=(0,p.tc)(),B=(0,u.useRef)(E.reduce((e,t)=>({...e,[t]:{down:0,up:0}}),{})),I=(0,u.useRef)(E.reduce((e,t)=>({...e,[t]:{down:0,up:0}}),{})),N=(0,u.useMemo)(()=>eq(m,Z,E),[m,Z,E]),[q,K]=(0,u.useState)(!1),[H,U]=(0,u.useState)(!1);return(0,i.jsx)(a.Z,{children:(0,i.jsx)(ep.c,{height:"80vh",children:null!=m&&null!=Z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(ep.E,{children:[(0,i.jsx)(a.Z,{sx:{height:3},children:(0,i.jsx)(L,{})}),(0,i.jsx)(a.Z,{sx:{p:5},children:(0,i.jsx)(V,{anova:m.anova,explained_variance:m.explained_variance,setSelectedPlot:w,selectedCell:A,setSelectedCell:M,scatterMode:y,rowNames:z,colNames:P,factorNames:D})})]}),(0,i.jsxs)(ep.E,{children:[(0,i.jsx)(r.Z,{children:"Projections"}),(0,i.jsx)(a.Z,{sx:{mt:2},children:(0,i.jsx)(ex,{scatterMode:y,setScatterMode:b,selectedPlot:Z,setSelectedPlot:w,setSelectedCell:M,selectedPlot2D:F,setSelectedPlot2D:S,rowNames:z,factorNames:D,projections:m.projections})})]}),"1D"==y&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(ep.E,{sx:{mt:1},children:[(0,i.jsxs)(r.Z,{variant:"h6",sx:{textAlign:"center"},children:["Feature Loading Analysis: ",Z.Factor]}),(0,i.jsx)(eM,{fLVec:N,nFeatRef:B,thrLRef:I,plotHeatMap:R})]}),(0,i.jsxs)(ep.E,{children:[(0,i.jsx)(r.Z,{children:"HeatMap"}),(0,i.jsx)(eR,{nFeatRef:B,fLVec:N,mdataCol:Z.mdataCol,plotHM:_,plotHeatMap:R})]}),(0,i.jsxs)(ep.E,{children:[(0,i.jsx)(a.Z,{sx:{textAlign:"center",mt:2},children:(0,i.jsx)(s.Z,{color:"primary",variant:"outlined",endIcon:(0,i.jsx)(d.Z,{}),onClick:()=>{U(!0),K(!0)},children:"Explore Features"})}),(0,i.jsx)(l.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:H,children:(0,i.jsxs)(a.Z,{sx:{textAlign:"center"},children:[(0,i.jsx)(o.Z,{color:"inherit"}),(0,i.jsx)(a.Z,{sx:{pt:2},children:(0,i.jsx)(c.Z,{children:"Loading features..."})})]})}),q&&(0,i.jsx)(eI,{exploreF:q,setExploreF:K,Factor:Z.Factor,mdataCol:Z.mdataCol,thrLRef:I.current,setEFLoading:U})]})]})]})})})}},2678:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});var i=n(57437),a=n(96507),r=n(46776),s=n(52481),l=n(31863);let o=e=>{let{scatterRef:t,fileName:n}=e;return(0,i.jsx)(a.Z,{sx:{height:0},children:(0,i.jsx)(a.Z,{sx:{width:50,position:"relative",top:0,zIndex:500},children:(0,i.jsx)(r.Z,{"aria-label":"download",size:"small",onClick:()=>{let e=t.current.container.cloneNode(!0),i=window.document.createElement("div");i.appendChild(e),(0,l.default)(i,n)},sx:{opacity:.5},children:(0,i.jsx)(s.Z,{})})})})}},55183:function(e,t,n){e.exports=n(89176)},91703:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=(i=n(2265))&&i.__esModule?i:{default:i},s=n(88601),l=n(42280),o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"buildURI",value:function(){return s.buildURI.apply(void 0,arguments)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=e.headers,i=e.separator,a=e.enclosingCharacter,r=e.uFEFF,s=e.target,l=e.specs,o=e.replace;this.state.page=window.open(this.buildURI(t,r,n,i,a),s,l,o)}},{key:"getWindow",value:function(){return this.state.page}},{key:"render",value:function(){return null}}]),t}(r.default.Component);o.defaultProps=Object.assign(l.defaultProps,{target:"_blank"}),o.propTypes=l.propTypes,t.default=o},65245:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=(i=n(2265))&&i.__esModule?i:{default:i},l=n(88601),o=n(42280),c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.buildURI=n.buildURI.bind(n),n}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"buildURI",value:function(){return l.buildURI.apply(void 0,arguments)}},{key:"handleLegacy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.navigator.msSaveOrOpenBlob){e.preventDefault();var n=this.props,i=n.data,a=n.headers,r=n.separator,s=n.filename,o=n.enclosingCharacter,c=n.uFEFF,d=t&&"function"==typeof i?i():i,u=new Blob([c?"\uFEFF":"",(0,l.toCSV)(d,a,r,o)]);return window.navigator.msSaveBlob(u,s),!1}}},{key:"handleAsyncClick",value:function(e){var t=this;this.props.onClick(e,function(n){if(!1===n){e.preventDefault();return}t.handleLegacy(e,!0)})}},{key:"handleSyncClick",value:function(e){if(!1===this.props.onClick(e)){e.preventDefault();return}this.handleLegacy(e)}},{key:"handleClick",value:function(){var e=this;return function(t){if("function"==typeof e.props.onClick)return e.props.asyncOnClick?e.handleAsyncClick(t):e.handleSyncClick(t);e.handleLegacy(t)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,i=t.headers,r=t.separator,l=t.filename,o=t.uFEFF,c=t.children,d=(t.onClick,t.asyncOnClick,t.enclosingCharacter),u=function(e,t){var n={};for(var i in e)!(t.indexOf(i)>=0)&&Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(t,["data","headers","separator","filename","uFEFF","children","onClick","asyncOnClick","enclosingCharacter"]),h="undefined"==typeof window?"":this.buildURI(n,o,i,r,d);return s.default.createElement("a",a({download:l},u,{ref:function(t){return e.link=t},target:"_self",href:h,onClick:this.handleClick()}),c)}}]),t}(s.default.Component);c.defaultProps=o.defaultProps,c.propTypes=o.propTypes,t.default=c},88601:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){if(!Array.isArray(e))return Array.from(e);for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}var a=t.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},r=t.isJsons=function(e){return Array.isArray(e)&&e.every(function(e){return(void 0===e?"undefined":n(e))==="object"&&!(e instanceof Array)})},s=t.isArrays=function(e){return Array.isArray(e)&&e.every(function(e){return Array.isArray(e)})},l=t.jsonsHeaders=function(e){return Array.from(e.map(function(e){return Object.keys(e)}).reduce(function(e,t){return new Set([].concat(i(e),i(t)))},[]))},o=t.jsons2arrays=function(e,t){var n=t=t||l(e),a=t;return r(t)&&(n=t.map(function(e){return e.label}),a=t.map(function(e){return e.key})),[n].concat(i(e.map(function(e){return a.map(function(t){return c(t,e)})})))},c=t.getHeaderValue=function(e,t){var n=e.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(e,t,n,i){var a=e[t];if(null!=a)return a;i.splice(1)},t);return void 0===n?e in t?t[e]:"":n},d=t.elementOrEmpty=function(e){return null==e?"":e},u=t.joiner=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'"';return e.filter(function(e){return e}).map(function(e){return e.map(function(e){return d(e)}).map(function(e){return""+n+e+n}).join(t)}).join("\n")},h=t.arrays2csv=function(e,t,n,a){return u(t?[t].concat(i(e)):e,n,a)},x=t.jsons2csv=function(e,t,n,i){return u(o(e,t),n,i)},p=t.string2csv=function(e,t,n,i){return t?t.join(n)+"\n"+e:e.replace(/"/g,'""')},f=t.toCSV=function(e,t,n,i){if(r(e))return x(e,t,n,i);if(s(e))return h(e,t,n,i);if("string"==typeof e)return p(e,t,n);throw TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')};t.buildURI=function(e,t,n,i,r){var s=f(e,n,i,r),l=a()?"application/csv":"text/csv",o=new Blob([t?"\uFEFF":"",s],{type:l}),c="data:"+l+";charset=utf-8,"+(t?"\uFEFF":"")+s,d=window.URL||window.webkitURL;return void 0===d.createObjectURL?c:d.createObjectURL(o)}},89176:function(e,t,n){"use strict";t.CSVLink=void 0;var i=r(n(91703)),a=r(n(65245));function r(e){return e&&e.__esModule?e:{default:e}}i.default,t.CSVLink=a.default},42280:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropsNotForwarded=t.defaultProps=t.propTypes=void 0,(i=n(2265))&&i.__esModule;var i,a=n(74275);t.propTypes={data:(0,a.oneOfType)([a.string,a.array,a.func]).isRequired,headers:a.array,target:a.string,separator:a.string,filename:a.string,uFEFF:a.bool,onClick:a.func,asyncOnClick:a.bool,enclosingCharacter:a.string},t.defaultProps={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},t.PropsNotForwarded=["data","headers"]}}]);