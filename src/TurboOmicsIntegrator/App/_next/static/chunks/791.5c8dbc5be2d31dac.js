"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{86455:function(e,t,l){l.r(t),l.d(t,{default:function(){return N}});var a=l(57437),n=l(22079),i=l(8088),s=l(2265),o=l(11093),r=l(41637),c=l(96507),d=l(18687),u=l(85269);let p=e=>{let{setSelectedOmic:t,selfSelectedOmic:l,setSelfSelectedOmic:n,buttonOmic:i,title:o,scroll:c}=e,p=(0,r.tc)().omics.length,m={act:"#424242",noAct:"#FFFFFF"},h={act:"#FFFFFF",noAct:"#424242"},[x,f]=(0,s.useState)(!1),g=l==i||x;return(0,a.jsx)(d.Z,{elevation:3,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),style:{backgroundColor:g?m.act:m.noAct,color:g?h.act:h.noAct,width:"".concat(100/p,"%"),height:70,transition:"all 0.3s ease",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>{l!=i&&(n(i),setTimeout(()=>t(i),500),c())},children:(0,a.jsx)(u.Z,{variant:"h5",children:o})})};var m=function(e){let{selectedOmic:t,setSelectedOmic:l,scrollOmic:n}=e,i=(0,r.tc)().omics,{OMIC2NAME:d}=(0,o.S)(),[u,m]=(0,s.useState)(t);return(0,a.jsx)(c.Z,{display:"flex",children:i.map(e=>(0,a.jsx)(p,{setSelectedOmic:l,selfSelectedOmic:u,setSelfSelectedOmic:m,buttonOmic:e,title:d[e],scroll:()=>n(i.indexOf(e)-i.indexOf(t))},e))})},h=l(33533),x=l(40851),f=l(6093),g=l(46776),b=function(e){let{setExploreF:t,title:l}=e;return(0,a.jsx)(x.Z,{sx:{position:"relative",backgroundColor:"#666666"},children:(0,a.jsx)(f.Z,{children:(0,a.jsxs)(c.Z,{sx:{display:"flex",width:"100%"},children:[(0,a.jsx)(c.Z,{sx:{width:"5%"},children:(0,a.jsx)(g.Z,{edge:"start",color:"inherit",onClick:()=>{t(!1)},"aria-label":"close",children:(0,a.jsx)(h.default,{})})}),(0,a.jsx)(c.Z,{sx:{pt:.5,textAlign:"center",width:"90%"},children:(0,a.jsx)(u.Z,{sx:{ml:2},variant:"h6",component:"div",children:l})}),(0,a.jsx)(c.Z,{sx:{width:"5%"}})]})})})};l(26604);var j=l(36012),F=l(10537),w=l(64728),y=l(13716),v=l(33457),O=l(38592),C=l(92069),M=l(49600),Z=l(93202);let S=e=>{let{table:t,q2cat:l,colFid:n}=e,i=e=>{let t=(0,C.iL)({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0,filename:"Feature_Table"}),a=e.map(e=>e.original);Object.keys(l).length>0&&(a=a.map(e=>({...e,Category_ID:void 0===l[e[n.id]]||0==l[e[n.id]].length?"":l[e[n.id]].map(e=>e.native).join(";"),Category_Name:void 0===l[e[n.id]]||0==l[e[n.id]].length?"":l[e[n.id]].map(e=>e.name).join(";")})));let i=(0,C.gB)(t)(a);(0,C.LR)(t)(i)};return(0,a.jsxs)(c.Z,{sx:{display:"flex",gap:"16px",padding:"8px",flexWrap:"wrap"},children:[(0,a.jsx)(c.Z,{children:(0,a.jsx)(O.UN,{table:t})}),(0,a.jsx)(M.Z,{disabled:0===t.getFilteredRowModel().rows.length,onClick:()=>i(t.getFilteredRowModel().rows),startIcon:(0,a.jsx)(Z.Z,{}),children:"Export Table"})]})};var T=e=>{let{omic:t,sign:l,thr:n,f2MeanL:i,q2cat:o,colFid:d}=e,u=(0,r.tc)().user["".concat(t,"2i")],p=(0,w.a0)().MOFA.displayOpts.selectedPlot.Factor,m=(0,w.a0)().MOFA.displayOpts.selectedPlot.mdataCol,h=(0,r.tc)().mdataType[m],x=(0,w.a0)().MOFA.data.loadings[t][p],f=(0,s.useMemo)(()=>{let e=[];return e=e.concat(u.columns.map(e=>({header:e,accessorKey:e,muiTableHeadCellProps:{align:"left"},muiTableBodyCellProps:{align:"left"},filterFn:"contains"}))),"categorical"==h.type&&e.push(...h.levels.map(e=>({header:"ZÌ„(".concat(e,")"),accessorKey:e,muiTableHeadCellProps:{align:"left"},muiTableBodyCellProps:{align:"center"},filterFn:"greaterThan"}))),e.push({header:p,accessorKey:p,muiTableHeadCellProps:{align:"left"},muiTableBodyCellProps:{align:"center"},filterFn:"up"==l?"greaterThan":"lessThan"}),e},[u,h,p,l]),g=(0,s.useMemo)(()=>{let e=(0,F.$i)(u.fillNa("")),t={};return Object.keys(i).map(a=>{("up"==l&&x[a]>n||"down"==l&&x[a]<n)&&(t[a]={...e[a],...i[a],[p]:Math.round(1e4*x[a])/1e4})}),t=Object.values(t)},[u,i,p,x,l,n]),b=(0,v.X0)({columns:f,data:g,layoutMode:"grid",enableColumnResizing:!0,enableSelectAll:!1,enableColumnFilterModes:!0,enableColumnFilters:!0,enableColumnOrdering:!0,enableGrouping:!0,enableColumnPinning:!0,enableFacetedValues:!0,enableRowActions:!1,enableRowSelection:!1,enableDensityToggle:!1,enableFullScreenToggle:!0,enableGlobalFilter:!1,initialState:{density:"compact",showColumnFilters:!0,showGlobalFilter:!1,columnFilters:[{id:p,value:Math.round(1e4*n)/1e4}],sorting:[{id:p,desc:"up"==l}]},paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiPaginationProps:{rowsPerPageOptions:[10],shape:"rounded",variant:"outlined"},renderTopToolbar:e=>{let{table:t}=e;return(0,a.jsx)(S,{table:t,q2cat:o,colFid:d})}});return(0,a.jsx)(c.Z,{sx:{px:5,pb:3},children:(0,a.jsx)(v.P2,{table:b})})},P=l(98864),A=l.n(P);let k=A()(()=>l.e(360).then(l.bind(l,34360)),{loadableGenerated:{webpack:()=>[34360]}}),R=A()(()=>l.e(433).then(l.bind(l,58433)),{loadableGenerated:{webpack:()=>[58433]}});var E=function(e){let{omic:t,thrLRef:n}=e,{OMIC2NAME:i}=(0,o.S)(),d=(0,r.tc)().user["".concat(t,"2i")],p=(0,w.a0)().MOFA.displayOpts.selectedPlot.Factor,m=(0,w.a0)().MOFA.data.loadings[t][p],h=(0,s.useMemo)(()=>{let e=(0,F.$i)(d),t={up:[],down:[]};return Object.keys(m).map(l=>{m[l]>n.up&&t.up.push(e[l]),m[l]<n.down&&t.down.push(e[l])}),t},[d,m,n.up,n.down]),x=(0,w.a0)().MOFA.displayOpts.selectedPlot.mdataCol,f=(0,r.tc)().mdataType[x],g=(0,r.tc)().norm["x".concat(t)],b=(0,s.useMemo)(()=>{let e={},t=(0,F.$i)(g),l=[...h.up.map(e=>Object.values(e)[0]),...h.down.map(e=>Object.values(e)[0])],a={};return Object.keys(t).map(e=>{a[e]={},l.map(l=>a[e][l]=t[e][l])}),l.map(t=>{e[t]={}}),"categorical"==f.type&&f.levels.map(t=>{let l=new dfd.DataFrame(f.level2id[t].map(e=>a[e]).filter(e=>void 0!=e)),n=l.mean({axis:0}).round(4);n.index.map((l,a)=>{e[l][t]=n.values[a]})}),e},[g,f,h.down,h.up]),[v,O]=(0,s.useState)("m"==t?null:{label:d.columns[0],id:d.columns[0]}),[C,M]=(0,s.useState)({up:{},down:{}}),Z=(0,s.useMemo)(()=>{let e={};return e.up=e=>M(t=>({...t,up:e})),e.down=e=>M(t=>({...t,down:e})),e},[M]),[S,P]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if("m"!=t)return;let e=async()=>{P(l(91794)),console.log("MetaboID was imported")};e()},[t]),(0,a.jsx)(j.tv,{"aria-label":"Omic Positive/Negative Change",children:["up","down"].map(e=>(0,a.jsx)(j.jw,{children:(0,a.jsxs)(c.Z,{sx:{p:2,textAlign:"center"},children:[(0,a.jsxs)(u.Z,{variant:"h5",children:["up"==e?"Positively":"Negatively"," Associated ",i[t]]}),(0,a.jsx)(y.c,{height:"85vh",children:(0,a.jsxs)(y.E,{children:[(0,a.jsx)(T,{omic:t,sign:e,thr:n[e],f2MeanL:b,q2cat:C[e],colFid:v}),h[e].length>0&&(0,a.jsx)(c.Z,{children:"q"==t||"t"==t?(0,a.jsx)(k,{omic:t,fRef:h[e],f2MeanL:b,colFid:v,setColFid:O,setQ2cat:Z[e]}):(0,a.jsx)(a.Fragment,{children:S&&(0,a.jsx)(R,{fRef:h[e],f2MeanL:b,colFid:v,setColFid:O,setM2cat:Z[e],MetaboID:S})})})]})})]})},e))})};let L=s.forwardRef(function(e,t){return(0,a.jsx)(i.Z,{direction:"up",ref:t,...e})});var N=function(e){let{exploreF:t,setExploreF:l,Factor:i,mdataCol:o,thrLRef:d,setEFLoading:u}=e,{omics:p}=(0,r.tc)(),[h,x]=(0,s.useState)(p[0]),f=(0,s.useRef)(null);return(0,s.useEffect)(()=>{u(!1)},[u]),(0,a.jsxs)(n.Z,{fullScreen:!0,open:t,TransitionComponent:L,children:[(0,a.jsx)(b,{setExploreF:l,title:"Explore Features: ".concat(i," vs ").concat(o)}),(0,a.jsx)(m,{selectedOmic:h,setSelectedOmic:x,scrollOmic:e=>{let t=f.current,l=t.clientWidth;t.scrollLeft=t.scrollLeft+e*l}}),(0,a.jsx)(c.Z,{sx:{overflow:"hidden"},ref:f,children:(0,a.jsx)(c.Z,{sx:{display:"flex",width:"".concat(100*p.length,"%")},children:p.map(e=>(0,a.jsx)(c.Z,{sx:{width:"".concat(100/p.length,"%"),opacity:h==e?1:0,transition:"all ease 0.5s"},children:h==e&&(0,a.jsx)(E,{omic:e,thrLRef:d[e]})},e))})})]})}}}]);