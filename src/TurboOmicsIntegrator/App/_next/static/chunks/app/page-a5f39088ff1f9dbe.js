(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{37045:function(e,t,n){Promise.resolve().then(n.bind(n,11093)),Promise.resolve().then(n.bind(n,28325)),Promise.resolve().then(n.bind(n,40549))},28325:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n(57437),r=n(42824),s=n(57380),l=n(87550),i=n(57175),o=n(11093),c=n(16691),u=n.n(c);function d(){let e=(0,o.useVars)().BASE_URL;return(0,a.jsxs)(l.Z,{bg:"dark","data-bs-theme":"dark",className:"bg-body-tertiary",style:{fontSize:"1.2em"},children:[(0,a.jsxs)(r.Z,{className:"mx-0",children:[(0,a.jsx)(l.Z.Brand,{href:"#home",children:(0,a.jsx)(u(),{src:"".concat(e,"/icon.ico"),width:"30",height:"30",className:"d-inline-block align-top",alt:"TurboPutative"})}),(0,a.jsx)(l.Z.Toggle,{"aria-controls":"basic-navbar-nav"}),(0,a.jsx)(l.Z.Collapse,{id:"basic-navbar-nav",children:(0,a.jsxs)(s.Z,{className:"me-auto",children:[(0,a.jsx)(s.Z.Link,{href:"home",className:"mx-2",children:"Home"}),(0,a.jsx)(s.Z.Link,{href:"turboomics.html",active:!0,className:"mx-2",children:"TurboOmics"}),(0,a.jsx)(s.Z.Link,{href:"webserver",className:"mx-2",children:"Web Server"}),(0,a.jsx)(s.Z.Link,{href:"webservices",className:"mx-2",children:"Web Services"}),(0,a.jsxs)(i.Z,{title:"Help",id:"basic-nav-dropdown",children:[(0,a.jsx)(i.Z.Item,{href:"webserverhelp",children:"Web Server"}),(0,a.jsx)(i.Z.Item,{href:"webserviceshelp",children:"Web Services"}),(0,a.jsx)(i.Z.Divider,{}),(0,a.jsx)(i.Z.Item,{href:"moduleshelp",children:"Modules"})]}),(0,a.jsx)(s.Z.Link,{href:"contactUs",className:"mx-2",children:"Contact us"})]})})]}),(0,a.jsx)(l.Z.Collapse,{className:"justify-content-end",children:(0,a.jsx)(l.Z.Brand,{href:"home",style:{fontSize:"1.2em"},children:"TurboPutative"})})]})}},11093:function(e,t,n){"use strict";n.r(t),n.d(t,{VarsProvider:function(){return l},useVars:function(){return i}});var a=n(57437),r=n(2265);let s=(0,r.createContext)({BASE_URL:"/turboputative",API_URL:"http://localhost:8080/turboputative/api/tbomics"});function l(e){let{children:t}=e,n=i();return(0,a.jsx)(s.Provider,{value:n,children:t})}function i(){return(0,r.useContext)(s)}},40549:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ej}});var a=n(57437),r=n(2265),s=n(24983),l=n(59844);function i(e){let{children:t}=e;return(0,a.jsx)(l.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeOut",duration:.5},children:t})}var o=n(49904),c=n(58991),u=n(62455),d=n(62970),x=n(49381),h=n(43226),m=n(15133),p=n(35843);let j=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{width:110,height:70,textAlign:"center",backgroundColor:e,cursor:t?"not-allowed":"pointer",userSelect:"none",margin:"0px 15px"}},b=(0,p.ZP)(m.Z)(e=>{let{theme:t}=e;return{transition:"transform 0.15s ease-in-out, background 0.15s","&:hover":{transform:"scale3d(1.05, 1.05, 1)",backgroundColor:"rgba(204, 229, 255, 0.8)"}}});function f(e){let t,{children:n,text:r,id:l,setPage:i,page:o}=e,c=(0,s.tc)().jobID,u="results"==l&&null==c;t=u?"rgba(210,210,210,0.8)":o==l?"rgba(204, 229, 255, 0.8)":"rgba(255,255,255,1)";let d=j(t,u);return(0,a.jsx)(a.Fragment,{children:u?(0,a.jsxs)(m.Z,{sx:d,children:[(0,a.jsx)("div",{className:"py-2",children:n}),(0,a.jsx)("div",{children:(0,a.jsx)(h.Z,{gutterBottom:!0,variant:"h7",component:"div",children:r})})]}):(0,a.jsxs)(b,{sx:d,onClick:()=>i(l),children:[(0,a.jsx)("div",{className:"py-2",children:n}),(0,a.jsx)("div",{children:(0,a.jsx)(h.Z,{gutterBottom:!0,variant:"h7",component:"div",children:r})})]})})}let g=(0,p.ZP)(m.Z)(e=>{let{theme:t}=e;return{transition:"transform 0.15s ease-in-out, background 0.15s","&:hover":{transform:"scale3d(1.05, 1.05, 1)",backgroundColor:"rgba(255, 0, 0, 0.3)"}}});function v(e){let{children:t,text:n,setPage:r}=e;return(0,a.jsxs)(g,{sx:{...j("rgba(255, 0, 0, 0.2)"),position:"absolute",right:"12%"},onClick:()=>r("create-job"),children:[(0,a.jsx)("div",{className:"py-2",children:t}),(0,a.jsx)("div",{children:(0,a.jsx)(h.Z,{gutterBottom:!0,variant:"h7",component:"div",children:n})})]})}var Z=n(11093),y=n(35551);function P(e){let{children:t,page:n}=e,r=(0,Z.useVars)().API_URL,l=(0,s.Lq)(),i=async e=>{console.log("Loading sample data");let t=await fetch("".concat(r,"/load_sample_data")),n=await t.json(),a={};Object.keys(n).forEach(e=>{a[e]=new dfd.DataFrame(n[e]),a[e].setIndex({column:a[e].columns[0],inplace:!0}),a[e].drop({columns:[a[e].columns[0]],inplace:!0})}),Object.keys(n).forEach(e=>{l({type:"user-upload",fileType:e,userFileName:"".concat(e,".tsv"),df:a[e]}),("xq"==e||"xm"==e)&&l({type:"get-mv-data",fileType:e,df:a[e]})})};return"new-job"!=n?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)("div",{className:"align-self-center",style:{position:"absolute",left:"10%"},children:(0,a.jsx)(y.Z,{variant:"outlined",startIcon:t,onClick:i,children:"Load Sample Data"})})}function N(e){let{page:t,setPage:n}=e,{jobID:r,user:l}=(0,s.tc)();return(0,a.jsxs)("div",{className:"my-2 d-flex justify-content-center",children:[(0,a.jsx)(P,{page:t,children:(0,a.jsx)(x.Z,{})}),(0,a.jsx)(f,{text:"New Job",id:"new-job",setPage:n,page:t,children:(0,a.jsx)(o.Z,{})}),(0,a.jsx)(f,{text:"Find Job",id:"find-job",setPage:n,page:t,children:(0,a.jsx)(c.Z,{})}),(0,a.jsx)(f,{text:"Results",id:"results",setPage:n,page:t,children:(0,a.jsx)(u.Z,{})}),null==r&&l.mdata&&(l.xm&&l.m2i||l.xq&&l.q2i)&&(0,a.jsx)(i,{children:(0,a.jsx)(v,{text:"Create Job",setPage:n,children:(0,a.jsx)(d.Z,{})})})]})}var w=n(96507),T=n(11922),C=n(89394),k=n(91797),M=n(26337),q=n(52653),A=n(6252),S=n(33533);n(16691);let R=(0,p.ZP)(C.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function V(e){let{title:t}=e,[n,s]=(0,r.useState)(!1),l=()=>s(!1),i=(0,Z.useVars)().BASE_URL;return(0,a.jsxs)("div",{className:"mt-0 pt-0",children:[(0,a.jsx)(q.Z,{onClick:()=>s(!0),children:(0,a.jsx)(A.Z,{})}),(0,a.jsxs)(R,{onClose:l,"aria-labelledby":"customized-dialog-title",open:n,maxWidth:"md",children:[(0,a.jsxs)(k.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:[t," Table"]}),(0,a.jsx)(q.Z,{"aria-label":"close",onClick:l,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,a.jsx)(S.Z,{})}),(0,a.jsxs)(M.Z,{dividers:!0,children:[(0,a.jsx)(h.Z,{gutterBottom:!0,children:"Paragraph 1Paragraph 1Paragraph 1Paragraph 1Paragraph 1Paragraph 1Paragraph 1Paragraph 1Paragraph 1Paragraph 1Paragraph 1"}),(0,a.jsx)(h.Z,{gutterBottom:!0,children:"Paragraph 2Paragraph 2Paragraph 2Paragraph 2Paragraph 2Paragraph 2Paragraph 2Paragraph 2Paragraph 2Paragraph 2Paragraph 2"}),(0,a.jsx)("div",{className:"text-center mt-3",children:(0,a.jsx)("img",{src:"".concat(i,"/table.png"),alt:"Table"})})]})]})]})}let E=["","#N/A","#N/A","N/A","#NA","-1.#IND","-1.#QNAN","-NaN","-nan","1.#IND","1.#QNAN","<NA>","N/A","NA","NULL","NaN","None","n/a","nan","null"],F=["TSV"];function L(e){let{title:t,fileType:n}=e,r=(0,s.tc)().userFileNames[n],l=(0,s.Lq)();async function i(e){let t=await e.text(),a=await function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"	";return new Promise(n=>{let a=e.split(/[\r\n]+/);if(a.length<2)throw Error("String text does not have expected DataFrame format");let r=a[0].split(t).map(e=>e.trim()),s=[];for(let e=1;e<a.length;e++){let n=a[e].split(t).map(e=>e.trim());if(n.length===r.length){let e={};for(let t=0;t<r.length;t++)e[r[t]]=E.includes(n[t])?void 0:n[t];s.push(e)}else console.log(n),console.log("Row number ".concat(e," could not be read"))}let l=new dfd.DataFrame(s).setIndex({column:r[0]});l.drop({columns:[r[0]],inplace:!0}),n(l)})}(t);l({type:"user-upload",fileType:n,userFileName:e.name,df:a}),("xq"==n||"xm"==n)&&l({type:"get-mv-data",fileType:n,df:a})}return(0,a.jsx)("div",{className:"DragFile mx-2 text-center",style:{width:"30%"},children:(0,a.jsxs)(m.Z,{variant:"outlined",className:"px-4 ".concat(r&&"border-dark"),style:{transition:"all 1s ease"},children:[(0,a.jsx)(h.Z,{variant:"h5",className:"pt-2",children:t}),(0,a.jsx)(V,{title:t}),(0,a.jsx)(T.b,{multiple:!1,handleChange:i,name:n,types:F}),(0,a.jsx)("p",{className:"mt-3",children:r?"File name: ".concat(r):"no files uploaded yet"})]})})}var I=n(73701),D=n(39279),z=n(30666),_=n(15795),B=n(98489),J=n(29872),O=n(39190);let U=(0,O.Z)(z.Z)(e=>{let{theme:t}=e;return{textAlign:"center"}});function W(){let e=(0,s.tc)().results.PRE.MVThr.xq,t=(0,s.tc)().results.PRE.MVThr.xm,n=(0,s.tc)().user;return(0,a.jsx)(_.Z,{component:J.Z,sx:{width:300},children:(0,a.jsx)(I.Z,{size:"small","aria-label":"a dense table",children:(0,a.jsxs)(D.Z,{children:[null!=n.mdata&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(B.Z,{children:[(0,a.jsx)(U,{children:"n"}),(0,a.jsx)(U,{children:n.mdata.shape[0]})]}),(0,a.jsxs)(B.Z,{children:[(0,a.jsx)(U,{children:"Meta-variables"}),(0,a.jsx)(U,{children:n.mdata.shape[1]})]})]}),null!=n.xq&&(0,a.jsxs)(B.Z,{children:[(0,a.jsx)(U,{children:"Proteomic features"}),(0,a.jsxs)(U,{children:[n.xq.isNa().sum({axis:0}).div(n.xq.shape[0]).le(e).sum()," / ",n.xq.shape[1]]})]}),null!=n.xm&&(0,a.jsxs)(B.Z,{children:[(0,a.jsx)(U,{children:"Metabolomic features"}),(0,a.jsxs)(U,{children:[n.xm.isNa().sum({axis:0}).div(n.xm.shape[0]).le(t).sum()," / ",n.xm.shape[1]]})]})]})})})}var K=n(98864),Q=n.n(K);let H=Q()(()=>Promise.all([n.e(834),n.e(508)]).then(n.bind(n,38508)),{loadableGenerated:{webpack:()=>[38508]},ssr:!1});function G(){return(0,a.jsxs)(w.Z,{sx:{width:"100%"},className:"p-4",children:[(0,a.jsxs)("div",{className:"py-4 d-flex justify-content-between",children:[(0,a.jsx)(L,{title:"Proteomic Metadata",fileType:"q2i"}),(0,a.jsx)(L,{title:"Metadata",fileType:"mdata"}),(0,a.jsx)(L,{title:"Metabolomic Metadata",fileType:"m2i"})]}),(0,a.jsxs)("div",{className:"py-4 d-flex justify-content-between align-items-center",children:[(0,a.jsx)(L,{title:"Proteomic Quantifications",fileType:"xq"}),(0,a.jsx)(W,{}),(0,a.jsx)(L,{title:"Metabolomic Quantifications",fileType:"xm"})]}),(0,a.jsxs)("div",{className:"py-4 d-flex justify-content-between",children:[(0,a.jsx)(H,{fileType:"xq",omic:"Proteomic"}),(0,a.jsx)(H,{fileType:"xm",omic:"Metabolomic"})]})]})}var X=n(99960);function Y(e){let{setPage:t}=e,[n,l]=(0,r.useState)(""),[i,o]=(0,r.useState)(!0),u=(0,s.Lq)(),d=(0,Z.useVars)().API_URL;async function x(e){console.log("Search Job ID: ".concat(e));let n=await fetch("".concat(d,"/search/").concat(e)),a=await n.json();console.log("Server response received:"),console.log(a),a.exist?(u({type:"find-job",results:a.results}),t("results")):o(!1)}return(0,a.jsx)("div",{className:"mx-auto mt-4 text-center",children:(0,a.jsx)(X.Z,{id:"outlined-basic",label:"Search Job",variant:"outlined",onChange:e=>{l(e.target.value),o(!0)},value:n,InputProps:{endAdornment:(0,a.jsx)(()=>(0,a.jsx)(q.Z,{onClick:()=>x(n),children:(0,a.jsx)(c.Z,{})}),{})},sx:{width:"70%",marginTop:"20%"},autoFocus:!0,error:!i,helperText:!i&&"Job not found"})})}function $(){let e=(0,s.tc)();return console.log(e),(0,a.jsx)("div",{children:"Results"})}var ee=n(76500),et=n(34989),en=n(8088),ea=n(97472);function er(){let e=(0,s.tc)().user.m2i.columns.map(e=>({label:e,value:e})),t=(0,s.Lq)();return(0,a.jsxs)(w.Z,{sx:{p:2,textAlign:"center"},children:[(0,a.jsx)(h.Z,{variant:"h6",children:"Please select the column containing metabolomic annotations"}),(0,a.jsx)("div",{children:(0,a.jsx)(w.Z,{sx:{width:"50%",pt:2,mx:"auto",my:2},children:(0,a.jsx)(ea.ZP,{className:"basic-single",classNamePrefix:"select",isSearchable:!0,isClearable:!0,options:e,onChange:e=>null!=e&&t({type:"set-annotations-column",column:e.value})})})})]})}var es=n(74275),el=n.n(es),ei=n(19045),eo=n(92277),ec=n(43560);function eu(){let e=(0,r.useRef)(null),[t,n]=(0,r.useState)(!0),[l,o]=(0,r.useState)([]);(0,r.useEffect)(()=>{n(!1)},[]),(0,r.useEffect)(()=>{try{var t,n;null===(n=e.current)||void 0===n||null===(t=n.scrollToIndex)||void 0===t||t.call(n,0)}catch(e){console.error(e)}},[l]);let c=(0,s.tc)().user.m2i,u=(0,s.tc)().annotations.column;if(null==u||!c.columns.includes(u))return(0,a.jsx)(a.Fragment,{});let d=dfd.toJSON(c),x=c.index.map((e,t)=>({ID:e,[u]:d[t][u]})),h=[{accessorKey:"ID",header:"ID",size:50},{accessorKey:u,header:u,size:170}];return(0,a.jsx)(i,{children:(0,a.jsx)("div",{style:{opacity:.9,width:"50%",margin:"auto"},children:(0,a.jsx)(ec.P2,{columns:h,data:x,enableBottomToolbar:!1,enableTopToolbar:!0,enableColumnResizing:!0,enableColumnVirtualization:!0,enableColumnActions:!1,enableColumnFilters:!1,enableGlobalFilterModes:!1,enableFullScreenToggle:!1,enablePinning:!1,enablePagination:!1,enableRowNumbers:!1,enableDensityToggle:!1,enableRowVirtualization:!0,muiTableContainerProps:{sx:{maxHeight:"500px"}},onSortingChange:o,state:{isLoading:t,sorting:l},rowVirtualizerInstanceRef:e,rowVirtualizerProps:{overscan:1},columnVirtualizerProps:{overscan:2}})})})}function ed(e){let{children:t,value:n,index:r,...s}=e;return(0,a.jsx)("div",{role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r),...s,children:n===r&&(0,a.jsx)(w.Z,{sx:{p:3},children:t})})}function ex(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function eh(){let e=(0,s.Lq)(),t=(0,s.tc)().annotations.mode,n=(0,s.tc)().annotations.column,r=(0,s.tc)().user.m2i,l=()=>{let e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="";for(let a=0;a<e;a++){let e=Math.floor(Math.random()*t.length);n+=t.charAt(e)}return n}(10);console.log("Creating job: ".concat(e))};return(0,a.jsxs)(w.Z,{sx:{width:"100%"},children:[(0,a.jsx)(w.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,a.jsxs)(ei.Z,{value:t,onChange:(t,n)=>{e({type:"set-annotations-mode",mode:n})},"aria-label":"basic tabs example",centered:!0,children:[(0,a.jsx)(eo.Z,{label:"Use my annotations",...ex(0),sx:{px:4}}),(0,a.jsx)(eo.Z,{label:"Perform annotations",...ex(1),sx:{px:4}})]})}),(0,a.jsxs)(ed,{value:t,index:0,children:[(0,a.jsx)(er,{}),(0,a.jsx)(eu,{}),null!=n&&r.columns.includes(n)&&(0,a.jsx)(w.Z,{sx:{mt:4,textAlign:"center"},children:(0,a.jsx)(y.Z,{variant:"outlined",color:"error",onClick:e=>l(),children:"Create Job"})})]}),(0,a.jsx)(ed,{value:t,index:1,children:"Perform annotations using CMM & TP"})]})}n(50553),ed.propTypes={children:el().node,index:el().number.isRequired,value:el().number.isRequired};let em=r.forwardRef(function(e,t){return(0,a.jsx)(en.Z,{direction:"up",ref:t,...e})});function ep(e){let{page:t,setPage:n}=e;return console.log(t),(0,a.jsx)("div",{children:(0,a.jsxs)(C.Z,{fullScreen:!0,open:"create-job"==t,TransitionComponent:em,children:[(0,a.jsx)(ee.Z,{sx:{position:"relative",backgroundColor:"rgba(160, 0, 0, 1)"},children:(0,a.jsxs)(et.Z,{children:[(0,a.jsx)(q.Z,{edge:"start",color:"inherit",onClick:()=>n("new-job"),"aria-label":"close",children:(0,a.jsx)(S.Z,{})}),(0,a.jsx)(h.Z,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Metabolomic Putative Annotations"})]})}),(0,a.jsx)(w.Z,{className:"m-2",children:(0,a.jsx)(eh,{})})]})})}function ej(){let[e,t]=(0,r.useState)("new-job");return(0,a.jsx)("div",{children:(0,a.jsxs)(s.JV,{children:[(0,a.jsx)(N,{page:e,setPage:t}),"new-job"==e&&(0,a.jsx)(i,{children:(0,a.jsx)(G,{})}),(0,a.jsx)(ep,{page:e,setPage:t}),"find-job"==e&&(0,a.jsx)(i,{children:(0,a.jsx)(Y,{setPage:t})}),"results"==e&&(0,a.jsx)(i,{children:(0,a.jsx)($,{})})]})})}},24983:function(e,t,n){"use strict";n.d(t,{JV:function(){return u},Lq:function(){return c},tc:function(){return o}});var a=n(57437),r=n(2265),s=n(36970);let l=(0,r.createContext)(null),i=(0,r.createContext)(null);function o(){return(0,r.useContext)(l)}function c(){return(0,r.useContext)(i)}function u(e){let{children:t}=e,[n,r]=(0,s.C)(d,x);return(0,a.jsx)(l.Provider,{value:n,children:(0,a.jsx)(i.Provider,{value:r,children:t})})}function d(e,t){switch(console.log("jobReducer called: ".concat(t.type)),t.type){case"find-job":return console.log("findJob"),t.results;case"user-upload":e.user[t.fileType]=t.df,e.userFileNames[t.fileType]=t.userFileName;break;case"get-mv-data":{let n=t.df;n=n.isNa().sum({axis:0}).div(n.shape[0]);let a=function(e,t,n){if("number"!=typeof e||"number"!=typeof t||"number"!=typeof n)throw Error("All arguments must be numbers");if(e>t&&n>0)throw Error('The "step" value must be negative if "start" is greater than "end"');if(e<t&&n<0)throw Error('The "step" value must be positive if "start" is less than "end"');let a=[],r=e;for(;e<=t&&r<=t||e>=t&&r>=t;)a.push(r),r+=n;return a}(0,1.05,.05);a=a.map(e=>({MVThr:Math.round(100*e)/100,Features:n.le(e).sum()})),e.results.PRE.MV[t.fileType]=a;break}case"set-mv-thr":e.results.PRE.MVThr[t.fileType]=t.thr;break;case"set-mv-type":e.results.PRE.MVType[t.fileType]=t.MVType;break;case"set-annotations-mode":e.annotations.mode=t.mode;break;case"set-annotations-column":e.annotations.column=t.column}}let x={jobID:null,userFileNames:{xq:null,xm:null,mdata:null,q2i:null,m2i:null},user:{xq:null,xm:null,mdata:null,q2i:null,m2i:null},norm:{xq:null,xm:null,mdata:null,q2i:null,m2i:null},annotations:{mode:0,column:null},results:{PRE:{MV:{xq:null,xm:null},MVThr:{xq:.2,xm:.2},MVType:{xq:"KNN",xm:"KNN"}},EDA:null,MOFA:null,CORR:null,ML:null}}}},function(e){e.O(0,[625,163,960,8,898,365,683,86,971,596,744],function(){return e(e.s=37045)}),_N_E=e.O()}]);